var f=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},Ce=class{static fromArray(t,r){let n=r||new Fe;for(let i=t.length-1;i>=0;--i)n=new Se(t[i],n);return n}[Symbol.iterator](){return new vi(this)}toArray(){return[...this]}atLeastLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return r!==void 0}hasLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return t===-1&&r instanceof Fe}countLength(){let t=this,r=0;for(;t;)t=t.tail,r++;return r-1}};function _(e,t){return new Se(e,t)}function a(e,t){return Ce.fromArray(e,t)}var vi=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof Fe)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},Fe=class extends Ce{},Se=class extends Ce{constructor(t,r){super(),this.head=t,this.tail=r}},ur=class{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,r,n){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=r??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=n??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return Hr(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;let r=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let i=0;i<r;i++)if(this.rawBuffer[i]!==t.rawBuffer[i])return!1;let n=this.bitSize%8;if(n){let i=8-n;if(this.rawBuffer[r]>>i!==t.rawBuffer[r]>>i)return!1}}else{for(let i=0;i<r;i++){let s=Hr(this.rawBuffer,this.bitOffset,i),o=Hr(t.rawBuffer,t.bitOffset,i);if(s!==o)return!1}let n=this.bitSize%8;if(n){let i=Hr(this.rawBuffer,this.bitOffset,r),s=Hr(t.rawBuffer,t.bitOffset,r),o=8-n;if(i>>o!==s>>o)return!1}}return!0}get buffer(){if(So("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(So("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}};function Hr(e,t,r){if(t===0)return e[r]??0;{let n=e[r]<<t&255,i=e[r+1]>>8-t;return n|i}}var Oo={};function So(e,t){Oo[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),Oo[e]=!0)}var ar=class e extends f{static isResult(t){return t instanceof e}},k=class extends ar{constructor(t){super(),this[0]=t}isOk(){return!0}},v=class extends ar{constructor(t){super(),this[0]=t}isOk(){return!1}};function D(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!Eo(n)||!Eo(i)||!ba(n,i)||ma(n,i)||ha(n,i)||$a(n,i)||xa(n,i)||wa(n,i)||ya(n,i))return!1;let o=Object.getPrototypeOf(n);if(o!==null&&typeof o.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[u,l]=_a(n);for(let c of u(n))r.push(l(n,c),l(i,c))}return!0}function _a(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function ma(e,t){return e instanceof Date&&(e>t||e<t)}function ha(e,t){return!(e instanceof ur)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function $a(e,t){return Array.isArray(e)&&e.length!==t.length}function xa(e,t){return e instanceof Map&&e.size!==t.size}function wa(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function ya(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function Eo(e){return typeof e=="object"&&e!==null}function ba(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function cr(e,t){return t===0?0:e%t}function Vr(e,t){return Math.trunc(ji(e,t))}function ji(e,t){return t===0?0:e/t}function Cn(e,t,r,n,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=r,o.function=n,o.fn=n;for(let u in s)o[u]=s[u];return o}var re=class extends f{},K=class extends f{},ae=class extends f{};var y=class extends f{constructor(t){super(),this[0]=t}},L=class extends f{};function Bn(e,t){if(e instanceof y){let r=e[0];return new k(r)}else return new v(t)}function Ao(e,t){return e instanceof y?e[0]:t}var To=new WeakMap,Li=new DataView(new ArrayBuffer(8)),Oi=0;function Si(e){let t=To.get(e);if(t!==void 0)return t;let r=Oi++;return Oi===2147483647&&(Oi=0),To.set(e,r),r}function Ei(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function Ti(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function Co(e){Li.setFloat64(0,e);let t=Li.getInt32(0),r=Li.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function ga(e){return Ti(e.toString())}function ka(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return Si(e);if(e instanceof Date)return Co(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+Be(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+Be(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+Ei(Be(n),Be(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s];r=r+Ei(Be(o),Ti(s))|0}}return r}function Be(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return Co(e);case"string":return Ti(e);case"bigint":return ga(e);case"object":return ka(e);case"symbol":return Si(e);case"function":return Si(e);default:return 0}}var Ke=5,zi=Math.pow(2,Ke),va=zi-1,ja=zi/2,La=zi/4,me=0,Xe=1,Ee=2,Pt=3,Ci={type:Ee,bitmap:0,array:[]};function Yr(e,t){return e>>>t&va}function Nn(e,t){return 1<<Yr(e,t)}function Oa(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Bi(e,t){return Oa(e&t-1)}function qe(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function Sa(e,t,r){let n=e.length,i=new Array(n+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=r;s<n;)i[o++]=e[s++];return i}function Ai(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function Bo(e,t,r,n,i,s){let o=Be(t);if(o===n)return{type:Pt,hash:o,array:[{type:me,k:t,v:r},{type:me,k:i,v:s}]};let u={val:!1};return Xr(qi(Ci,e,o,t,r,u),e,n,i,s,u)}function Xr(e,t,r,n,i,s){switch(e.type){case Xe:return Ea(e,t,r,n,i,s);case Ee:return qi(e,t,r,n,i,s);case Pt:return Aa(e,t,r,n,i,s)}}function Ea(e,t,r,n,i,s){let o=Yr(r,t),u=e.array[o];if(u===void 0)return s.val=!0,{type:Xe,size:e.size+1,array:qe(e.array,o,{type:me,k:n,v:i})};if(u.type===me)return D(n,u.k)?i===u.v?e:{type:Xe,size:e.size,array:qe(e.array,o,{type:me,k:n,v:i})}:(s.val=!0,{type:Xe,size:e.size,array:qe(e.array,o,Bo(t+Ke,u.k,u.v,r,n,i))});let l=Xr(u,t+Ke,r,n,i,s);return l===u?e:{type:Xe,size:e.size,array:qe(e.array,o,l)}}function qi(e,t,r,n,i,s){let o=Nn(r,t),u=Bi(e.bitmap,o);if((e.bitmap&o)!==0){let l=e.array[u];if(l.type!==me){let d=Xr(l,t+Ke,r,n,i,s);return d===l?e:{type:Ee,bitmap:e.bitmap,array:qe(e.array,u,d)}}let c=l.k;return D(n,c)?i===l.v?e:{type:Ee,bitmap:e.bitmap,array:qe(e.array,u,{type:me,k:n,v:i})}:(s.val=!0,{type:Ee,bitmap:e.bitmap,array:qe(e.array,u,Bo(t+Ke,c,l.v,r,n,i))})}else{let l=e.array.length;if(l>=ja){let c=new Array(32),d=Yr(r,t);c[d]=qi(Ci,t+Ke,r,n,i,s);let p=0,$=e.bitmap;for(let b=0;b<32;b++){if(($&1)!==0){let w=e.array[p++];c[b]=w}$=$>>>1}return{type:Xe,size:l+1,array:c}}else{let c=Sa(e.array,u,{type:me,k:n,v:i});return s.val=!0,{type:Ee,bitmap:e.bitmap|o,array:c}}}}function Aa(e,t,r,n,i,s){if(r===e.hash){let o=Ni(e,n);if(o!==-1)return e.array[o].v===i?e:{type:Pt,hash:r,array:qe(e.array,o,{type:me,k:n,v:i})};let u=e.array.length;return s.val=!0,{type:Pt,hash:r,array:qe(e.array,u,{type:me,k:n,v:i})}}return Xr({type:Ee,bitmap:Nn(e.hash,t),array:[e]},t,r,n,i,s)}function Ni(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(D(t,e.array[n].k))return n;return-1}function qn(e,t,r,n){switch(e.type){case Xe:return Ta(e,t,r,n);case Ee:return za(e,t,r,n);case Pt:return Ca(e,n)}}function Ta(e,t,r,n){let i=Yr(r,t),s=e.array[i];if(s!==void 0){if(s.type!==me)return qn(s,t+Ke,r,n);if(D(n,s.k))return s}}function za(e,t,r,n){let i=Nn(r,t);if((e.bitmap&i)===0)return;let s=Bi(e.bitmap,i),o=e.array[s];if(o.type!==me)return qn(o,t+Ke,r,n);if(D(n,o.k))return o}function Ca(e,t){let r=Ni(e,t);if(!(r<0))return e.array[r]}function Mi(e,t,r,n){switch(e.type){case Xe:return Ba(e,t,r,n);case Ee:return qa(e,t,r,n);case Pt:return Na(e,n)}}function Ba(e,t,r,n){let i=Yr(r,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===me){if(!D(s.k,n))return e}else if(o=Mi(s,t+Ke,r,n),o===s)return e;if(o===void 0){if(e.size<=La){let u=e.array,l=new Array(e.size-1),c=0,d=0,p=0;for(;c<i;){let $=u[c];$!==void 0&&(l[d]=$,p|=1<<c,++d),++c}for(++c;c<u.length;){let $=u[c];$!==void 0&&(l[d]=$,p|=1<<c,++d),++c}return{type:Ee,bitmap:p,array:l}}return{type:Xe,size:e.size-1,array:qe(e.array,i,o)}}return{type:Xe,size:e.size,array:qe(e.array,i,o)}}function qa(e,t,r,n){let i=Nn(r,t);if((e.bitmap&i)===0)return e;let s=Bi(e.bitmap,i),o=e.array[s];if(o.type!==me){let u=Mi(o,t+Ke,r,n);return u===o?e:u!==void 0?{type:Ee,bitmap:e.bitmap,array:qe(e.array,s,u)}:e.bitmap===i?void 0:{type:Ee,bitmap:e.bitmap^i,array:Ai(e.array,s)}}return D(n,o.k)?e.bitmap===i?void 0:{type:Ee,bitmap:e.bitmap^i,array:Ai(e.array,s)}:e}function Na(e,t){let r=Ni(e,t);if(r<0)return e;if(e.array.length!==1)return{type:Pt,hash:e.hash,array:Ai(e.array,r)}}function qo(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===me){t(s.v,s.k);continue}qo(s,t)}}}var Ze=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=qn(this.root,0,Be(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?Ci:this.root,s=Xr(i,0,Be(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=Mi(this.root,0,Be(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:qn(this.root,0,Be(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){qo(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+Ei(Be(r),Be(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;try{return this.forEach((r,n)=>{if(!D(t.get(n,!r),r))throw zo}),!0}catch(r){if(r===zo)return!1;throw r}}},zo=Symbol();var Ma=void 0,No={};function J(e){return e.toString()}function Dt(e){return[e.charCodeAt(0)|0,e.slice(1)]}function ce(e){return e.toLowerCase()}function ue(e,t,r){return e.slice(t,t+r)}function Wt(e,t){return e.startsWith(t)}var Po=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),bp=new RegExp(`^[${Po}]*`),gp=new RegExp(`[${Po}]*$`);function Kr(){return Ze.new()}function Zr(e,t){let r=e.get(t,No);return r===No?new v(Ma):new k(r)}function Do(e,t,r){return r.set(e,t)}function Ut(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof ar)return"Result";if(e instanceof Ce)return"List";if(e instanceof ur)return"BitArray";if(e instanceof Ze)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function Qr(e,t,r){return Do(t,r,e)}var Z=class extends f{},et=class extends f{};function fr(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=_(i,n)}}}function R(e){return fr(e,a([]))}function Fa(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return R(s);{let o=n.head;e=n.tail,t=i,r=_(i(o),s)}}}function tt(e,t){return Fa(e,t,a([]))}function Ra(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=_(i,n)}}}function ie(e,t){return Ra(R(e),t)}function Mn(e,t){return _(t,e)}function be(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return i;{let o=n.head;e=n.tail,t=s(i,o),r=s}}}function Ga(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return new v(void 0);{let i=r.head,s=r.tail,o=n(i);if(o.isOk()){let u=o[0];return new k(u)}else e=s,t=n}}}function Ha(e,t,r,n,i,s){for(;;){let o=e,u=t,l=r,c=n,d=i,p=s,$=_(d,l);if(o.hasLength(0))return c instanceof Z?_(R($),p):_($,p);{let b=o.head,w=o.tail,O=u(d,b);if(O instanceof ae&&c instanceof et)e=w,t=u,r=$,n=c,i=b,s=p;else if(O instanceof re&&c instanceof Z)e=w,t=u,r=$,n=c,i=b,s=p;else if(O instanceof K&&c instanceof Z)e=w,t=u,r=$,n=c,i=b,s=p;else if(O instanceof ae&&c instanceof Z){let h;c instanceof Z?h=_(R($),p):h=_($,p);let j=h;if(w.hasLength(0))return _(a([b]),j);{let g=w.head,S=w.tail,E,x=u(b,g);x instanceof re?E=new Z:x instanceof K?E=new Z:E=new et;let A=E;e=S,t=u,r=a([b]),n=A,i=g,s=j}}else if(O instanceof re&&c instanceof et){let h;c instanceof Z?h=_(R($),p):h=_($,p);let j=h;if(w.hasLength(0))return _(a([b]),j);{let g=w.head,S=w.tail,E,x=u(b,g);x instanceof re?E=new Z:x instanceof K?E=new Z:E=new et;let A=E;e=S,t=u,r=a([b]),n=A,i=g,s=j}}else{let h;c instanceof Z?h=_(R($),p):h=_($,p);let j=h;if(w.hasLength(0))return _(a([b]),j);{let g=w.head,S=w.tail,E,x=u(b,g);x instanceof re?E=new Z:x instanceof K?E=new Z:E=new et;let A=E;e=S,t=u,r=a([b]),n=A,i=g,s=j}}}}}function Va(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(i.hasLength(0))return fr(s,u);if(s.hasLength(0))return fr(i,u);{let l=i.head,c=i.tail,d=s.head,p=s.tail,$=o(l,d);$ instanceof re?(e=c,t=s,r=o,n=_(l,u)):$ instanceof ae?(e=i,t=p,r=o,n=_(d,u)):(e=i,t=p,r=o,n=_(d,u))}}}function Ja(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return R(s);if(n.hasLength(1)){let o=n.head;return R(_(R(o),s))}else{let o=n.head,u=n.tail.head,l=n.tail.tail,c=Va(o,u,i,a([]));e=l,t=i,r=_(c,s)}}}function Ya(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(i.hasLength(0))return fr(s,u);if(s.hasLength(0))return fr(i,u);{let l=i.head,c=i.tail,d=s.head,p=s.tail,$=o(l,d);$ instanceof re?(e=i,t=p,r=o,n=_(d,u)):$ instanceof ae?(e=c,t=s,r=o,n=_(l,u)):(e=c,t=s,r=o,n=_(l,u))}}}function Xa(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return R(s);if(n.hasLength(1)){let o=n.head;return R(_(R(o),s))}else{let o=n.head,u=n.tail.head,l=n.tail.tail,c=Ya(o,u,i,a([]));e=l,t=i,r=_(c,s)}}}function Ka(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return a([]);if(n.hasLength(1)&&i instanceof Z)return n.head;if(n.hasLength(1)&&i instanceof et){let o=n.head;return R(o)}else i instanceof Z?(e=Ja(n,s,a([])),t=new et,r=s):(e=Xa(n,s,a([])),t=new Z,r=s)}}function Go(e,t){if(e.hasLength(0))return a([]);if(e.hasLength(1)){let r=e.head;return a([r])}else{let r=e.head,n=e.tail.head,i=e.tail.tail,s,o=t(r,n);o instanceof re?s=new Z:o instanceof K?s=new Z:s=new et;let u=s,l=Ha(i,t,a([r]),u,n,a([]));return Ka(l,new Z,t)}}function Ii(e,t){return Ga(e,r=>{let n=r[0],i=r[1];return D(n,t)?new k(i):new v(void 0)})}function Za(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(i.atLeastLength(1)&&D(i.head[0],s)){let l=i.head[0],c=i.tail;return fr(u,_([l,o],c))}else if(i.atLeastLength(1)){let l=i.head;e=i.tail,t=s,r=o,n=_(l,u)}else return R(_([s,o],u))}}function Pi(e,t,r){return Za(e,t,r,a([]))}function Yo(e){return e===""}function sc(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(1)){let i=r.head;e=r.tail,t=n+i}else return n}}function tn(e){return sc(e,"")}function oc(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return s;{let o=n.head;e=n.tail,t=i,r=s+i+o}}}function ct(e,t){if(e.hasLength(0))return"";{let r=e.head,n=e.tail;return oc(n,t,r)}}function Qo(e){return!!e.isOk()}function jt(e,t){if(e.isOk()){let r=e[0];return new k(t(r))}else{let r=e[0];return new v(r)}}function Lt(e,t){if(e.isOk()){let r=e[0];return new k(r)}else{let r=e[0];return new v(t(r))}}function Rt(e,t){if(e.isOk()){let r=e[0];return t(r)}else{let r=e[0];return new v(r)}}function ft(e,t){return Rt(e,t)}function Wi(e){return e.isOk(),e[0]}function Ui(e,t){if(e.isOk()){let r=e[0];return new k(r)}else return new v(t)}function rl(e,t){if(e instanceof Ze||e instanceof WeakMap||e instanceof Map){let n={},i=e.get(t,n);return i===n?new k(new L):new k(new y(i))}let r=Number.isInteger(t);if(r&&t>=0&&t<8&&e instanceof Ce){let n=0;for(let i of e){if(n===t)return new k(new y(i));n++}return new v("Indexable")}return r&&Array.isArray(e)||e&&typeof e=="object"||e&&Object.getPrototypeOf(e)===Object.prototype?t in e?new k(new y(e[t])):new k(new L):new v(r?"Indexable":"Dict")}function nl(e){return Number.isInteger(e)?new k(e):new v(0)}function il(e){return typeof e=="string"?new k(e):new v("")}var pt=class extends f{constructor(t,r,n){super(),this.expected=t,this.found=r,this.path=n}},nt=class extends f{constructor(t){super(),this.function=t}};function Ot(e,t){let r=t.function(e),n=r[0],i=r[1];return i.hasLength(0)?new k(n):new v(i)}function dr(e){return new nt(t=>[e,a([])])}function _r(e,t){return new nt(r=>{let n=e.function(r),i=n[0],s=n[1];return[t(i),s]})}function pc(e,t,r){for(;;){let n=e,i=t,s=r;if(s.hasLength(0))return i;{let o=s.head,u=s.tail,l=o.function(n),c=l;if(l[1].hasLength(0))return c;e=n,t=i,r=u}}}function ol(e,t){return new nt(r=>{let n=e.function(r),i=n;return n[1].hasLength(0)?i:pc(r,i,t)})}function dc(e,t){return a([new pt(e,Ut(t),a([]))])}function ll(e,t,r){let n=r(e);return n.isOk()?[n[0],a([])]:[n[0],a([new pt(t,Ut(e),a([]))])]}function _c(e){return ll(e,"Int",nl)}function Fi(e,t){return new nt(r=>[e,dc(t,r)])}var ul=new nt(_c);function mc(e){return ll(e,"String",il)}var it=new nt(mc);function In(e,t){let r=ol(it,a([_r(ul,J)])),n=tt(t,s=>{let o=s,u=Ot(o,r);return u.isOk()?u[0]:"<"+Ut(o)+">"}),i=tt(e[1],s=>{let o=s;return new pt(o.expected,o.found,ie(n,s.path))});return[e[0],i]}function al(e,t,r,n,i){for(;;){let s=e,o=t,u=r,l=n,c=i;if(s.hasLength(0)){let d=u(l);return In(d,R(o))}else{let d=s.head,p=s.tail,$=rl(l,d);if($.isOk()&&$[0]instanceof y){let b=$[0][0];e=p,t=_(d,o),r=u,n=b,i=c}else{if($.isOk()&&$[0]instanceof L)return c(l,_(d,o));{let b=$[0],h=[u(l)[0],a([new pt(b,Ut(l),a([]))])];return In(h,R(o))}}}}}function rn(e,t,r){return new nt(n=>{let i=al(e,a([]),t.function,n,(d,p)=>{let w=[t.function(d)[0],a([new pt("Field","Nothing",a([]))])];return In(w,R(p))}),s=i[0],o=i[1],u=r(s).function(n),l=u[0],c=u[1];return[l,ie(o,c)]})}function cl(e,t){return new nt(r=>al(e,a([]),t.function,r,(n,i)=>{let u=[t.function(n)[0],a([new pt("Field","Nothing",a([]))])];return In(u,R(i))}))}function nn(e,t,r){return rn(a([e]),t,r)}function Ri(e,t,r){return e?t:r()}function he(e){return e}function Gi(e){return JSON.stringify(e)}function pl(e){return Object.fromEntries(e)}function dl(e){try{let t=JSON.parse(e);return new k(t)}catch(t){return new v($c(t,e))}}function $c(e,t){return xc(e)?new Wn:wc(e,t)}function xc(e){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(e.message)}function wc(e,t){let r=[yc,bc,kc,gc];for(let n of r){let i=n(e,t);if(i)return i}return new St("",0)}function yc(e){let r=/unexpected token '(.)', ".+" is not valid JSON/i.exec(e.message);if(!r)return null;let n=Dn(r[1]);return new St(n,-1)}function bc(e){let r=/unexpected token (.) in JSON at position (\d+)/i.exec(e.message);if(!r)return null;let n=Dn(r[1]),i=Number(r[2]);return new St(n,i)}function gc(e,t){let n=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(e.message);if(!n)return null;let i=Number(n[2]),s=Number(n[3]),o=vc(i,s,t),u=Dn(t[o]);return new St(u,o)}function kc(e){let r=/unexpected (identifier|token) "(.)"/i.exec(e.message);if(!r)return null;let n=Dn(r[2]);return new St(n,0)}function Dn(e){return"0x"+e.charCodeAt(0).toString(16).toUpperCase()}function vc(e,t,r){if(e===1)return t-1;let n=1,i=0;return r.split("").find((s,o)=>(s===`
`&&(n+=1),n===e?(i=o+t,!0):!1)),i}var Wn=class extends f{},St=class extends f{constructor(t){super(),this[0]=t}};var Hi=class extends f{constructor(t){super(),this[0]=t}};function jc(e,t){return ft(dl(e),r=>{let n=Ot(r,t);return Lt(n,i=>new Hi(i))})}function _l(e,t){return jc(e,t)}function ml(e){return Gi(e)}function Ht(e){return e}function Ji(e){return e}function sn(e){return pl(e)}var Un=class extends f{constructor(t){super(),this.dict=t}};function $l(){return new Un(Kr())}function Yi(e,t){let r=e.dict,n=Zr(r,t);return Qo(n)}var Oc=void 0;function xl(e,t){return new Un(Qr(e.dict,t,Oc))}var Ec=Ze.new();function Fn(){return Ec}var Ac=$l();function on(){return Ac}var Re=globalThis?.document,Rn="http://www.w3.org/1999/xhtml",Gn=1,Hn=3,ln=11,wl=!!globalThis.HTMLElement?.prototype?.moveBefore;var C=a([]),Vn=new L;var Tc=new ae,zc=new re,Cc=new K;function Jn(e,t){return e.name===t.name?Cc:e.name<t.name?zc:Tc}var Ne=class extends f{constructor(t,r,n){super(),this.kind=t,this.name=r,this.value=n}},mr=class extends f{constructor(t,r,n){super(),this.kind=t,this.name=r,this.value=n}},Q=class extends f{constructor(t,r,n,i,s,o,u,l){super(),this.kind=t,this.name=r,this.handler=n,this.include=i,this.prevent_default=s,this.stop_propagation=o,this.immediate=u,this.limit=l}},hr=class extends f{constructor(t){super(),this.kind=t}},un=class extends f{constructor(t,r){super(),this.kind=t,this.delay=r}},an=class extends f{constructor(t,r){super(),this.kind=t,this.delay=r}};function Ol(e,t){if(e instanceof hr&&t instanceof hr)return!0;if(e instanceof un&&t instanceof un&&e.delay===t.delay){let r=e.delay,n=t.delay;return!0}else if(e instanceof an&&t instanceof an&&e.delay===t.delay){let r=e.delay,n=t.delay;return!0}else return!1}function Mc(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;if(r.atLeastLength(2)&&r.head instanceof Ne&&r.head.name==="class"&&r.tail.head instanceof Ne&&r.tail.head.name==="class"){let i=r.head.kind,s=r.head.value,o=r.tail.head.value,u=r.tail.tail,l=s+" "+o,c=new Ne(i,"class",l);e=_(c,u),t=n}else if(r.atLeastLength(2)&&r.head instanceof Ne&&r.head.name==="style"&&r.tail.head instanceof Ne&&r.tail.head.name==="style"){let i=r.head.kind,s=r.head.value,o=r.tail.head.value,u=r.tail.tail,l=s+";"+o,c=new Ne(i,"style",l);e=_(c,u),t=n}else{let i=r.head;e=r.tail,t=_(i,n)}}}function Ki(e){if(e.hasLength(0))return e;if(e.hasLength(1))return e;{let r=Go(e,(n,i)=>Jn(i,n));return Mc(r,C)}}var Zi=0;function Sl(e,t){return new Ne(Zi,e,t)}var Qi=1;function El(e,t){return new mr(Qi,e,t)}var es=2;function Al(e,t,r,n,i,s,o){return new Q(es,e,t,r,n,i,s,o)}var ts=1;var rs=2;function At(e,t){return Sl(e,t)}function Tl(e,t){return El(e,t)}function Ic(e,t){return t?At(e,""):Tl(e,Ji(!1))}function m(e){return At("class",e)}function Yn(e){return At("id",e)}function Vt(e){return Ic("disabled",e)}function ns(e){return At("for",e)}function is(e){return At("placeholder",e)}var fn=class extends f{constructor(t,r,n){super(),this.synchronous=t,this.before_paint=r,this.after_paint=n}};var ss=new fn(a([]),a([]),a([]));function V(){return ss}function Tt(e){let t=n=>{let i=n.dispatch;return e(i)},r=ss;return new fn(a([t]),r.before_paint,r.after_paint)}function pn(e){return be(e,ss,(t,r)=>new fn(be(r.synchronous,t.synchronous,Mn),be(r.before_paint,t.before_paint,Mn),be(r.after_paint,t.after_paint,Mn)))}function Te(){return null}function $r(e,t){let r=e?.get(t);return r!=null?new k(r):new v(void 0)}function dn(e,t,r){return e??=new Map,e.set(t,r),e}function os(e,t){return e?.delete(t),e}var Kn=class extends f{},Zn=class extends f{constructor(t,r){super(),this.key=t,this.parent=r}},ls=class extends f{constructor(t,r){super(),this.index=t,this.parent=r}};function Dc(e,t){for(;;){let r=e,n=t;if(n.hasLength(0))return!1;{let i=n.head,s=n.tail;if(Wt(r,i))return!0;e=r,t=s}}}function zt(e,t,r){return r===""?new ls(t,e):new Zn(r,e)}var us=new Kn,as=`
`,cs="	";function zl(e,t){for(;;){let r=e,n=t;if(r instanceof Kn){if(n.hasLength(0))return"";{let i=n.tail;return tn(i)}}else if(r instanceof Zn){let i=r.key;e=r.parent,t=_(cs,_(i,n))}else{let i=r.index;e=r.parent,t=_(as,_(J(i),n))}}}function Wc(e){return zl(e,a([]))}function Cl(e,t){return t.hasLength(0)?!1:Dc(Wc(e),t)}var fs="\f";function ps(e,t){return zl(e,a([fs,t]))}var $e=class extends f{constructor(t,r,n,i,s,o){super(),this.kind=t,this.key=r,this.mapper=n,this.children=i,this.keyed_children=s,this.children_count=o}},Me=class extends f{constructor(t,r,n,i,s,o,u,l,c,d){super(),this.kind=t,this.key=r,this.mapper=n,this.namespace=i,this.tag=s,this.attributes=o,this.children=u,this.keyed_children=l,this.self_closing=c,this.void=d}},st=class extends f{constructor(t,r,n,i){super(),this.kind=t,this.key=r,this.mapper=n,this.content=i}},Ie=class extends f{constructor(t,r,n,i,s,o,u){super(),this.kind=t,this.key=r,this.mapper=n,this.namespace=i,this.tag=s,this.attributes=o,this.inner_html=u}};function Rc(e,t){return t===""?e==="area"||e==="base"||e==="br"||e==="col"||e==="embed"||e==="hr"||e==="img"||e==="input"||e==="link"||e==="meta"||e==="param"||e==="source"||e==="track"?!0:e==="wbr":!1}function ze(e){return e instanceof $e?1+e.children_count:1}var ds=0;function ql(e,t,r,n,i){return new $e(ds,e,t,r,n,i)}var _s=1;function ms(e,t,r,n,i,s,o,u,l){return new Me(_s,e,t,r,n,Ki(i),s,o,u,l||Rc(n,r))}var hs=2;function $s(e,t,r){return new st(hs,e,t,r)}var xs=3;function Nl(e,t,r,n,i,s){return new Ie(xs,e,t,r,n,Ki(i),s)}function Ml(e,t,r,n,i){for(;;){let s=e,o=t,u=r,l=n,c=i;if(o.hasLength(0))return[R(l),c];if(o.atLeastLength(1)&&o.head instanceof $e&&o.head.key===""){let d=o.head,p=o.tail,$=s+"::"+J(u),b=Ml($,d.children,0,C,Te()),w=b[0],O=b[1],h,j=d;h=new $e(j.kind,j.key,j.mapper,w,O,j.children_count);let S=_(h,l),E=u+1;e=s,t=p,r=E,n=S,i=c}else if(o.atLeastLength(1)&&o.head.key!==""){let d=o.head,p=o.tail,$=s+"::"+d.key,b=ws($,d),w=_(b,l),O=dn(c,$,b),h=u+1;e=s,t=p,r=h,n=w,i=O}else{let d=o.head,p=o.tail,$=_(d,l),b=u+1;e=s,t=p,r=b,n=$,i=c}}}function ws(e,t){if(t instanceof Me){let r=t;return new Me(r.kind,e,r.mapper,r.namespace,r.tag,r.attributes,r.children,r.keyed_children,r.self_closing,r.void)}else if(t instanceof st){let r=t;return new st(r.kind,e,r.mapper,r.content)}else if(t instanceof Ie){let r=t;return new Ie(r.kind,e,r.mapper,r.namespace,r.tag,r.attributes,r.inner_html)}else{let r=t.children,n=Ml(e,r,0,C,Te()),i=n[0],s=n[1],o=t;return new $e(o.kind,e,o.mapper,i,s,o.children_count)}}var Yt=class extends f{constructor(t,r,n,i){super(),this.index=t,this.removed=r,this.changes=n,this.children=i}},ys=class extends f{constructor(t,r){super(),this.kind=t,this.content=r}},bs=class extends f{constructor(t,r){super(),this.kind=t,this.inner_html=r}},gs=class extends f{constructor(t,r,n){super(),this.kind=t,this.added=r,this.removed=n}},ks=class extends f{constructor(t,r,n,i){super(),this.kind=t,this.key=r,this.before=n,this.count=i}},vs=class extends f{constructor(t,r,n){super(),this.kind=t,this.key=r,this.count=n}},js=class extends f{constructor(t,r,n,i){super(),this.kind=t,this.from=r,this.count=n,this.with=i}},Ls=class extends f{constructor(t,r,n){super(),this.kind=t,this.children=r,this.before=n}},Os=class extends f{constructor(t,r,n){super(),this.kind=t,this.from=r,this.count=n}};function Ss(e,t,r,n){return new Yt(e,t,r,n)}var Es=0;function Il(e){return new ys(Es,e)}var As=1;function Pl(e){return new bs(As,e)}var Ts=2;function zs(e,t){return new gs(Ts,e,t)}var Qn=3;function Dl(e,t,r){return new ks(Qn,e,t,r)}var Cs=4;function Wl(e,t){return new vs(Cs,e,t)}var ei=5;function Bs(e,t,r){return new js(ei,e,t,r)}var ti=6;function qs(e,t){return new Ls(ti,e,t)}var ri=7;function Ul(e,t){return new Os(ri,e,t)}var oi=class extends f{constructor(t,r){super(),this.patch=t,this.events=r}},Ns=class extends f{constructor(t,r,n){super(),this.added=t,this.removed=r,this.events=n}};function Hc(e,t,r,n){return r==="input"&&t===""?ii(e,n):r==="select"&&t===""?ii(e,n):r==="textarea"&&t===""?ii(e,n):!1}function Rl(e,t,r,n,i,s,o,u){for(;;){let l=e,c=t,d=r,p=n,$=i,b=s,w=o,O=u;if($.hasLength(0)&&b.hasLength(0))return new Ns(w,O,p);if($.atLeastLength(1)&&$.head instanceof Q&&b.hasLength(0)){let h=$.head,j=$.head.name,g=$.tail,S=_(h,O),E=ni(p,c,j);e=l,t=c,r=d,n=E,i=g,s=b,o=w,u=S}else if($.atLeastLength(1)&&b.hasLength(0)){let h=$.head,j=$.tail,g=_(h,O);e=l,t=c,r=d,n=p,i=j,s=b,o=w,u=g}else if($.hasLength(0)&&b.atLeastLength(1)&&b.head instanceof Q){let h=b.head,j=b.head.name,g=b.head.handler,S=b.tail,E=_(h,w),x=mn(p,d,c,j,g);e=l,t=c,r=d,n=x,i=$,s=S,o=E,u=O}else if($.hasLength(0)&&b.atLeastLength(1)){let h=b.head,j=b.tail,g=_(h,w);e=l,t=c,r=d,n=p,i=$,s=j,o=g,u=O}else{let h=$.head,j=$.tail,g=b.head,S=b.tail,E=Jn(h,g);if(h instanceof Ne&&E instanceof K&&g instanceof Ne){let x,A=g.name;A==="value"||A==="checked"||A==="selected"?x=l||h.value!==g.value:x=h.value!==g.value;let z=x,N;z?N=_(g,w):N=w;let U=N;e=l,t=c,r=d,n=p,i=j,s=S,o=U,u=O}else if(h instanceof mr&&E instanceof K&&g instanceof mr){let x,A=g.name;A==="scrollLeft"||A==="scrollRight"?x=!0:A==="value"?x=l||!D(h.value,g.value):A==="checked"?x=l||!D(h.value,g.value):A==="selected"?x=l||!D(h.value,g.value):x=!D(h.value,g.value);let z=x,N;z?N=_(g,w):N=w;let U=N;e=l,t=c,r=d,n=p,i=j,s=S,o=U,u=O}else if(h instanceof Q&&E instanceof K&&g instanceof Q){let x=g.name,A=g.handler,z=h.prevent_default!==g.prevent_default||h.stop_propagation!==g.stop_propagation||h.immediate!==g.immediate||!Ol(h.limit,g.limit),N;z?N=_(g,w):N=w;let U=N,Y=mn(p,d,c,x,A);e=l,t=c,r=d,n=Y,i=j,s=S,o=U,u=O}else if(h instanceof Q&&E instanceof K){let x=h.name,A=_(g,w),z=_(h,O),N=ni(p,c,x);e=l,t=c,r=d,n=N,i=j,s=S,o=A,u=z}else if(E instanceof K&&g instanceof Q){let x=g.name,A=g.handler,z=_(g,w),N=_(h,O),U=mn(p,d,c,x,A);e=l,t=c,r=d,n=U,i=j,s=S,o=z,u=N}else if(E instanceof K){let x=_(g,w),A=_(h,O);e=l,t=c,r=d,n=p,i=j,s=S,o=x,u=A}else if(E instanceof ae&&g instanceof Q){let x=g.name,A=g.handler,z=_(g,w),N=mn(p,d,c,x,A);e=l,t=c,r=d,n=N,i=$,s=S,o=z,u=O}else if(E instanceof ae){let x=_(g,w);e=l,t=c,r=d,n=p,i=$,s=S,o=x,u=O}else if(h instanceof Q&&E instanceof re){let x=h.name,A=_(h,O),z=ni(p,c,x);e=l,t=c,r=d,n=z,i=j,s=b,o=w,u=A}else{let x=_(h,O);e=l,t=c,r=d,n=p,i=j,s=b,o=w,u=x}}}}function Ms(e,t,r,n,i,s,o,u,l,c,d,p,$,b){for(;;){let w=e,O=t,h=r,j=n,g=i,S=s,E=o,x=u,A=l,z=c,N=d,U=p,Y=$,pe=b;if(w.hasLength(0)&&h.hasLength(0))return new oi(new Yt(A,E,N,U),pe);if(w.atLeastLength(1)&&h.hasLength(0)){let M=w.head,ee=w.tail,T;M.key===""||!Yi(g,M.key)?T=E+ze(M):T=E;let te=T,oe=hn(pe,z,x,M);e=ee,t=O,r=h,n=j,i=g,s=S,o=te,u=x,l=A,c=z,d=N,p=U,$=Y,b=oe}else if(w.hasLength(0)&&h.atLeastLength(1)){let M=Hl(pe,Y,z,x,h),ee=qs(h,x-S),T=_(ee,N);return new oi(new Yt(A,E,T,U),M)}else if(w.atLeastLength(1)&&h.atLeastLength(1)&&w.head.key!==h.head.key){let M=w.head,ee=w.tail,T=h.head,de=h.tail,te=$r(O,T.key),oe=$r(j,M.key),Oe=Yi(g,M.key);if(oe.isOk()&&te.isOk()&&Oe)e=ee,t=O,r=h,n=j,i=g,s=S-ze(M),o=E,u=x,l=A,c=z,d=N,p=U,$=Y,b=pe;else if(oe.isOk()&&te.isOk()){let X=te[0],F=ze(T),ne=x-S,le=Dl(T.key,ne,F),_e=_(le,N),Ue=xl(g,T.key),Ye=S+F;e=_(X,w),t=O,r=h,n=j,i=Ue,s=Ye,o=E,u=x,l=A,c=z,d=_e,p=U,$=Y,b=pe}else if(!oe.isOk()&&te.isOk()){let X=ze(M),F=S-X,ne=hn(pe,z,x,M),le=Wl(M.key,X),_e=_(le,N);e=ee,t=O,r=h,n=j,i=g,s=F,o=E,u=x,l=A,c=z,d=_e,p=U,$=Y,b=ne}else if(oe.isOk()&&!te.isOk()){let X=x-S,F=ze(T),ne=si(pe,Y,z,x,T),le=qs(a([T]),X),_e=_(le,N);e=w,t=O,r=de,n=j,i=g,s=S+F,o=E,u=x+F,l=A,c=z,d=_e,p=U,$=Y,b=ne}else{let X=ze(M),F=ze(T),ne=Bs(x-S,X,T),le,Ue=hn(pe,z,x,M);le=si(Ue,Y,z,x,T);let Ye=le;e=ee,t=O,r=de,n=j,i=g,s=S-X+F,o=E,u=x+F,l=A,c=z,d=_(ne,N),p=U,$=Y,b=Ye}}else if(w.atLeastLength(1)&&w.head instanceof $e&&h.atLeastLength(1)&&h.head instanceof $e){let M=w.head,ee=w.tail,T=h.head,de=h.tail,te=x+1,oe=M.children_count,Oe=T.children_count,X=Ct(Y,T.mapper),F=Ms(M.children,M.keyed_children,T.children,T.keyed_children,on(),S,0,te,-1,z,C,U,X,pe),ne;if(F.patch.removed>0){let Ue=te+Oe-S,Ye=Ul(Ue,F.patch.removed);ne=ie(F.patch.changes,_(Ye,N))}else ne=ie(F.patch.changes,N);let _e=ne;e=ee,t=O,r=de,n=j,i=g,s=S+Oe-oe,o=E,u=te+Oe,l=A,c=z,d=_e,p=F.patch.children,$=Y,b=F.events}else if(w.atLeastLength(1)&&w.head instanceof Me&&h.atLeastLength(1)&&h.head instanceof Me&&w.head.namespace===h.head.namespace&&w.head.tag===h.head.tag){let M=w.head,ee=w.tail,T=h.head,de=h.tail,te=Ct(Y,T.mapper),oe=zt(z,x,T.key),Oe=Hc(pe,T.namespace,T.tag,oe),X=Rl(Oe,oe,te,pe,M.attributes,T.attributes,C,C),F=X.added,ne=X.removed,le=X.events,_e;F.hasLength(0)&&ne.hasLength(0)?_e=C:_e=a([zs(F,ne)]);let Ue=_e,Ye=Ms(M.children,M.keyed_children,T.children,T.keyed_children,on(),0,0,0,x,oe,Ue,C,te,le),lr,vt=Ye.patch;vt instanceof Yt&&vt.removed===0&&vt.changes.hasLength(0)&&vt.children.hasLength(0)?lr=U:lr=_(Ye.patch,U);let ki=lr;e=ee,t=O,r=de,n=j,i=g,s=S,o=E,u=x+1,l=A,c=z,d=N,p=ki,$=Y,b=Ye.events}else if(w.atLeastLength(1)&&w.head instanceof st&&h.atLeastLength(1)&&h.head instanceof st&&w.head.content===h.head.content){let M=w.head,ee=w.tail,T=h.head,de=h.tail;e=ee,t=O,r=de,n=j,i=g,s=S,o=E,u=x+1,l=A,c=z,d=N,p=U,$=Y,b=pe}else if(w.atLeastLength(1)&&w.head instanceof st&&h.atLeastLength(1)&&h.head instanceof st){let M=w.tail,ee=h.head,T=h.tail,de=Ss(x,0,a([Il(ee.content)]),C);e=M,t=O,r=T,n=j,i=g,s=S,o=E,u=x+1,l=A,c=z,d=N,p=_(de,U),$=Y,b=pe}else if(w.atLeastLength(1)&&w.head instanceof Ie&&h.atLeastLength(1)&&h.head instanceof Ie){let M=w.head,ee=w.tail,T=h.head,de=h.tail,te=Ct(Y,T.mapper),oe=zt(z,x,T.key),Oe=Rl(!1,oe,te,pe,M.attributes,T.attributes,C,C),X=Oe.added,F=Oe.removed,ne=Oe.events,le;X.hasLength(0)&&F.hasLength(0)?le=C:le=a([zs(X,F)]);let _e=le,Ue;M.inner_html===T.inner_html?Ue=_e:Ue=_(Pl(T.inner_html),_e);let lr=Ue,vt;lr.hasLength(0)?vt=U:vt=_(Ss(x,0,lr,a([])),U);let ki=vt;e=ee,t=O,r=de,n=j,i=g,s=S,o=E,u=x+1,l=A,c=z,d=N,p=ki,$=Y,b=ne}else{let M=w.head,ee=w.tail,T=h.head,de=h.tail,te=ze(M),oe=ze(T),Oe=Bs(x-S,te,T),X,ne=hn(pe,z,x,M);X=si(ne,Y,z,x,T);let le=X;e=ee,t=O,r=de,n=j,i=g,s=S-te+oe,o=E,u=x+oe,l=A,c=z,d=_(Oe,N),p=U,$=Y,b=le}}}function Is(e,t,r){return Ms(a([t]),Te(),a([r]),Te(),on(),0,0,0,0,us,C,C,he,Gl(e))}var ui=class{offset=0;#e=null;#s=()=>{};#u=!1;constructor(t,r,{useServerEvents:n=!1}={}){this.#e=t,this.#s=r,this.#u=n}mount(t){li(this.#e,this.#l(t))}#r=[];push(t){let r=this.offset;r&&(_t(t.changes,n=>{switch(n.kind){case ti:case Qn:n.before=(n.before|0)+r;break;case ri:case ei:n.from=(n.from|0)+r;break}}),_t(t.children,n=>{n.index=(n.index|0)+r})),this.#r.push({node:this.#e,patch:t}),this.#o()}#o(){let t=this;for(;t.#r.length;){let{node:r,patch:n}=t.#r.pop();_t(n.changes,i=>{switch(i.kind){case ti:t.#a(r,i.children,i.before);break;case Qn:t.#p(r,i.key,i.before,i.count);break;case Cs:t.#d(r,i.key,i.count);break;case ri:t.#t(r,i.from,i.count);break;case ei:t.#c(r,i.from,i.count,i.with);break;case Es:t.#i(r,i.content);break;case As:t.#_(r,i.inner_html);break;case Ts:t.#f(r,i.added,i.removed);break}}),n.removed&&t.#t(r,r.childNodes.length-n.removed,n.removed),_t(n.children,i=>{t.#r.push({node:xn(r,i.index),patch:i})})}}#a(t,r,n){let i=Yl();_t(r,s=>{let o=this.#l(s);Ds(t,o),li(i,o)}),Ps(t,i,xn(t,n))}#p(t,r,n,i){let s=Xl(t,r),o=xn(t,n);for(let u=0;u<i&&s!==null;++u){let l=s.nextSibling;wl?t.moveBefore(s,o):Ps(t,s,o),s=l}}#d(t,r,n){this.#n(t,Xl(t,r),n)}#t(t,r,n){this.#n(t,xn(t,r),n)}#n(t,r,n){for(;n-- >0&&r!==null;){let i=r.nextSibling,s=r[se].key;s&&t[se].keyedChildren.delete(s);for(let[o,{timeout:u}]of r[se].debouncers)clearTimeout(u);t.removeChild(r),r=i}}#c(t,r,n,i){this.#t(t,r,n);let s=this.#l(i);Ds(t,s),Ps(t,s,xn(t,r))}#i(t,r){t.data=r??""}#_(t,r){t.innerHTML=r??""}#f(t,r,n){_t(n,i=>{let s=i.name;t[se].handlers.has(s)?(t.removeEventListener(s,Kl),t[se].handlers.delete(s),t[se].throttles.has(s)&&t[se].throttles.delete(s),t[se].debouncers.has(s)&&(clearTimeout(t[se].debouncers.get(s).timeout),t[se].debouncers.delete(s))):(t.removeAttribute(s),Ql[s]?.removed?.(t,s))}),_t(r,i=>{this.#h(t,i)})}#l(t){switch(t.kind){case _s:{let r=Vl(t);return this.#m(r,t),this.#a(r,t.children,0),r}case hs:{let r=Jl(t.content);return mt(r,t.key),r}case ds:{let r=Yl(),n=Jl();return mt(n,t.key),li(r,n),_t(t.children,i=>{li(r,this.#l(i))}),r}case xs:{let r=Vl(t);return this.#m(r,t),this.#_(r,t.inner_html),r}}}#m(t,{attributes:r}){_t(r,n=>this.#h(t,n))}#h(t,r){let n=t[se];switch(r.kind){case Zi:{let i=r.name,s=r.value??"";s!==t.getAttribute(i)&&t.setAttribute(i,s),Ql[i]?.added?.(t,s);break}case Qi:t[r.name]=r.value;break;case es:{n.handlers.has(r.name)||t.addEventListener(r.name,Kl,{passive:!r.prevent_default});let i=r.prevent_default,s=r.stop_propagation,o=r.immediate,u=Array.isArray(r.include)?r.include:[];if(r.limit?.kind===rs){let l=n.throttles.get(r.name)??{last:0,delay:r.limit.delay};n.throttles.set(r.name,l)}if(r.limit?.kind===ts){let l=n.debouncers.get(r.name)??{timeout:null,delay:r.limit.delay};n.debouncers.set(r.name,l)}n.handlers.set(r.name,l=>{i&&l.preventDefault(),s&&l.stopPropagation();let c=l.type,d="",p=l.currentTarget;for(;p!==this.#e;){let b=p[se].key,w=p.parentNode;if(b)d=`${cs}${b}${d}`;else{let O=w.childNodes,h=[].indexOf.call(O,p);w===this.#e&&(h-=this.offset),d=`${as}${h}${d}`}p=w}d=d.slice(1);let $=this.#u?Vc(l,u):l;if(n.throttles.has(c)){let b=n.throttles.get(c),w=Date.now(),O=b.last||0;w>O+b.delay?(b.last=w,this.#s($,d,c,o)):l.preventDefault()}else if(n.debouncers.has(c)){let b=n.debouncers.get(c);clearTimeout(b.timeout),b.timeout=setTimeout(()=>{this.#s($,d,c,o)},b.delay)}else this.#s($,d,c,o)});break}}}},_t=(e,t)=>{if(Array.isArray(e))for(let r=0;r<e.length;r++)t(e[r]);else if(e)for(e;e.tail;e=e.tail)t(e.head)},li=(e,t)=>e.appendChild(t),Ps=(e,t,r)=>e.insertBefore(t,r??null),Vl=({key:e,tag:t,namespace:r})=>{let n=Re.createElementNS(r||Rn,t);return mt(n,e),n},Jl=e=>Re.createTextNode(e??""),Yl=()=>Re.createDocumentFragment(),xn=(e,t)=>e.childNodes[t|0],se=Symbol("lustre"),mt=(e,t="")=>{switch(e.nodeType){case Gn:case ln:e[se]={key:t,keyedChildren:new Map,handlers:new Map,throttles:new Map,debouncers:new Map};break;case Hn:e[se]={key:t,debouncers:new Map};break}};var Ds=(e,t)=>{if(t.nodeType===ln){for(t=t.firstChild;t;t=t.nextSibling)Ds(e,t);return}let r=t[se].key;r&&e[se].keyedChildren.set(r,new WeakRef(t))},Xl=(e,t)=>e[se].keyedChildren.get(t).deref(),Kl=e=>{let r=e.currentTarget[se].handlers.get(e.type);e.type==="submit"&&(e.detail??={},e.detail.formData=[...new FormData(e.target).entries()]),r(e)},Vc=(e,t=[])=>{let r={};(e.type==="input"||e.type==="change")&&t.push("target.value"),e.type==="submit"&&t.push("detail.formData");for(let n of t){let i=n.split(".");for(let s=0,o=e,u=r;s<i.length;s++){if(s===i.length-1){u[i[s]]=o[i[s]];break}u=u[i[s]]??={},o=o[i[s]]}}return r},Zl=e=>({added(t){t[e]=!0},removed(t){t[e]=!1}}),Jc=e=>({added(t,r){t[e]=r}}),Ql={checked:Zl("checked"),selected:Zl("selected"),value:Jc("value"),autofocus:{added(e){queueMicrotask(()=>e.focus?.())}},autoplay:{added(e){try{e.play?.()}catch(t){console.error(t)}}}};var ru=e=>{let t=nu(e);if(t===null||t.children instanceof Fe){let r=eu();return mt(r),e.appendChild(r),xe()}else{if(t.children instanceof Se&&t.children.tail instanceof Fe)return t.children.head;{let r=eu();return mt(r),e.insertBefore(r,e.firstChild),Us(t.children)}}},eu=()=>Re.createTextNode(""),nu=e=>{switch(e.nodeType){case Gn:{let t=e.getAttribute("data-lustre-key");mt(e,t),t&&e.removeAttribute("data-lustre-key");let r=e.localName,n=e.namespaceURI,i=!n||n===Rn;i&&Yc.includes(r)&&Xc(r,e);let s=Kc(e),o=tu(e),u=i?Ge(r,s,o):Ws(n,r,s,o);return t?ws(t,u):u}case Hn:return mt(e),ai(e.data);case ln:return mt(e),e.childNodes.length>0?Us(tu(e)):null;default:return null}},Yc=["input","select","textarea"],Xc=(e,t)=>{let r=t.value,n=t.checked;e==="input"&&t.type==="checkbox"&&!n||e==="input"&&t.type==="radio"&&!n||t.type!=="checkbox"&&t.type!=="radio"&&!r||queueMicrotask(()=>{t.value=r,t.checked=n,t.dispatchEvent(new Event("input",{bubbles:!0})),t.dispatchEvent(new Event("change",{bubbles:!0})),Re.activeElement!==t&&t.dispatchEvent(new Event("blur",{bubbles:!0}))})},tu=e=>{let t=C,r=e.lastChild;for(;r;){let n=nu(r),i=r.previousSibling;n?t=new Se(n,t):e.removeChild(r),r=i}return t},Kc=e=>{let t=e.attributes.length,r=C;for(;t-- >0;)r=new Se(Zc(e.attributes[t]),r);return r},Zc=e=>{let t=e.localName,r=e.value;return At(t,r)};var yn=()=>!!Re;var Fs=(e,t)=>e===t;var wn=class{constructor(t,[r,n],i,s){this.root=t,this.#e=r,this.#s=i,this.#u=s,this.#a=new ui(this.root,(o,u,l)=>{let[c,d]=ci(this.#o,u,l,o);this.#o=c,d.isOk()&&this.dispatch(d[0],!1)}),this.#r=ru(this.root),this.#o=Rs(),this.#i=!0,this.#f(n)}root=null;set offset(t){this.#a.offset=t}dispatch(t,r=!1){if(this.#i||=r,this.#p)this.#d.push(t);else{let[n,i]=this.#u(this.#e,t);this.#e=n,this.#f(i)}}emit(t,r){(this.root.host??this.root).dispatchEvent(new CustomEvent(t,{detail:r,bubbles:!0,composed:!0}))}#e;#s;#u;#r;#o;#a;#p=!1;#d=[];#t=C;#n=C;#c=null;#i=!1;#_={dispatch:(t,r)=>this.dispatch(t,r),emit:(t,r)=>this.emit(t,r),select:()=>{},root:()=>this.root};#f(t){for(this.#p=!0;;){for(let r=t.synchronous;r.tail;r=r.tail)r.head(this.#_);if(this.#t=su(this.#t,t.before_paint),this.#n=su(this.#n,t.after_paint),!this.#d.length)break;[this.#e,t]=this.#u(this.#e,this.#d.shift())}this.#p=!1,this.#i?(cancelAnimationFrame(this.#c),this.#l()):this.#c||(this.#c=requestAnimationFrame(()=>{this.#l()}))}#l(){this.#i=!1,this.#c=null;let t=this.#s(this.#e),{patch:r,events:n}=Is(this.#o,this.#r,t);if(this.#o=n,this.#r=t,this.#a.push(r),this.#t instanceof Se){let i=iu(this.#t);this.#t=C,queueMicrotask(()=>{this.#i=!0,this.#f(i)})}if(this.#n instanceof Se){let i=iu(this.#n);this.#n=C,requestAnimationFrame(()=>{this.#i=!0,this.#f(i)})}}};function iu(e){return{synchronous:e,after_paint:C,before_paint:C}}function su(e,t){return e instanceof Fe?t:t instanceof Fe?e:ie(e,t)}var ot=class extends f{constructor(t,r,n){super(),this.handlers=t,this.dispatched_paths=r,this.next_dispatched_paths=n}};function Rs(){return new ot(Te(),C,C)}function Gl(e){return new ot(e.handlers,e.next_dispatched_paths,C)}function au(e,t,r){return os(e,ps(t,r))}function ni(e,t,r){let n=au(e.handlers,t,r),i=e;return new ot(n,i.dispatched_paths,i.next_dispatched_paths)}function ou(e,t,r){return be(r,e,(n,i)=>{if(i instanceof Q){let s=i.name;return au(n,t,s)}else return n})}function ci(e,t,r,n){let i=_(t,e.next_dispatched_paths),s,o=e;s=new ot(o.handlers,o.dispatched_paths,i);let u=s,l=$r(u.handlers,t+fs+r);if(l.isOk()){let c=l[0];return[u,Ot(n,c)]}else return[u,new v(a([]))]}function ii(e,t){return Cl(t,e.dispatched_paths)}function cu(e,t,r,n,i){return dn(e,ps(r,n),_r(i,t))}function mn(e,t,r,n,i){let s=cu(e.handlers,t,r,n,i),o=e;return new ot(s,o.dispatched_paths,o.next_dispatched_paths)}function lu(e,t,r,n){return be(n,e,(i,s)=>{if(s instanceof Q){let o=s.name,u=s.handler;return cu(i,t,r,o,u)}else return i})}function Ct(e,t){let r=Fs(e,he),n=Fs(t,he);return n?e:r&&!n?t:i=>e(t(i))}function uu(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(u.hasLength(0))return i;{let l=u.head,c=u.tail;e=fu(i,s,o,l),t=s,r=o+ze(l),n=c}}}function fu(e,t,r,n){if(n instanceof Me){let i=n.attributes,s=n.children,o=zt(t,r,n.key),l=ou(e,o,i);return uu(l,o,0,s)}else if(n instanceof $e){let i=n.children;return uu(e,t,r+1,i)}else if(n instanceof Ie){let i=n.attributes,s=zt(t,r,n.key);return ou(e,s,i)}else return e}function hn(e,t,r,n){let i=fu(e.handlers,t,r,n),s=e;return new ot(i,s.dispatched_paths,s.next_dispatched_paths)}function Gs(e,t,r,n,i){for(;;){let s=e,o=t,u=r,l=n,c=i;if(c.hasLength(0))return s;{let d=c.head,p=c.tail;e=pu(s,o,u,l,d),t=o,r=u,n=l+ze(d),i=p}}}function pu(e,t,r,n,i){if(i instanceof Me){let s=i.attributes,o=i.children,u=zt(r,n,i.key),l=Ct(t,i.mapper),d=lu(e,l,u,s);return Gs(d,l,u,0,o)}else if(i instanceof $e){let s=i.children,o=Ct(t,i.mapper),u=n+1;return Gs(e,o,r,u,s)}else if(i instanceof Ie){let s=i.attributes,o=zt(r,n,i.key),u=Ct(t,i.mapper);return lu(e,u,o,s)}else return e}function si(e,t,r,n,i){let s=pu(e.handlers,t,r,n,i),o=e;return new ot(s,o.dispatched_paths,o.next_dispatched_paths)}function Hl(e,t,r,n,i){let s=Gs(e.handlers,t,r,n,i),o=e;return new ot(s,o.dispatched_paths,o.next_dispatched_paths)}function Ge(e,t,r){return ms("",he,"",e,t,r,Te(),!1,!1)}function Ws(e,t,r,n){return ms("",he,e,t,r,n,Te(),!1,!1)}function ai(e){return $s("",he,e)}function xe(){return $s("",he,"")}function Qc(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;if(r.atLeastLength(1)&&r.head instanceof $e){let i=r.head.children_count;e=r.tail,t=n+i}else e=r.tail,t=n+1}}function Us(e){return ql("",he,e,Te(),Qc(e,0))}function Hs(e,t,r,n){return Nl("",he,e,t,r,n)}function B(e){return ai(e)}function I(e,t){return Ge("div",e,t)}function Bt(e,t){return Ge("p",e,t)}function Vs(e,t){return Ge("i",e,t)}function bn(e,t){return Ge("span",e,t)}function _u(e,t){return Ge("button",e,t)}function mu(e){return Ge("input",e,C)}function Js(e,t){return Ge("label",e,t)}var Xt=class extends f{constructor(t){super(),this.message=t}},xr=class extends f{constructor(t,r){super(),this.name=t,this.data=r}};var Kt=class extends f{};var Ys=class extends f{constructor(t,r,n,i,s,o,u,l){super(),this.open_shadow_root=t,this.adopt_styles=r,this.attributes=n,this.properties=i,this.is_form_associated=s,this.on_form_autofill=o,this.on_form_reset=u,this.on_form_restore=l}};function $u(e){let t=new Ys(!1,!0,Fn(),Fn(),!1,Vn,Vn,Vn);return be(e,t,(r,n)=>n.apply(r))}var Xs=class e{static start({init:t,update:r,view:n},i,s){if(!yn())return new v(new wr);let o=i instanceof HTMLElement?i:Re.querySelector(i);return o?new k(new e(o,t(s),r,n)):new v(new pi(i))}#e;constructor(t,[r,n],i,s){this.#e=new wn(t,[r,n],s,i)}send(t){switch(t.constructor){case Xt:{this.dispatch(t.message,!1);break}case xr:{this.emit(t.name,t.data);break}case Kt:break}}dispatch(t,r){this.#e.dispatch(t,r)}emit(t,r){this.#e.emit(t,r)}},xu=Xs.start;var Ks=class extends f{constructor(t,r,n,i){super(),this.init=t,this.update=r,this.view=n,this.config=i}};var pi=class extends f{constructor(t){super(),this.selector=t}},wr=class extends f{};function wu(e,t,r){return new Ks(e,t,r,$u(C))}function yu(e,t,r){return Ri(!yn(),new v(new wr),()=>xu(e,t,r))}var q=class extends f{constructor(t,r,n,i,s,o,u){super(),this.scheme=t,this.userinfo=r,this.host=n,this.port=i,this.path=s,this.query=o,this.fragment=u}};function af(e){return 48>=e&&e<=57||65>=e&&e<=90||97>=e&&e<=122||e===58||e===46}function ut(e,t){return new k((()=>{let r=t;return new q(r.scheme,r.userinfo,r.host,r.port,r.path,r.query,new y(e))})())}function cf(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(s.startsWith("#")&&u===0){let l=s.slice(1);return ut(l,o)}else if(s.startsWith("#")){let l=s.slice(1),c=ue(i,0,u),d,p=o;return d=new q(p.scheme,p.userinfo,p.host,p.port,p.path,new y(c),p.fragment),ut(l,d)}else{if(s==="")return new k((()=>{let l=o;return new q(l.scheme,l.userinfo,l.host,l.port,l.path,new y(i),l.fragment)})());{let c=Dt(s)[1];e=i,t=c,r=o,n=u+1}}}}function qt(e,t){return cf(e,e,t,0)}function ff(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(s.startsWith("?")){let l=s.slice(1),c=ue(i,0,u),d,p=o;return d=new q(p.scheme,p.userinfo,p.host,p.port,c,p.query,p.fragment),qt(l,d)}else if(s.startsWith("#")){let l=s.slice(1),c=ue(i,0,u),d,p=o;return d=new q(p.scheme,p.userinfo,p.host,p.port,c,p.query,p.fragment),ut(l,d)}else{if(s==="")return new k((()=>{let l=o;return new q(l.scheme,l.userinfo,l.host,l.port,i,l.query,l.fragment)})());{let c=Dt(s)[1];e=i,t=c,r=o,n=u+1}}}}function br(e,t){return ff(e,e,t,0)}function lt(e,t,r){for(;;){let n=e,i=t,s=r;if(n.startsWith("0"))e=n.slice(1),t=i,r=s*10;else if(n.startsWith("1"))e=n.slice(1),t=i,r=s*10+1;else if(n.startsWith("2"))e=n.slice(1),t=i,r=s*10+2;else if(n.startsWith("3"))e=n.slice(1),t=i,r=s*10+3;else if(n.startsWith("4"))e=n.slice(1),t=i,r=s*10+4;else if(n.startsWith("5"))e=n.slice(1),t=i,r=s*10+5;else if(n.startsWith("6"))e=n.slice(1),t=i,r=s*10+6;else if(n.startsWith("7"))e=n.slice(1),t=i,r=s*10+7;else if(n.startsWith("8"))e=n.slice(1),t=i,r=s*10+8;else if(n.startsWith("9"))e=n.slice(1),t=i,r=s*10+9;else if(n.startsWith("?")){let o=n.slice(1),u,l=i;return u=new q(l.scheme,l.userinfo,l.host,new y(s),l.path,l.query,l.fragment),qt(o,u)}else if(n.startsWith("#")){let o=n.slice(1),u,l=i;return u=new q(l.scheme,l.userinfo,l.host,new y(s),l.path,l.query,l.fragment),ut(o,u)}else if(n.startsWith("/")){let o,u=i;return o=new q(u.scheme,u.userinfo,u.host,new y(s),u.path,u.query,u.fragment),br(n,o)}else return n===""?new k((()=>{let o=i;return new q(o.scheme,o.userinfo,o.host,new y(s),o.path,o.query,o.fragment)})()):new v(void 0)}}function di(e,t){if(e.startsWith(":0")){let r=e.slice(2);return lt(r,t,0)}else if(e.startsWith(":1")){let r=e.slice(2);return lt(r,t,1)}else if(e.startsWith(":2")){let r=e.slice(2);return lt(r,t,2)}else if(e.startsWith(":3")){let r=e.slice(2);return lt(r,t,3)}else if(e.startsWith(":4")){let r=e.slice(2);return lt(r,t,4)}else if(e.startsWith(":5")){let r=e.slice(2);return lt(r,t,5)}else if(e.startsWith(":6")){let r=e.slice(2);return lt(r,t,6)}else if(e.startsWith(":7")){let r=e.slice(2);return lt(r,t,7)}else if(e.startsWith(":8")){let r=e.slice(2);return lt(r,t,8)}else if(e.startsWith(":9")){let r=e.slice(2);return lt(r,t,9)}else{if(e.startsWith(":"))return new v(void 0);if(e.startsWith("?")){let r=e.slice(1);return qt(r,t)}else if(e.startsWith("#")){let r=e.slice(1);return ut(r,t)}else return e.startsWith("/")?br(e,t):e===""?new k(t):new v(void 0)}}function gu(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(s==="")return new k((()=>{let l=o;return new q(l.scheme,l.userinfo,new y(i),l.port,l.path,l.query,l.fragment)})());if(s.startsWith(":")){let l=ue(i,0,u),c,d=o;return c=new q(d.scheme,d.userinfo,new y(l),d.port,d.path,d.query,d.fragment),di(s,c)}else if(s.startsWith("/")){let l=ue(i,0,u),c,d=o;return c=new q(d.scheme,d.userinfo,new y(l),d.port,d.path,d.query,d.fragment),br(s,c)}else if(s.startsWith("?")){let l=s.slice(1),c=ue(i,0,u),d,p=o;return d=new q(p.scheme,p.userinfo,new y(c),p.port,p.path,p.query,p.fragment),qt(l,d)}else if(s.startsWith("#")){let l=s.slice(1),c=ue(i,0,u),d,p=o;return d=new q(p.scheme,p.userinfo,new y(c),p.port,p.path,p.query,p.fragment),ut(l,d)}else{let c=Dt(s)[1];e=i,t=c,r=o,n=u+1}}}function pf(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(s==="")return new k((()=>{let l=o;return new q(l.scheme,l.userinfo,new y(s),l.port,l.path,l.query,l.fragment)})());if(s.startsWith("]")&&u===0){let l=s.slice(1);return di(l,o)}else if(s.startsWith("]")){let l=s.slice(1),c=ue(i,0,u+1),d,p=o;return d=new q(p.scheme,p.userinfo,new y(c),p.port,p.path,p.query,p.fragment),di(l,d)}else{if(s.startsWith("/")&&u===0)return br(s,o);if(s.startsWith("/")){let l=ue(i,0,u),c,d=o;return c=new q(d.scheme,d.userinfo,new y(l),d.port,d.path,d.query,d.fragment),br(s,c)}else if(s.startsWith("?")&&u===0){let l=s.slice(1);return qt(l,o)}else if(s.startsWith("?")){let l=s.slice(1),c=ue(i,0,u),d,p=o;return d=new q(p.scheme,p.userinfo,new y(c),p.port,p.path,p.query,p.fragment),qt(l,d)}else if(s.startsWith("#")&&u===0){let l=s.slice(1);return ut(l,o)}else if(s.startsWith("#")){let l=s.slice(1),c=ue(i,0,u),d,p=o;return d=new q(p.scheme,p.userinfo,new y(c),p.port,p.path,p.query,p.fragment),ut(l,d)}else{let l=Dt(s),c=l[0],d=l[1];if(af(c))e=i,t=d,r=o,n=u+1;else return gu(i,i,o,0)}}}}function df(e,t){return pf(e,e,t,0)}function _f(e,t){return gu(e,e,t,0)}function yr(e,t){if(e.startsWith("["))return df(e,t);if(e.startsWith(":")){let r,n=t;return r=new q(n.scheme,n.userinfo,new y(""),n.port,n.path,n.query,n.fragment),di(e,r)}else return e===""?new k((()=>{let r=t;return new q(r.scheme,r.userinfo,new y(""),r.port,r.path,r.query,r.fragment)})()):_f(e,t)}function mf(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(s.startsWith("@")&&u===0){let l=s.slice(1);return yr(l,o)}else if(s.startsWith("@")){let l=s.slice(1),c=ue(i,0,u),d,p=o;return d=new q(p.scheme,new y(c),p.host,p.port,p.path,p.query,p.fragment),yr(l,d)}else{if(s==="")return yr(i,o);if(s.startsWith("/"))return yr(i,o);if(s.startsWith("?"))return yr(i,o);if(s.startsWith("#"))return yr(i,o);{let c=Dt(s)[1];e=i,t=c,r=o,n=u+1}}}}function hf(e,t){return mf(e,e,t,0)}function Zs(e,t){if(e==="//")return new k((()=>{let r=t;return new q(r.scheme,r.userinfo,new y(""),r.port,r.path,r.query,r.fragment)})());if(e.startsWith("//")){let r=e.slice(2);return hf(r,t)}else return br(e,t)}function $f(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(s.startsWith("/")&&u===0)return Zs(s,o);if(s.startsWith("/")){let l=ue(i,0,u),c,d=o;return c=new q(new y(ce(l)),d.userinfo,d.host,d.port,d.path,d.query,d.fragment),Zs(s,c)}else if(s.startsWith("?")&&u===0){let l=s.slice(1);return qt(l,o)}else if(s.startsWith("?")){let l=s.slice(1),c=ue(i,0,u),d,p=o;return d=new q(new y(ce(c)),p.userinfo,p.host,p.port,p.path,p.query,p.fragment),qt(l,d)}else if(s.startsWith("#")&&u===0){let l=s.slice(1);return ut(l,o)}else if(s.startsWith("#")){let l=s.slice(1),c=ue(i,0,u),d,p=o;return d=new q(new y(ce(c)),p.userinfo,p.host,p.port,p.path,p.query,p.fragment),ut(l,d)}else{if(s.startsWith(":")&&u===0)return new v(void 0);if(s.startsWith(":")){let l=s.slice(1),c=ue(i,0,u),d,p=o;return d=new q(new y(ce(c)),p.userinfo,p.host,p.port,p.path,p.query,p.fragment),Zs(l,d)}else{if(s==="")return new k((()=>{let l=o;return new q(l.scheme,l.userinfo,l.host,l.port,i,l.query,l.fragment)})());{let c=Dt(s)[1];e=i,t=c,r=o,n=u+1}}}}}function ku(e){let t,r=e.fragment;if(r instanceof y){let x=r[0];t=a(["#",x])}else t=a([]);let n=t,i,s=e.query;if(s instanceof y){let x=s[0];i=_("?",_(x,n))}else i=n;let o=i,u=_(e.path,o),l,c=e.host,d=Wt(e.path,"/");if(c instanceof y&&!d&&c[0]!==""){let x=c[0];l=_("/",u)}else l=u;let p=l,$,b=e.host,w=e.port;if(b instanceof y&&w instanceof y){let x=w[0];$=_(":",_(J(x),p))}else $=p;let O=$,h,j=e.scheme,g=e.userinfo,S=e.host;if(j instanceof y&&g instanceof y&&S instanceof y){let x=j[0],A=g[0],z=S[0];h=_(x,_("://",_(A,_("@",_(z,O)))))}else if(j instanceof y&&g instanceof L&&S instanceof y){let x=j[0],A=S[0];h=_(x,_("://",_(A,O)))}else if(j instanceof y&&g instanceof y&&S instanceof L){let x=j[0];h=_(x,_(":",O))}else if(j instanceof y&&g instanceof L&&S instanceof L){let x=j[0];h=_(x,_(":",O))}else if(j instanceof L&&g instanceof L&&S instanceof y){let x=S[0];h=_("//",_(x,O))}else h=O;return tn(h)}var xf=new q(new L,new L,new L,new L,"",new L,new L);function gn(e){return $f(e,e,xf,0)}var kn=class extends f{},vn=class extends f{},eo=class extends f{},to=class extends f{},ro=class extends f{},no=class extends f{},io=class extends f{},so=class extends f{},oo=class extends f{};var _i=class extends f{},jn=class extends f{};function vu(e){return e instanceof io?"CONNECT":e instanceof ro?"DELETE":e instanceof kn?"GET":e instanceof eo?"HEAD":e instanceof so?"OPTIONS":e instanceof oo?"PATCH":e instanceof vn?"POST":e instanceof to?"PUT":e instanceof no?"TRACE":e[0]}function ju(e){return e instanceof _i?"http":"https"}function Lu(e){let t=ce(e);return t==="http"?new k(new _i):t==="https"?new k(new jn):new v(void 0)}var gr=class extends f{constructor(t,r,n,i,s,o,u,l){super(),this.method=t,this.headers=r,this.body=n,this.scheme=i,this.host=s,this.port=o,this.path=u,this.query=l}};function Su(e){return new q(new y(ju(e.scheme)),new L,new y(e.host),e.port,e.path,e.query,new L)}function uo(e){return ft((()=>{let t=e.scheme,r=Ao(t,"");return Lu(r)})(),t=>ft((()=>{let r=e.host;return Bn(r,void 0)})(),r=>{let n=new gr(new kn,a([]),"",t,r,e.port,e.path,e.query);return new k(n)}))}function Eu(e,t,r){let n=Pi(e.headers,ce(t),r),i=e;return new gr(i.method,n,i.body,i.scheme,i.host,i.port,i.path,i.query)}function Au(e,t){let r=e.method,n=e.headers,i=e.scheme,s=e.host,o=e.port,u=e.path,l=e.query;return new gr(r,n,t,i,s,o,u,l)}function Tu(e,t){let r=e;return new gr(t,r.headers,r.body,r.scheme,r.host,r.port,r.path,r.query)}var mi=class extends f{constructor(t,r,n){super(),this.status=t,this.headers=r,this.body=n}};function ao(e,t){return Ii(e.headers,ce(t))}var kr=class e{constructor(t){this.promise=t}static wrap(t){return t instanceof Promise?new e(t):t}static unwrap(t){return t instanceof e?t.promise:t}};function hi(e){return Promise.resolve(kr.wrap(e))}function zu(e,t){return e.then(r=>t(kr.unwrap(r)))}function Ln(e,t){return e.then(r=>kr.wrap(t(kr.unwrap(r))))}function Cu(e,t){return Ln(e,n=>(t(n),n))}function $i(e,t){return zu(e,n=>{if(n.isOk()){let i=n[0];return t(i)}else{let i=n[0];return hi(new v(i))}})}async function qu(e){try{return new k(await fetch(e))}catch(t){return new v(new Lr(t.toString()))}}function Nu(e){return new mi(e.status,Ce.fromArray([...e.headers]),e)}function vf(e){let t=ku(Su(e)),r=vu(e.method).toUpperCase(),n={headers:jf(e.headers),method:r};return[t,n]}function Mu(e){let[t,r]=vf(e);return r.method!=="GET"&&r.method!=="HEAD"&&(r.body=e.body),new globalThis.Request(t,r)}function jf(e){let t=new globalThis.Headers;for(let[r,n]of e)t.append(r.toLowerCase(),n);return t}async function co(e){let t;try{t=await e.body.text()}catch{return new v(new Or)}return new k(e.withFields({body:t}))}var Lr=class extends f{constructor(t){super(),this[0]=t}},Or=class extends f{};function Iu(e){let r=Mu(e),n=qu(r);return $i(n,i=>hi(new k(Nu(i))))}var fo=e=>{if(!globalThis.location)return new v(void 0);let t=new URL(e,globalThis.location.href),r=Of(t);return new k(r)},Of=e=>{let t=r=>r?new y(r):new L;return new q(t(e.protocol?.slice(0,-1)),new L,t(e.hostname),t(e.port&&Number(e.port)),e.pathname,t(e.search?.slice(1)),t(e.hash?.slice(1)))};var Sr=class extends f{},Zt=class extends f{constructor(t){super(),this[0]=t}},On=class extends f{constructor(t){super(),this[0]=t}},Sn=class extends f{constructor(t){super(),this[0]=t}},En=class extends f{},An=class extends f{constructor(t){super(),this[0]=t}},po=class extends f{constructor(t){super(),this.run=t}};function Pu(e){return new po(t=>e(Rt(t,r=>{let n=r.status;if(n>=200&&n<300){let i=n;return new k(r)}else if(n>=400&&n<600){let i=n;return new v(new On(r))}else return new v(new An(r))})))}function Sf(e){return Pu(t=>e(Rt(t,r=>{let n=ao(r,"content-type");return n.isOk()&&n[0]==="application/json"?new k(r):n.isOk()&&n[0].startsWith("application/json;")?new k(r):new v(new An(r))})))}function Ef(e){return Pu(t=>e(Rt(t,r=>{let n=ao(r,"content-type");return n.isOk()&&n[0].startsWith("text/")?new k(r):new v(new An(r))})))}function Du(e){return Ef(t=>{let n=jt(t,i=>i.body);return e(n)})}function Af(e,t){return Tt(r=>{let n=Iu(e),i=$i(n,co),s=Ln(i,u=>Lt(u,l=>l instanceof Lr?new En:l instanceof Or?new Sr:new Sr)),o=Ln(s,t.run);Cu(o,r)})}function Wu(e,t){return Af(e,t)}function xi(e,t){return Tt(r=>{let n=new v(e),i=t.run(n);return r(i)})}function Tf(e,t){let r=e.body,n=_l(r,t);return Lt(n,i=>new Sn(i))}function Uu(e,t){return Sf(r=>{let i=ft(r,s=>Tf(s,e));return t(i)})}function Fu(e){let t;return e.startsWith("./")?t=fo(e):e.startsWith("/")?t=fo(e):t=gn(e),Ui(t,new Zt(e))}function Ru(e,t){let r=Fu(e);if(r.isOk()){let n=r[0],i=uo(n),s=jt(i,u=>Wu(u,t)),o=Lt(s,u=>xi(new Zt(e),t));return Wi(o)}else{let n=r[0];return xi(n,t)}}function Gu(e,t,r){let n=Fu(e);if(n.isOk()){let i=n[0],s=uo(i),o=jt(s,l=>{let d=Tu(l,new vn),p=Eu(d,"content-type","application/json"),$=Au(p,ml(t));return Wu($,r)}),u=Lt(o,l=>xi(new Zt(e),r));return Wi(u)}else{let i=n[0];return xi(i,r)}}function Vu(e){window.clearInterval(e)}function Ju(){return!!window.matchMedia("(prefers-color-scheme: dark)").matches}function Yu(){window.scrollTo(0,0)}function Xu(e,t){return window.setInterval(t,e)}var Qt=class extends f{constructor(t,r){super(),this.left=t,this.right=r}};function _o(){return new Qt(a([]),a([]))}function Ku(e){let t=e.right;if(t.hasLength(0))return[e,""];if(t.hasLength(1))return[e,""];{let r=t.head,n=t.tail.head,i=t.tail.tail;return[new Qt(_(r,e.left),i),n]}}function Zu(e){let t=e.left;if(t.hasLength(0))return[e,""];if(t.hasLength(1)){let r=t.head;return[new Qt(a([]),e.right),r]}else{let r=t.head,n=t.tail.head,i=t.tail.tail;return[new Qt(_(n,i),e.right),r]}}function Qu(e){let t=e.right,r=e.left;return t.hasLength(0)&&r.hasLength(0)?[!1,!1]:t.hasLength(1)&&r.hasLength(0)?[!1,!1]:t.atLeastLength(2)&&r.hasLength(0)?[!0,!1]:t.hasLength(0)&&r.hasLength(1)?[!1,!0]:t.hasLength(0)&&r.atLeastLength(2)?[!1,!0]:t.hasLength(1)&&r.hasLength(1)?[!1,!0]:t.hasLength(1)&&r.atLeastLength(2)?[!1,!0]:t.atLeastLength(2)&&r.hasLength(1)?[!0,!0]:[!0,!0]}function ea(e,t){let r=t;return new Qt(r.left,_(e,t.right))}var P=class extends f{constructor(t,r,n,i,s,o,u,l,c,d,p,$,b){super(),this.dark=t,this.displayed=r,this.elapsed=n,this.endpoints=i,this.goal_error=s,this.navigation=o,this.pending=u,this.rsvp_error=l,this.start_error=c,this.state=d,this.steps=p,this.timer_id=$,this.wiki_html=b}},He=class extends f{constructor(t,r){super(),this.goal=t,this.start=r}},er=class extends f{},ht=class extends f{},tr=class extends f{},Ve=class extends f{},$t=class extends f{},rr=class extends f{},at=class extends f{};var Er=class extends f{},Ar=class extends f{constructor(t){super(),this[0]=t}},Tr=class extends f{},zr=class extends f{constructor(t){super(),this[0]=t}},nr=class extends f{constructor(t){super(),this[0]=t}},Cr=class extends f{},Br=class extends f{},xt=class extends f{constructor(t){super(),this[0]=t}},qr=class extends f{constructor(t){super(),this[0]=t}},Nr=class extends f{},Mr=class extends f{},Ir=class extends f{},ir=class extends f{},Pr=class extends f{},Dr=class extends f{},Wr=class extends f{},Je=class extends f{constructor(t){super(),this[0]=t}},Ur=class extends f{},Fr=class extends f{},Rr=class extends f{constructor(t){super(),this[0]=t}},Gr=class extends f{},Tn=class extends f{};function wi(e){return Tt(t=>{let r=Ju();return t(e(r))})}function mo(e){return Tt(t=>(Yu(),t(e)))}function ho(e,t,r){return Tt(n=>{let i=Xu(e,()=>n(r));return n(t(i))})}function $o(e,t){return Tt(r=>(Vu(e),r(t)))}var Bf="/api/wikipage";function sr(e,t){let r=sn(a([["subject",Ht(e)]])),n=Du(t);return Gu(Bf,r,n)}var qf="/api/specialrandom";function zn(e){let t=nn("start",it,n=>nn("goal",it,i=>dr(new He(i,n)))),r=Uu(t,e);return Ru(qf,r)}function xo(){return new P(!1,"",0,new He("",""),new L,_o(),"",new L,new L,new er,0,0,"")}function ta(e){return[xo(),pn(a([zn(t=>new xt(t)),wi(t=>new nr(t))]))]}function ra(e){let t=e;return new P(t.dark,"",0,t.endpoints,new L,_o(),e.endpoints.start,new L,new L,new at,0,0,"")}function na(e,t){return e.lastIndex=0,e.test(t)}function ia(e,t){try{let r="gu";return t.case_insensitive&&(r+="i"),t.multi_line&&(r+="m"),new k(new RegExp(e,r))}catch(r){let n=(r.columnNumber||0)|0;return new v(new yi(r.message,n))}}var yi=class extends f{constructor(t,r){super(),this.error=t,this.byte_index=r}},wo=class extends f{constructor(t,r){super(),this.case_insensitive=t,this.multi_line=r}};function Nf(e,t){return ia(e,t)}function sa(e){return Nf(e,new wo(!1,!1))}function oa(e,t){return na(e,t)}function If(e,t){if(e.state instanceof Ve){let n=gn(t);if(n.isOk()){let i=n[0];return Wt(i.path,"/wiki/")?[(()=>{let o=e;return new P(o.dark,o.displayed,o.elapsed,o.endpoints,o.goal_error,o.navigation,i.path,o.rsvp_error,o.start_error,o.state,e.steps+1,o.timer_id,o.wiki_html)})(),sr(i.path,o=>new Je(o))]:[e,V()]}else return[e,V()]}else return[e,V()]}function la(e){let t=sa("^[a-zA-Z0-9-._~()]+$");if(t.isOk()){let r=t[0];return Yo(e)?new v("field cannot be empty"):oa(r,e)?new k(void 0):new v("only valid characters are a-zA-Z0-9-._~")}else{let r=t[0];return new v(r.error)}}function ua(e){if(e instanceof Sr)return"bad body";if(e instanceof Zt)return"bad URL "+e[0];if(e instanceof On){let t=e[0];return"HTTP error "+J(t.status)}else return e instanceof Sn?"JSON decode error":e instanceof En?"network error":"unhandled response"}function aa(e,t){if(t instanceof nr){let r=t[0];return[(()=>{let n=e;return new P(r,n.displayed,n.elapsed,n.endpoints,n.goal_error,n.navigation,n.pending,n.rsvp_error,n.start_error,n.state,n.steps,n.timer_id,n.wiki_html)})(),V()]}else{if(t instanceof Tr)return[(()=>{let r=e;return new P(r.dark,r.displayed,r.elapsed,r.endpoints,r.goal_error,r.navigation,r.pending,r.rsvp_error,r.start_error,new tr,r.steps,r.timer_id,r.wiki_html)})(),V()];if(t instanceof Er){let r="/wiki/"+e.endpoints.start;return[(()=>{let n=e;return new P(n.dark,n.displayed,n.elapsed,n.endpoints,n.goal_error,n.navigation,r,n.rsvp_error,n.start_error,new at,n.steps,n.timer_id,n.wiki_html)})(),sr(r,n=>new Je(n))]}else if(t instanceof zr){let r=t[0],n=la(r);if(n.isOk()&&!n[0])return[(()=>{let i=e;return new P(i.dark,i.displayed,i.elapsed,(()=>{let s=e.endpoints;return new He(s.goal,r)})(),i.goal_error,i.navigation,i.pending,i.rsvp_error,new L,i.state,i.steps,i.timer_id,i.wiki_html)})(),V()];{let i=n[0];return[(()=>{let s=e;return new P(s.dark,s.displayed,s.elapsed,s.endpoints,s.goal_error,s.navigation,s.pending,s.rsvp_error,new y(i),s.state,s.steps,s.timer_id,s.wiki_html)})(),V()]}}else if(t instanceof Ar){let r=t[0],n=la(r);if(n.isOk()&&!n[0])return[(()=>{let i=e;return new P(i.dark,i.displayed,i.elapsed,(()=>{let s=e.endpoints;return new He(r,s.start)})(),new L,i.navigation,i.pending,i.rsvp_error,i.start_error,i.state,i.steps,i.timer_id,i.wiki_html)})(),V()];{let i=n[0];return[(()=>{let s=e;return new P(s.dark,s.displayed,s.elapsed,s.endpoints,new y(i),s.navigation,s.pending,s.rsvp_error,s.start_error,s.state,s.steps,s.timer_id,s.wiki_html)})(),V()]}}else{if(t instanceof Br)return[(()=>{let r=e;return new P(r.dark,r.displayed,r.elapsed,r.endpoints,r.goal_error,r.navigation,r.pending,r.rsvp_error,r.start_error,new rr,r.steps,r.timer_id,r.wiki_html)})(),V()];if(t instanceof Cr){let r="/wiki/"+e.endpoints.start;return[(()=>{let n=e;return new P(n.dark,n.displayed,n.elapsed,n.endpoints,n.goal_error,n.navigation,r,n.rsvp_error,n.start_error,new at,n.steps,n.timer_id,n.wiki_html)})(),sr(r,n=>new Je(n))]}else if(t instanceof xt&&t[0].isOk()){let r=t[0][0];return[(()=>{let n=e;return new P(n.dark,n.displayed,n.elapsed,new He(r.start,r.goal),n.goal_error,n.navigation,n.pending,new L,n.start_error,n.state,n.steps,n.timer_id,n.wiki_html)})(),V()]}else if(t instanceof xt&&!t[0].isOk()){let r=t[0][0];return[(()=>{let n=e;return new P(n.dark,n.displayed,n.elapsed,n.endpoints,n.goal_error,n.navigation,n.pending,new y(ua(r)),n.start_error,n.state,n.steps,n.timer_id,n.wiki_html)})(),V()]}else if(t instanceof qr){let r=t[0];return If(e,r)}else{if(t instanceof Nr)return[(()=>{let r=e;return new P(r.dark,r.displayed,r.elapsed,r.endpoints,r.goal_error,r.navigation,r.pending,r.rsvp_error,r.start_error,new $t,r.steps,r.timer_id,r.wiki_html)})(),$o(e.timer_id,new Gr)];if(t instanceof Mr)return[(()=>{let r=e;return new P(r.dark,r.displayed,r.elapsed,r.endpoints,r.goal_error,r.navigation,r.pending,r.rsvp_error,r.start_error,new Ve,r.steps,r.timer_id,r.wiki_html)})(),ho(1e3,r=>new Rr(r),new Tn)];if(t instanceof Ir)return[(()=>{let r=e;return new P(r.dark,r.displayed,r.elapsed,r.endpoints,r.goal_error,r.navigation,r.pending,r.rsvp_error,r.start_error,new Ve,r.steps,r.timer_id,r.wiki_html)})(),ho(1e3,r=>new Rr(r),new Tn)];if(t instanceof ir)return[xo(),pn(a([zn(r=>new xt(r)),wi(r=>new nr(r))]))];if(t instanceof Pr)return[(()=>{let r=e;return new P(r.dark,r.displayed,r.elapsed,new He("",""),r.goal_error,r.navigation,r.pending,r.rsvp_error,r.start_error,r.state,r.steps,r.timer_id,r.wiki_html)})(),zn(r=>new xt(r))];if(t instanceof Dr)return[ra(e),sr("/wiki/"+e.endpoints.start,r=>new Je(r))];if(t instanceof Wr)return[e,V()];if(t instanceof Je&&t[0].isOk()){let r=t[0][0],n;ce(e.pending)==="/wiki/"+ce(e.endpoints.goal)?n=[new ht,pn(a([$o(e.timer_id,new Gr),mo(new Wr)]))]:n=[e.state,mo(new Wr)];let s=n,o=s[0],u=s[1];{let l=e.pending;return[(()=>{let c=e;return new P(c.dark,e.pending,c.elapsed,c.endpoints,c.goal_error,ea(l,e.navigation),"",new L,c.start_error,o,c.steps,c.timer_id,r)})(),u]}}else if(t instanceof Je&&!t[0].isOk()){let r=t[0][0];return[(()=>{let n=e;return new P(n.dark,n.displayed,n.elapsed,n.endpoints,n.goal_error,n.navigation,n.pending,new y(ua(r)),n.start_error,n.state,n.steps,n.timer_id,"failed to fetch")})(),V()]}else if(t instanceof Ur)if(e.state instanceof Ve){let n=Ku(e.navigation),i=n[0],s=n[1];return s===""?[e,V()]:[(()=>{let o=e;return new P(o.dark,o.displayed,o.elapsed,o.endpoints,o.goal_error,i,s,o.rsvp_error,o.start_error,o.state,e.steps+1,o.timer_id,o.wiki_html)})(),sr(s,o=>new Je(o))]}else return[e,V()];else if(t instanceof Fr)if(e.state instanceof Ve){let n=Zu(e.navigation),i=n[0],s=n[1];return s===""?[e,V()]:[(()=>{let o=e;return new P(o.dark,o.displayed,o.elapsed,o.endpoints,o.goal_error,i,s,o.rsvp_error,o.start_error,o.state,e.steps+1,o.timer_id,o.wiki_html)})(),sr(s,o=>new Je(o))]}else return[e,V()];else if(t instanceof Rr){let r=t[0];return[(()=>{let n=e;return new P(n.dark,n.displayed,n.elapsed,n.endpoints,n.goal_error,n.navigation,n.pending,n.rsvp_error,n.start_error,n.state,n.steps,r,n.wiki_html)})(),V()]}else{if(t instanceof Gr)return[e,V()];{let r=e.elapsed+1;return[(()=>{let n=e;return new P(n.dark,n.displayed,r,n.endpoints,n.goal_error,n.navigation,n.pending,n.rsvp_error,n.start_error,n.state,n.steps,n.timer_id,n.wiki_html)})(),V()]}}}}}}function Pf(e){return e==="input"||e==="change"||e==="focus"||e==="focusin"||e==="focusout"||e==="blur"?!0:e==="select"}function bi(e,t){return Al(e,t,C,!1,!1,Pf(e),new hr(0))}function ca(e){if(e instanceof Q){let t=e;return new Q(t.kind,t.name,t.handler,t.include,!0,t.stop_propagation,t.immediate,t.limit)}else return e}function fa(e){if(e instanceof Q){let t=e;return new Q(t.kind,t.name,t.handler,t.include,t.prevent_default,!0,t.immediate,t.limit)}else return e}function ge(e){return bi("click",dr(e))}function yo(e){return bi("input",rn(a(["target","value"]),it,t=>dr(e(t))))}var ke=class extends f{},W=class extends f{},ve=class extends f{},je=class extends f{},Le=class extends f{},fe=class extends f{};var Nt=class extends f{},Mt=class extends f{},H=class extends f{};var bo=class extends f{},go=class extends f{};var ko=class extends f{},we=class extends f{};function Wf(e){return e instanceof ke?m("bg-primary text-primary hover:text-primary/50"):e instanceof W?m("bg-primary-container text-on-primary-container hover:text-on-primary-container/50"):e instanceof ve?m("bg-secondary text-secondary hover:text-secondary/50"):e instanceof je?m("bg-secondary-container text-on-secondary-container hover:text-on-secondary-container/50"):e instanceof Le?m("bg-tertiary text-tertiary hover:text-tertiary/50"):m("bg-tertiary-container text-on-tertiary-container hover:text-on-tertiary-container/50")}function Uf(e){return e instanceof Nt?m("rounded-sm px-3.5 py-1.5 text-sm"):e instanceof Mt?m("rounded-md px-4 py-2 text-base"):e instanceof H?m("rounded-lg px-5 py-2.5 text-lg"):m("rounded-md p-2")}function Ff(e){return e instanceof we?a([]):e instanceof bo?a([]):e instanceof ko?a([m("bg-transparent border-2")]):e instanceof go?a([m("bg-transparent border-2")]):a([m("bg-transparent")])}function Pe(e,t,r,n,i){let s=_(m("justify-self-center transition-all active:enabled:scale-[98%] disabled:opacity-50 disabled:cursor-not-allowed"),_(Uf(t),_(Wf(r),n)));return _u(ie(Ff(e),s),i)}var wt=class extends f{};var yt=class extends f{},bt=class extends f{},De=class extends f{};function Gf(e,t){return e instanceof ke&&t instanceof bt?m("bg-primary text-primary"):e instanceof ke&&t instanceof De?m("outline-primary text-primary"):e instanceof ke&&t instanceof yt?m("text-primary"):e instanceof ke&&t instanceof wt?m("bg-primary/20 text-primary"):e instanceof W&&t instanceof bt?m("bg-primary-container text-on-primary-container"):e instanceof W&&t instanceof De?m("outline-on-primary-container text-on-primary"):e instanceof W&&t instanceof yt?m("text-on-primary-container"):e instanceof W&&t instanceof wt?m("bg-primary-container/20 text-on-primary-container"):e instanceof ve&&t instanceof bt?m("bg-secondary text-secondary"):e instanceof ve&&t instanceof De?m("outline-secondary text-secondary"):e instanceof ve&&t instanceof yt?m("text-secondary"):e instanceof ve&&t instanceof wt?m("bg-secondary/20 text-secondary"):e instanceof je&&t instanceof bt?m("bg-secondary-container text-on-secondary-container"):e instanceof je&&t instanceof De?m("outline-secondaryy-on-container text-secondaryy-on-container"):e instanceof je&&t instanceof yt?m("text-on-secondary-container"):e instanceof je&&t instanceof wt?m("bg-secondary-container/20 text-on-secondary-container"):e instanceof Le&&t instanceof bt?m("bg-tertiary text-tertiary"):e instanceof Le&&t instanceof De?m("outline-tertiary text-tertiary"):e instanceof Le&&t instanceof yt?m("text-tertiary"):e instanceof Le&&t instanceof wt?m("bg-tertiary/20 text-tertiary"):e instanceof fe&&t instanceof bt?m("bg-tertiary-container text-on-tertiary-container"):e instanceof fe&&t instanceof De?m("outline-on-tertiary-container text-on-tertiary-container"):e instanceof fe&&t instanceof yt?m("text-on-tertiary-container"):e instanceof fe&&t instanceof wt?m("bg-tertiary-container/20 text-on-tertiary-container"):m("bg-primary text-primary")}function Hf(e){return e instanceof Nt?m("px-2 py-1 text-xs"):e instanceof Mt?m("px-3 py-1 text-sm"):e instanceof H?m("px-4 py-1 text-base"):m("p-1")}function Vf(e){return e instanceof wt?a([]):e instanceof yt?a([]):e instanceof bt?a([]):e instanceof De?a([m("outline outline-1")]):a([m("bg-transparent border-2")])}function vo(e,t,r,n,i){let s=_(m("gap-2 rounded-full transition-all"),_(Hf(t),_(Gf(r,e),n)));return I(ie(Vf(e),s),i)}var gt=class extends f{},kt=class extends f{},We=class extends f{},or=class extends f{};function Yf(e,t){return e instanceof ke&&t instanceof gt?m("text-primary placeholder-primary bg-primary/20 hover:enabled:bg-primary/30"):e instanceof ke&&t instanceof We?m("border-primary focus:enabled:border-primary hover:enabled:border-primary text-primary"):e instanceof ke&&t instanceof kt?m("bg-primary placeholder-primary text-primary"):e instanceof ke&&t instanceof or?m("border-primary placeholder-primary text-primary"):e instanceof W&&t instanceof gt?m("text-on-primary-container placeholder-on-primary-container bg-primary-container/20 hover:enabled:bg-primary-container/30"):e instanceof W&&t instanceof We?m("border-on-primary-container focus:enabled:border-on-primary-container hover:enabled:border-on-primary-container text-primary"):e instanceof W&&t instanceof kt?m("bg-primary-container placeholder-on-primary-container text-on-primary-container"):e instanceof W&&t instanceof or?m("border-on-primary-container placeholder-on-primary-container text-on-primary-container"):e instanceof ve&&t instanceof gt?m("text-secondary placeholder-secondary bg-secondary/20 hover:enabled:bg-secondary/30"):e instanceof ve&&t instanceof We?m("border-secondary focus:enabled:border-secondary hover:enabled:border-secondary text-secondary"):e instanceof ve&&t instanceof kt?m("bg-secondary placeholder-secondary text-secondary"):e instanceof ve&&t instanceof or?m("border-secondary placeholder-secondary text-secondary"):e instanceof je&&t instanceof gt?m("text-on-secondary-container placeholder-on-secondary-container bg-secondary-container/20 hover:enabled:bg-secondary-container/30"):e instanceof je&&t instanceof We?m("border-on-secondary-container focus:enabled:border-on-secondary-container hover:enabled:border-on-secondary-container text-secondary"):e instanceof je&&t instanceof kt?m("bg-secondary-container placeholder-on-secondary-container text-on-secondary-container"):e instanceof je&&t instanceof or?m("border-on-secondary-container placeholder-on-secondary-container text-on-secondary-container"):e instanceof Le&&t instanceof gt?m("text-tertiary placeholder-tertiary bg-tertiary/20 hover:enabled:bg-tertiary/30"):e instanceof Le&&t instanceof We?m("border-tertiary focus:enabled:border-tertiary hover:enabled:border-tertiary text-tertiary"):e instanceof Le&&t instanceof kt?m("bg-tertiary placeholder-tertiary text-tertiary"):e instanceof Le&&t instanceof or?m("border-tertiary placeholder-tertiary text-tertiary"):e instanceof fe&&t instanceof gt?m("text-on-tertiary-container placeholder-on-tertiary-container bg-tertiary-container/20 hover:enabled:bg-tertiary-container/30"):e instanceof fe&&t instanceof We?m("border-on-tertiary-container focus:enabled:border-on-tertiary-container hover:enabled:border-on-tertiary-container text-tertiary"):e instanceof fe&&t instanceof kt?m("bg-tertiary-container placeholder-on-tertiary-container text-on-tertiary-container"):m("border-on-tertiary-container placeholder-on-tertiary-container text-on-tertiary-container")}function Xf(e){return e instanceof Nt?m("rounded-sm px-3.5 py-1.5 text-sm"):e instanceof Mt?m("rounded-md px-4 py-2 text-base"):e instanceof H?m("rounded-lg px-5 py-2.5 text-lg"):m("rounded-sm px-3.5 py-1.5 text-sm")}function Kf(e){return e instanceof kt?a([(()=>{let t=a(["bg-opacity-0 outline-none","hover:enabled:bg-opacity-20 focus:enabled:bg-opacity-30"]),r=ct(t," ");return m(r)})()]):e instanceof gt?a([m("focus:outline-none focus:ring-2 focus:ring-current")]):e instanceof We?a([(()=>{let t=a(["bg-transparent border-2 border-opacity-50 placeholder-opacity-70","hover:enabled:border-opacity-100 focus:enabled:border-opacity-100","focus:outline-none focus:ring-2 focus:ring-current"]),r=ct(t," ");return m(r)})()]):a([(()=>{let t=a(["bg-transparent border-opacity-20 border-b-2 outline-none rounded-b-none","focus:enabled:border-opacity-100"]),r=ct(t," ");return m(r)})()])}function jo(e,t,r,n){let i=_(m("disabled:opacity-50 disabled:cursor-not-allowed transition-all"),_(Xf(t),_(Yf(r,e),n)));return mu(ie(Kf(e),i))}function Qf(e,t){let r;if(t instanceof y&&e instanceof y){let o=t[0],u=e[0];r=[a([I(a([m("bg-error self-center justify-self-start")]),a([B(o)])),I(a([m("bg-error self-center justify-self-start")]),a([B(u)]))]),"grid-rows-4"]}else if(t instanceof y&&e instanceof L){let o=t[0];r=[a([I(a([m("bg-error self-center justify-self-start")]),a([B(o)]))]),"grid-rows-4"]}else if(t instanceof L&&e instanceof y){let o=e[0];r=[a([I(a([m("bg-error self-center justify-self-start col-2")]),a([B(o)]))]),"grid-rows-4"]}else r=[a([xe()]),"grid-rows-3"];let n=r,i=n[0],s=n[1];return I(a([m("grid grid-rows-[1fr_3fr_1fr] gap-2")]),a([I(a([m("self-center justify-self-center text-xl")]),a([B("Custom game selected. Choose the start and the goal")])),I(a([m("grid grid-cols-2 "+s+" lg:px-50 md:px-25 sm:px-5")]),ie(a([Js(a([m("self-center"),ns("start")]),a([B("Start")])),Js(a([m("self-center"),ns("goal")]),a([B("Goal")])),jo(new We,new H,new W,a([m("justify-self-stretch"),Yn("start"),is("Start"),yo(o=>new zr(o))])),jo(new We,new H,new W,a([m("justify-self-stretch"),Yn("goal"),is("Goal"),yo(o=>new Ar(o))])),Bt(a([m("italic")]),a([B("Initial Wikipedia topic")])),Bt(a([m("italic")]),a([B("Goal/target Wikipedia topic")]))]),i)),I(a([m("justify-self-center")]),a([Pe(new we,new H,new W,a([ge(new Er)]),a([B("Continue")]))]))]))}function ep(e){if(e instanceof y){let t=e[0];return I(a([m("bg-error self-center justify-self-start")]),a([B(t)]))}else return xe()}function tp(e){return e instanceof ht?I(a([m("grid font-bold place-content-center text-xl bg-teal-500")]),a([I(a([m("justify-self-center")]),a([B("Goal! Goal! Goal!")]))])):xe()}function rp(e,t,r){let n;e===""&&t===""&&r instanceof L?n=I(a([m("justify-self-center")]),a([Vs(a([m("fa-solid fa-solid fa-spinner fa-spin-pulse justify-self-center text-5xl")]),a([xe()]))])):e===""&&t===""&&r instanceof y?n=ep(r):n=xe();let i=n;return I(a([m("grid grid-rows-5")]),a([I(a([m("self-center justify-self-center text-xl")]),a([B("Random game selected")])),I(a([m("grid grid-cols-2 lg:px-50 md:px-25 sm:px-5 gap-1 content-center justify-items-center")]),a([bn(a([m("font-bold")]),a([B("Start: ")])),bn(a([m("font-bold")]),a([B("Goal: ")]))])),i,I(a([m("grid grid-cols-2 lg:px-50 md:px-25 sm:px-5 gap-1 content-center justify-items-center")]),a([Bt(a([]),a([B(e)])),Bt(a([]),a([B(t)]))])),I(a([m("grid grid-cols-2 lg:px-50 md:px-25 sm:px-5 gap-1 justify-items-center")]),a([Pe(new we,new H,new W,a([m("self-center"),ge(new Cr)]),a([B("Continue")])),Pe(new we,new H,new fe,a([m("self-center"),ge(new Pr)]),a([B("Deal again")]))]))]))}function Lo(e,t,r,n,i,s){let o;e instanceof er?o=xe():e instanceof rr?o=rp(t,r,s):e instanceof tr?o=Qf(n,i):o=xe();let u=o;return a([I(a([m("grid grid-cols-2 gap-4 justify-center")]),a([vo(new De,new H,new W,a([m("justify-self-end"),ge(new Br)]),a([B("Random")])),vo(new De,new H,new W,a([m("justify-self-start"),ge(new Tr)]),a([B("Custom")]))])),u])}function np(e,t){let r=Qu(t),n=r[0],i=r[1],s;e instanceof ht?s=Vt(!0):n?s=Vt(!1):s=Vt(!0);let o=s,u;e instanceof ht?u=Vt(!0):i?u=Vt(!1):u=Vt(!0);let l=u;return I(a([m("grid grid-cols-7 gap-4 justify-center")]),a([Pe(new we,new H,new W,a([ge(new Ur),o,m("col-start-3")]),a([B("Back")])),Pe(new we,new H,new W,a([ge(new Fr),l]),a([B("Forward")])),e instanceof Ve?Pe(new we,new H,new W,a([ge(new Nr)]),a([B("Pause")])):e instanceof $t?Pe(new we,new H,new W,a([ge(new Mr)]),a([B("Continue")])):e instanceof at?Pe(new we,new H,new W,a([ge(new Ir)]),a([B("Play")])):xe(),e instanceof ht?Pe(new we,new H,new fe,a([ge(new ir)]),a([B("New Game")])):e instanceof $t?Pe(new we,new H,new fe,a([ge(new ir)]),a([B("New Game")])):xe(),e instanceof $t?Pe(new we,new H,new fe,a([ge(new Dr)]),a([B("Restart")])):xe()]))}function ip(e){let t=Vr(e,3600),r=Vr(cr(e,3600),60),n=cr(e,60),i;t<10?i="0"+J(t):i=J(t);let s=i,o;r<10?o="0"+J(r):o=J(r);let u=o,l;n<10?l="0"+J(n):l=J(n);let c=l;return s+":"+u+":"+c}function sp(e,t){return I(a([m("grid grid-cols-2 gap-4")]),a([I(a([m("grid content-center justify-end text-xl")]),a([Bt(a([]),a([B("Steps: "),bn(a([m("font-bold")]),a([B(J(e))]))]))])),I(a([m("grid content-center justify-start text-xl")]),a([Bt(a([]),a([B(" Elapsed: "),bn(a([m("font-bold")]),a([B(ip(t))]))]))]))]))}function op(e){return bi("click",rn(a(["target","tagName"]),it,t=>{if(t==="A"){let r=cl(a(["target","href"]),it);return _r(r,e)}else return Fi(e(""),"<a>")}))}function lp(e,t,r){let n;if(t===""&&r instanceof L)n=xe();else if(t===""&&r instanceof y){let s=r[0];n=I(a([m("bg-error justify-self-center")]),a([B(s)]))}else n=I(a([m("justify-self-center")]),a([Vs(a([m("fa-solid fa-solid fa-spinner fa-spin-pulse justify-self-center text-5xl")]),a([xe()]))]));let i=n;return I(a([m("grid grid-rows-2")]),a([i,Hs("","div",a([Yn("wiki"),(()=>{let s=op(u=>new qr(u)),o=ca(s);return fa(o)})()]),e)]))}function gi(e){return a([I(a([m("grid gap-4")]),a([np(e.state,e.navigation),tp(e.state),sp(e.steps,e.elapsed)])),lp(e.wiki_html,e.pending,e.rsvp_error)])}function pa(e){let t,r=e.state;r instanceof er||r instanceof rr||r instanceof tr?t=Lo(e.state,e.endpoints.start,e.endpoints.goal,e.goal_error,e.start_error,e.rsvp_error):(r instanceof at||r instanceof Ve||r instanceof $t,t=gi(e));let n=t,i=I(a([m("grid place-content-center border-none")]),a([Bt(a([m("font-bold italic pb-1 pt-1 justify-self-center text-primary text-3xl")]),a([B("Wiki Racing")]))])),s;return e.dark?s=m("dark"):s=m("light"),I(a([s]),_(i,n))}function da(){let e=wu(ta,aa,pa),t=yu(e,"#app",void 0);if(!t.isOk())throw Cn("let_assert","wrspa",18,"main","Pattern match failed, no pattern matched the value.",{value:t})}da();
