class H{withFields(Z){let Q=Object.keys(this).map((W)=>(W in Z)?Z[W]:this[W]);return new this.constructor(...Q)}}class j0{static fromArray(Z,Q){let W=Q||new O;for(let J=Z.length-1;J>=0;--J)W=new r0(Z[J],W);return W}[Symbol.iterator](){return new d9(this)}toArray(){return[...this]}atLeastLength(Z){let Q=this;while(Z-- >0&&Q)Q=Q.tail;return Q!==void 0}hasLength(Z){let Q=this;while(Z-- >0&&Q)Q=Q.tail;return Z===-1&&Q instanceof O}countLength(){let Z=this,Q=0;while(Z)Z=Z.tail,Q++;return Q-1}}function I(Z,Q){return new r0(Z,Q)}function G(Z,Q){return j0.fromArray(Z,Q)}class d9{#Z;constructor(Z){this.#Z=Z}next(){if(this.#Z instanceof O)return{done:!0};else{let{head:Z,tail:Q}=this.#Z;return this.#Z=Q,{value:Z,done:!1}}}}class O extends j0{}class r0 extends j0{constructor(Z,Q){super();this.head=Z,this.tail=Q}}class cQ{bitSize;byteSize;bitOffset;rawBuffer;constructor(Z,Q,W){if(!(Z instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=Q??Z.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=W??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(Z.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=Z}byteAt(Z){if(Z<0||Z>=this.byteSize)return;return mQ(this.rawBuffer,this.bitOffset,Z)}equals(Z){if(this.bitSize!==Z.bitSize)return!1;let Q=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&Z.bitOffset===0){for(let J=0;J<Q;J++)if(this.rawBuffer[J]!==Z.rawBuffer[J])return!1;let W=this.bitSize%8;if(W){let J=8-W;if(this.rawBuffer[Q]>>J!==Z.rawBuffer[Q]>>J)return!1}}else{for(let J=0;J<Q;J++){let X=mQ(this.rawBuffer,this.bitOffset,J),K=mQ(Z.rawBuffer,Z.bitOffset,J);if(X!==K)return!1}let W=this.bitSize%8;if(W){let J=mQ(this.rawBuffer,this.bitOffset,Q),X=mQ(Z.rawBuffer,Z.bitOffset,Q),K=8-W;if(J>>K!==X>>K)return!1}}return!0}get buffer(){if(u9("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(u9("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}}function mQ(Z,Q,W){if(Q===0)return Z[W]??0;else{let J=Z[W]<<Q&255,X=Z[W+1]>>8-Q;return J|X}}class v6{constructor(Z){this.value=Z}}var c9={};function u9(Z,Q){if(c9[Z])return;console.warn(`Deprecated BitArray.${Z} property used in JavaScript FFI code. ${Q}.`),c9[Z]=!0}class IQ extends H{static isResult(Z){return Z instanceof IQ}}class D extends IQ{constructor(Z){super();this[0]=Z}isOk(){return!0}}var s9=(Z)=>new D(Z);class A extends IQ{constructor(Z){super();this[0]=Z}isOk(){return!1}}var i9=(Z)=>new A(Z);function o(Z,Q){let W=[Z,Q];while(W.length){let J=W.pop(),X=W.pop();if(J===X)continue;if(!p9(J)||!p9(X))return!1;if(!i7(J,X)||m7(J,X)||c7(J,X)||u7(J,X)||p7(J,X)||d7(J,X)||s7(J,X))return!1;let V=Object.getPrototypeOf(J);if(V!==null&&typeof V.equals==="function")try{if(J.equals(X))continue;else return!1}catch{}let[Y,M]=$7(J),U=Y(J),F=Y(X);if(U.length!==F.length)return!1;for(let N of U)W.push(M(J,N),M(X,N))}return!0}function $7(Z){if(Z instanceof Map)return[(Q)=>Q.keys(),(Q,W)=>Q.get(W)];else{let Q=Z instanceof globalThis.Error?["message"]:[];return[(W)=>[...Q,...Object.keys(W)],(W,J)=>W[J]]}}function m7(Z,Q){return Z instanceof Date&&(Z>Q||Z<Q)}function c7(Z,Q){return!(Z instanceof cQ)&&Z.buffer instanceof ArrayBuffer&&Z.BYTES_PER_ELEMENT&&!(Z.byteLength===Q.byteLength&&Z.every((W,J)=>W===Q[J]))}function u7(Z,Q){return Array.isArray(Z)&&Z.length!==Q.length}function p7(Z,Q){return Z instanceof Map&&Z.size!==Q.size}function d7(Z,Q){return Z instanceof Set&&(Z.size!=Q.size||[...Z].some((W)=>!Q.has(W)))}function s7(Z,Q){return Z instanceof RegExp&&(Z.source!==Q.source||Z.flags!==Q.flags)}function p9(Z){return typeof Z==="object"&&Z!==null}function i7(Z,Q){if(typeof Z!=="object"&&typeof Q!=="object"&&(!Z||!Q))return!1;if([Promise,WeakSet,WeakMap,Function].some((J)=>Z instanceof J))return!1;return Z.constructor===Q.constructor}function uQ(Z,Q,W,J,X,K,V){let Y=new globalThis.Error(K);Y.gleam_error=Z,Y.file=Q,Y.module=W,Y.line=J,Y.function=X,Y.fn=X;for(let M in V)Y[M]=V[M];return Y}class T extends H{constructor(Z){super();this[0]=Z}}class y extends H{}function $6(Z,Q){if(Z instanceof T){let W=Z[0];return new D(W)}else return new A(Q)}function n9(Z,Q){if(Z instanceof T)return Z[0];else return Q}var r9=new WeakMap,m6=new DataView(new ArrayBuffer(8)),c6=0;function u6(Z){let Q=r9.get(Z);if(Q!==void 0)return Q;let W=c6++;if(c6===2147483647)c6=0;return r9.set(Z,W),W}function p6(Z,Q){return Z^Q+2654435769+(Z<<6)+(Z>>2)|0}function s6(Z){let Q=0,W=Z.length;for(let J=0;J<W;J++)Q=Math.imul(31,Q)+Z.charCodeAt(J)|0;return Q}function a9(Z){m6.setFloat64(0,Z);let Q=m6.getInt32(0),W=m6.getInt32(4);return Math.imul(73244475,Q>>16^Q)^W}function n7(Z){return s6(Z.toString())}function r7(Z){let Q=Object.getPrototypeOf(Z);if(Q!==null&&typeof Q.hashCode==="function")try{let J=Z.hashCode(Z);if(typeof J==="number")return J}catch{}if(Z instanceof Promise||Z instanceof WeakSet||Z instanceof WeakMap)return u6(Z);if(Z instanceof Date)return a9(Z.getTime());let W=0;if(Z instanceof ArrayBuffer)Z=new Uint8Array(Z);if(Array.isArray(Z)||Z instanceof Uint8Array)for(let J=0;J<Z.length;J++)W=Math.imul(31,W)+f0(Z[J])|0;else if(Z instanceof Set)Z.forEach((J)=>{W=W+f0(J)|0});else if(Z instanceof Map)Z.forEach((J,X)=>{W=W+p6(f0(J),f0(X))|0});else{let J=Object.keys(Z);for(let X=0;X<J.length;X++){let K=J[X],V=Z[K];W=W+p6(f0(V),s6(K))|0}}return W}function f0(Z){if(Z===null)return 1108378658;if(Z===void 0)return 1108378659;if(Z===!0)return 1108378657;if(Z===!1)return 1108378656;switch(typeof Z){case"number":return a9(Z);case"string":return s6(Z);case"bigint":return n7(Z);case"object":return r7(Z);case"symbol":return u6(Z);case"function":return u6(Z);default:return 0}}var XZ=5,i6=Math.pow(2,XZ),l7=i6-1,a7=i6/2,o7=i6/4,D0=0,JZ=1,w0=2,pZ=3,n6={type:w0,bitmap:0,array:[]};function pQ(Z,Q){return Z>>>Q&l7}function c8(Z,Q){return 1<<pQ(Z,Q)}function t7(Z){return Z-=Z>>1&1431655765,Z=(Z&858993459)+(Z>>2&858993459),Z=Z+(Z>>4)&252645135,Z+=Z>>8,Z+=Z>>16,Z&127}function r6(Z,Q){return t7(Z&Q-1)}function y0(Z,Q,W){let J=Z.length,X=Array(J);for(let K=0;K<J;++K)X[K]=Z[K];return X[Q]=W,X}function e7(Z,Q,W){let J=Z.length,X=Array(J+1),K=0,V=0;while(K<Q)X[V++]=Z[K++];X[V++]=W;while(K<J)X[V++]=Z[K++];return X}function d6(Z,Q){let W=Z.length,J=Array(W-1),X=0,K=0;while(X<Q)J[K++]=Z[X++];++X;while(X<W)J[K++]=Z[X++];return J}function o9(Z,Q,W,J,X,K){let V=f0(Q);if(V===J)return{type:pZ,hash:V,array:[{type:D0,k:Q,v:W},{type:D0,k:X,v:K}]};let Y={val:!1};return dQ(l6(n6,Z,V,Q,W,Y),Z,J,X,K,Y)}function dQ(Z,Q,W,J,X,K){switch(Z.type){case JZ:return ZV(Z,Q,W,J,X,K);case w0:return l6(Z,Q,W,J,X,K);case pZ:return QV(Z,Q,W,J,X,K)}}function ZV(Z,Q,W,J,X,K){let V=pQ(W,Q),Y=Z.array[V];if(Y===void 0)return K.val=!0,{type:JZ,size:Z.size+1,array:y0(Z.array,V,{type:D0,k:J,v:X})};if(Y.type===D0){if(o(J,Y.k)){if(X===Y.v)return Z;return{type:JZ,size:Z.size,array:y0(Z.array,V,{type:D0,k:J,v:X})}}return K.val=!0,{type:JZ,size:Z.size,array:y0(Z.array,V,o9(Q+XZ,Y.k,Y.v,W,J,X))}}let M=dQ(Y,Q+XZ,W,J,X,K);if(M===Y)return Z;return{type:JZ,size:Z.size,array:y0(Z.array,V,M)}}function l6(Z,Q,W,J,X,K){let V=c8(W,Q),Y=r6(Z.bitmap,V);if((Z.bitmap&V)!==0){let M=Z.array[Y];if(M.type!==D0){let F=dQ(M,Q+XZ,W,J,X,K);if(F===M)return Z;return{type:w0,bitmap:Z.bitmap,array:y0(Z.array,Y,F)}}let U=M.k;if(o(J,U)){if(X===M.v)return Z;return{type:w0,bitmap:Z.bitmap,array:y0(Z.array,Y,{type:D0,k:J,v:X})}}return K.val=!0,{type:w0,bitmap:Z.bitmap,array:y0(Z.array,Y,o9(Q+XZ,U,M.v,W,J,X))}}else{let M=Z.array.length;if(M>=a7){let U=Array(32),F=pQ(W,Q);U[F]=l6(n6,Q+XZ,W,J,X,K);let N=0,B=Z.bitmap;for(let C=0;C<32;C++){if((B&1)!==0){let P=Z.array[N++];U[C]=P}B=B>>>1}return{type:JZ,size:M+1,array:U}}else{let U=e7(Z.array,Y,{type:D0,k:J,v:X});return K.val=!0,{type:w0,bitmap:Z.bitmap|V,array:U}}}}function QV(Z,Q,W,J,X,K){if(W===Z.hash){let V=a6(Z,J);if(V!==-1){if(Z.array[V].v===X)return Z;return{type:pZ,hash:W,array:y0(Z.array,V,{type:D0,k:J,v:X})}}let Y=Z.array.length;return K.val=!0,{type:pZ,hash:W,array:y0(Z.array,Y,{type:D0,k:J,v:X})}}return dQ({type:w0,bitmap:c8(Z.hash,Q),array:[Z]},Q,W,J,X,K)}function a6(Z,Q){let W=Z.array.length;for(let J=0;J<W;J++)if(o(Q,Z.array[J].k))return J;return-1}function m8(Z,Q,W,J){switch(Z.type){case JZ:return WV(Z,Q,W,J);case w0:return JV(Z,Q,W,J);case pZ:return XV(Z,J)}}function WV(Z,Q,W,J){let X=pQ(W,Q),K=Z.array[X];if(K===void 0)return;if(K.type!==D0)return m8(K,Q+XZ,W,J);if(o(J,K.k))return K;return}function JV(Z,Q,W,J){let X=c8(W,Q);if((Z.bitmap&X)===0)return;let K=r6(Z.bitmap,X),V=Z.array[K];if(V.type!==D0)return m8(V,Q+XZ,W,J);if(o(J,V.k))return V;return}function XV(Z,Q){let W=a6(Z,Q);if(W<0)return;return Z.array[W]}function o6(Z,Q,W,J){switch(Z.type){case JZ:return KV(Z,Q,W,J);case w0:return VV(Z,Q,W,J);case pZ:return YV(Z,J)}}function KV(Z,Q,W,J){let X=pQ(W,Q),K=Z.array[X];if(K===void 0)return Z;let V=void 0;if(K.type===D0){if(!o(K.k,J))return Z}else if(V=o6(K,Q+XZ,W,J),V===K)return Z;if(V===void 0){if(Z.size<=o7){let Y=Z.array,M=Array(Z.size-1),U=0,F=0,N=0;while(U<X){let B=Y[U];if(B!==void 0)M[F]=B,N|=1<<U,++F;++U}++U;while(U<Y.length){let B=Y[U];if(B!==void 0)M[F]=B,N|=1<<U,++F;++U}return{type:w0,bitmap:N,array:M}}return{type:JZ,size:Z.size-1,array:y0(Z.array,X,V)}}return{type:JZ,size:Z.size,array:y0(Z.array,X,V)}}function VV(Z,Q,W,J){let X=c8(W,Q);if((Z.bitmap&X)===0)return Z;let K=r6(Z.bitmap,X),V=Z.array[K];if(V.type!==D0){let Y=o6(V,Q+XZ,W,J);if(Y===V)return Z;if(Y!==void 0)return{type:w0,bitmap:Z.bitmap,array:y0(Z.array,K,Y)};if(Z.bitmap===X)return;return{type:w0,bitmap:Z.bitmap^X,array:d6(Z.array,K)}}if(o(J,V.k)){if(Z.bitmap===X)return;return{type:w0,bitmap:Z.bitmap^X,array:d6(Z.array,K)}}return Z}function YV(Z,Q){let W=a6(Z,Q);if(W<0)return Z;if(Z.array.length===1)return;return{type:pZ,hash:Z.hash,array:d6(Z.array,W)}}function t9(Z,Q){if(Z===void 0)return;let W=Z.array,J=W.length;for(let X=0;X<J;X++){let K=W[X];if(K===void 0)continue;if(K.type===D0){Q(K.v,K.k);continue}t9(K,Q)}}class R0{static fromObject(Z){let Q=Object.keys(Z),W=R0.new();for(let J=0;J<Q.length;J++){let X=Q[J];W=W.set(X,Z[X])}return W}static fromMap(Z){let Q=R0.new();return Z.forEach((W,J)=>{Q=Q.set(J,W)}),Q}static new(){return new R0(void 0,0)}constructor(Z,Q){this.root=Z,this.size=Q}get(Z,Q){if(this.root===void 0)return Q;let W=m8(this.root,0,f0(Z),Z);if(W===void 0)return Q;return W.v}set(Z,Q){let W={val:!1},J=this.root===void 0?n6:this.root,X=dQ(J,0,f0(Z),Z,Q,W);if(X===this.root)return this;return new R0(X,W.val?this.size+1:this.size)}delete(Z){if(this.root===void 0)return this;let Q=o6(this.root,0,f0(Z),Z);if(Q===this.root)return this;if(Q===void 0)return R0.new();return new R0(Q,this.size-1)}has(Z){if(this.root===void 0)return!1;return m8(this.root,0,f0(Z),Z)!==void 0}entries(){if(this.root===void 0)return[];let Z=[];return this.forEach((Q,W)=>Z.push([W,Q])),Z}forEach(Z){t9(this.root,Z)}hashCode(){let Z=0;return this.forEach((Q,W)=>{Z=Z+p6(f0(Q),f0(W))|0}),Z}equals(Z){if(!(Z instanceof R0)||this.size!==Z.size)return!1;try{return this.forEach((Q,W)=>{if(!o(Z.get(W,!Q),Q))throw l9}),!0}catch(Q){if(Q===l9)return!1;throw Q}}}var l9=Symbol();class V0 extends H{}class Y0 extends H{}class NZ extends H{}class U0 extends H{}class zQ extends H{}function NQ(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof O)return J;else{let X=W.head;Z=W.tail,Q=I(X,J)}}}function l(Z){return NQ(Z,G([]))}function IV(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof O)return l(K);else{let V=J.head;Z=J.tail,Q=X,W=I(X(V),K)}}}function RZ(Z,Q){return IV(Z,Q,G([]))}function zV(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof O)return J;else{let X=W.head;Z=W.tail,Q=I(X,J)}}}function E0(Z,Q){return zV(l(Z),Q)}function u8(Z,Q){return I(Q,Z)}function O0(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof O)return X;else{let V=J.head;Z=J.tail,Q=K(X,V),W=K}}}function NV(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof O)return new A(void 0);else{let{head:X,tail:K}=W,V=J(X);if(V instanceof D)return V;else Z=K,Q=J}}}function RV(Z,Q,W,J,X,K){while(!0){let V=Z,Y=Q,M=W,U=J,F=X,N=K,B=I(F,M);if(V instanceof O)if(U instanceof U0)return I(l(B),N);else return I(B,N);else{let{head:C,tail:P}=V,w=Y(F,C);if(U instanceof U0)if(w instanceof V0)Z=P,Q=Y,W=B,J=U,X=C,K=N;else if(w instanceof Y0)Z=P,Q=Y,W=B,J=U,X=C,K=N;else{let S;if(U instanceof U0)S=I(l(B),N);else S=I(B,N);let x=S;if(P instanceof O)return I(G([C]),x);else{let{head:j,tail:q}=P,f,R=Y(C,j);if(R instanceof V0)f=new U0;else if(R instanceof Y0)f=new U0;else f=new zQ;let L=f;Z=q,Q=Y,W=G([C]),J=L,X=j,K=x}}else if(w instanceof V0){let S;if(U instanceof U0)S=I(l(B),N);else S=I(B,N);let x=S;if(P instanceof O)return I(G([C]),x);else{let{head:j,tail:q}=P,f,R=Y(C,j);if(R instanceof V0)f=new U0;else if(R instanceof Y0)f=new U0;else f=new zQ;let L=f;Z=q,Q=Y,W=G([C]),J=L,X=j,K=x}}else if(w instanceof Y0){let S;if(U instanceof U0)S=I(l(B),N);else S=I(B,N);let x=S;if(P instanceof O)return I(G([C]),x);else{let{head:j,tail:q}=P,f,R=Y(C,j);if(R instanceof V0)f=new U0;else if(R instanceof Y0)f=new U0;else f=new zQ;let L=f;Z=q,Q=Y,W=G([C]),J=L,X=j,K=x}}else Z=P,Q=Y,W=B,J=U,X=C,K=N}}}function DV(Z,Q,W,J){while(!0){let X=Z,K=Q,V=W,Y=J;if(X instanceof O)return NQ(K,Y);else if(K instanceof O)return NQ(X,Y);else{let{head:M,tail:U}=X,F=K.head,N=K.tail,B=V(M,F);if(B instanceof V0)Z=U,Q=K,W=V,J=I(M,Y);else if(B instanceof Y0)Z=X,Q=N,W=V,J=I(F,Y);else Z=X,Q=N,W=V,J=I(F,Y)}}}function OV(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof O)return l(K);else{let V=J.tail;if(V instanceof O){let Y=J.head;return l(I(l(Y),K))}else{let Y=J.head,M=V.head,U=V.tail,F=DV(Y,M,X,G([]));Z=U,Q=X,W=I(F,K)}}}}function BV(Z,Q,W,J){while(!0){let X=Z,K=Q,V=W,Y=J;if(X instanceof O)return NQ(K,Y);else if(K instanceof O)return NQ(X,Y);else{let{head:M,tail:U}=X,F=K.head,N=K.tail,B=V(M,F);if(B instanceof V0)Z=X,Q=N,W=V,J=I(F,Y);else if(B instanceof Y0)Z=U,Q=K,W=V,J=I(M,Y);else Z=U,Q=K,W=V,J=I(M,Y)}}}function SV(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof O)return l(K);else{let V=J.tail;if(V instanceof O){let Y=J.head;return l(I(l(Y),K))}else{let Y=J.head,M=V.head,U=V.tail,F=BV(Y,M,X,G([]));Z=U,Q=X,W=I(F,K)}}}}function jV(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof O)return J;else if(X instanceof U0)if(J.tail instanceof O)return J.head;else Z=OV(J,K,G([])),Q=new zQ,W=K;else if(J.tail instanceof O){let Y=J.head;return l(Y)}else Z=SV(J,K,G([])),Q=new U0,W=K}}function t6(Z,Q){if(Z instanceof O)return Z;else{let W=Z.tail;if(W instanceof O)return Z;else{let J=Z.head,X=W.head,K=W.tail,V,Y=Q(J,X);if(Y instanceof V0)V=new U0;else if(Y instanceof Y0)V=new U0;else V=new zQ;let M=V,U=RV(K,Q,G([J]),M,X,G([]));return jV(U,new U0,Q)}}}function e6(Z,Q){return NV(Z,(W)=>{let J,X;if(J=W[0],X=W[1],o(J,Q))return new D(X);else return new A(void 0)})}function AV(Z,Q,W,J){while(!0){let X=Z,K=Q,V=W,Y=J;if(X instanceof O)return l(I([K,V],Y));else{let M=X.head[0];if(o(M,K)){let U=X.tail;return NQ(Y,I([M,V],U))}else{let U=X.head;Z=X.tail,Q=K,W=V,J=I(U,Y)}}}}function ZW(Z,Q,W){return AV(Z,Q,W,G([]))}function JJ(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof O)return;else{let{head:X,tail:K}=W;J(X),Z=K,Q=J}}}function iQ(Z){return Z===""}function EV(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof O)return J;else{let X=W.head;Z=W.tail,Q=J+X}}}function nQ(Z){return EV(Z,"")}function xV(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof O)return K;else{let V=J.head;Z=J.tail,Q=X,W=K+X+V}}}function l0(Z,Q){if(Z instanceof O)return"";else{let{head:W,tail:J}=Z;return xV(J,Q,W)}}class yZ extends H{constructor(Z,Q,W){super();this.expected=Z,this.found=Q,this.path=W}}class YZ extends H{constructor(Z){super();this.function=Z}}function OZ(Z,Q){let W=Q.function(Z),J,X;if(J=W[0],X=W[1],X instanceof O)return new D(J);else return new A(X)}function dZ(Z){return new YZ((Q)=>{return[Z,G([])]})}function sZ(Z,Q){return new YZ((W)=>{let J=Z.function(W),X,K;return X=J[0],K=J[1],[Q(X),K]})}function $V(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(K instanceof O)return X;else{let{head:V,tail:Y}=K,M=V.function(J),U,F;if(U=M,F=M[1],F instanceof O)return U;else Z=J,Q=X,W=Y}}}function MJ(Z,Q){return new YZ((W)=>{let J=Z.function(W),X,K;if(X=J,K=J[1],K instanceof O)return X;else return $V(W,X,Q)})}function UJ(Z,Q){return G([new yZ(Z,iZ(Q),G([]))])}function HJ(Z,Q,W){let J=W(Z);if(J instanceof D)return[J[0],G([])];else return[J[0],G([new yZ(Q,iZ(Z),G([]))])]}function mV(Z){if(o(t(!0),Z))return[!0,G([])];else if(o(t(!1),Z))return[!1,G([])];else return[!1,UJ("Bool",Z)]}function cV(Z){return HJ(Z,"Int",DJ)}function WW(Z,Q){return new YZ((W)=>{return[Z,UJ(Q,W)]})}var FJ=new YZ(mV),IJ=new YZ(cV);function uV(Z){return HJ(Z,"String",OJ)}var GZ=new YZ(uV);function d8(Z,Q){let W=MJ(GZ,G([(()=>{return sZ(IJ,X0)})()])),J=RZ(Q,(K)=>{let V=t(K),Y=OZ(V,W);if(Y instanceof D)return Y[0];else return"<"+iZ(V)+">"}),X=RZ(Z[1],(K)=>{return new yZ(K.expected,K.found,E0(J,K.path))});return[Z[0],X]}function zJ(Z,Q,W,J,X){while(!0){let K=Z,V=Q,Y=W,M=J,U=X;if(K instanceof O){let N=Y(M);return d8(N,l(V))}else{let{head:F,tail:N}=K,B=RJ(M,F);if(B instanceof D){let C=B[0];if(C instanceof T){let P=C[0];Z=N,Q=I(F,V),W=Y,J=P,X=U}else return U(M,I(F,V))}else{let C=B[0],P=Y(M),w;w=P[0];let S=[w,G([new yZ(C,iZ(M),G([]))])];return d8(S,l(V))}}}}function OQ(Z,Q,W){return new YZ((J)=>{let X=zJ(Z,G([]),Q.function,J,(F,N)=>{let B=Q.function(F),C;C=B[0];let P=[C,G([new yZ("Field","Nothing",G([]))])];return d8(P,l(N))}),K,V;K=X[0],V=X[1];let Y=W(K).function(J),M,U;return M=Y[0],U=Y[1],[M,E0(V,U)]})}function NJ(Z,Q){return new YZ((W)=>{return zJ(Z,G([]),Q.function,W,(J,X)=>{let K=Q.function(J),V;V=K[0];let Y=[V,G([new yZ("Field","Nothing",G([]))])];return d8(Y,l(X))})})}function rQ(Z,Q,W){return OQ(G([Z]),Q,W)}var dV=void 0,SJ={};function t(Z){return Z}function X0(Z){return Z.toString()}function nZ(Z){return[Z.charCodeAt(0)|0,Z.slice(1)]}function N0(Z){return Z.toLowerCase()}function H0(Z,Q,W){return Z.slice(Q,Q+W)}function fZ(Z,Q){return Z.startsWith(Q)}var AJ=[" ","\t",`
`,"\v","\f","\r","","\u2028","\u2029"].join(""),hG=new RegExp(`^[${AJ}]*`),_G=new RegExp(`[${AJ}]*$`);function RQ(){return R0.new()}function TJ(Z){return j0.fromArray(Z.entries())}function DZ(Z,Q){let W=Z.get(Q,SJ);if(W===SJ)return new A(dV);return new D(W)}function PJ(Z,Q,W){return W.set(Z,Q)}function iZ(Z){if(typeof Z==="string")return"String";else if(typeof Z==="boolean")return"Bool";else if(Z instanceof IQ)return"Result";else if(Z instanceof j0)return"List";else if(Z instanceof cQ)return"BitArray";else if(Z instanceof R0)return"Dict";else if(Number.isInteger(Z))return"Int";else if(Array.isArray(Z))return"Array";else if(typeof Z==="number")return"Float";else if(Z===null)return"Nil";else if(Z===void 0)return"Nil";else{let Q=typeof Z;return Q.charAt(0).toUpperCase()+Q.slice(1)}}function WJ(Z){let Q=Z.toString().replace("+","");if(Q.indexOf(".")>=0)return Q;else{let W=Q.indexOf("e");if(W>=0)return Q.slice(0,W)+".0"+Q.slice(W);else return Q+".0"}}class sV{#Z=new Set;inspect(Z){let Q=typeof Z;if(Z===!0)return"True";if(Z===!1)return"False";if(Z===null)return"//js(null)";if(Z===void 0)return"Nil";if(Q==="string")return this.#K(Z);if(Q==="bigint"||Number.isInteger(Z))return Z.toString();if(Q==="number")return WJ(Z);if(Z instanceof v6)return this.#V(Z);if(Z instanceof cQ)return this.#G(Z);if(Z instanceof RegExp)return`//js(${Z})`;if(Z instanceof Date)return`//js(Date("${Z.toISOString()}"))`;if(Z instanceof globalThis.Error)return`//js(${Z.toString()})`;if(Z instanceof Function){let J=[];for(let X of Array(Z.length).keys())J.push(String.fromCharCode(X+97));return`//fn(${J.join(", ")}) { ... }`}if(this.#Z.size===this.#Z.add(Z).size)return"//js(circular reference)";let W;if(Array.isArray(Z))W=`#(${Z.map((J)=>this.inspect(J)).join(", ")})`;else if(Z instanceof j0)W=this.#Q(Z);else if(Z instanceof H)W=this.#J(Z);else if(Z instanceof R0)W=this.#W(Z);else if(Z instanceof Set)return`//js(Set(${[...Z].map((J)=>this.inspect(J)).join(", ")}))`;else W=this.#X(Z);return this.#Z.delete(Z),W}#X(Z){let Q=Object.getPrototypeOf(Z)?.constructor?.name||"Object",W=[];for(let K of Object.keys(Z))W.push(`${this.inspect(K)}: ${this.inspect(Z[K])}`);let J=W.length?" "+W.join(", ")+" ":"";return`//js(${Q==="Object"?"":Q+" "}{${J}})`}#W(Z){let Q="dict.from_list([",W=!0;return Z.forEach((J,X)=>{if(!W)Q=Q+", ";Q=Q+"#("+this.inspect(X)+", "+this.inspect(J)+")",W=!1}),Q+"])"}#J(Z){let Q=Object.keys(Z).map((W)=>{let J=this.inspect(Z[W]);return isNaN(parseInt(W))?`${W}: ${J}`:J}).join(", ");return Q?`${Z.constructor.name}(${Q})`:Z.constructor.name}#Q(Z){if(Z instanceof O)return"[]";let Q='charlist.from_string("',W="[",J=Z;while(J instanceof r0){let X=J.head;if(J=J.tail,W!=="[")W+=", ";if(W+=this.inspect(X),Q)if(Number.isInteger(X)&&X>=32&&X<=126)Q+=String.fromCharCode(X);else Q=null}if(Q)return Q+'")';else return W+"]"}#K(Z){let Q='"';for(let W=0;W<Z.length;W++){let J=Z[W];switch(J){case`
`:Q+="\\n";break;case"\r":Q+="\\r";break;case"\t":Q+="\\t";break;case"\f":Q+="\\f";break;case"\\":Q+="\\\\";break;case'"':Q+="\\\"";break;default:if(J<" "||J>"~"&&J<" ")Q+="\\u{"+J.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}";else Q+=J}}return Q+='"',Q}#V(Z){return`//utfcodepoint(${String.fromCodePoint(Z.value)})`}#G(Z){if(Z.bitSize===0)return"<<>>";let Q="<<";for(let W=0;W<Z.byteSize-1;W++)Q+=Z.byteAt(W).toString(),Q+=", ";if(Z.byteSize*8===Z.bitSize)Q+=Z.byteAt(Z.byteSize-1).toString();else{let W=Z.bitSize%8;Q+=Z.byteAt(Z.byteSize-1)>>8-W,Q+=`:size(${W})`}return Q+=">>",Q}}function RJ(Z,Q){if(Z instanceof R0||Z instanceof WeakMap||Z instanceof Map){let J={},X=Z.get(Q,J);if(X===J)return new D(new y);return new D(new T(X))}let W=Number.isInteger(Q);if(W&&Q>=0&&Q<8&&Z instanceof j0){let J=0;for(let X of Z){if(J===Q)return new D(new T(X));J++}return new A("Indexable")}if(W&&Array.isArray(Z)||Z&&typeof Z==="object"||Z&&Object.getPrototypeOf(Z)===Object.prototype){if(Q in Z)return new D(new T(Z[Q]));return new D(new y)}return new A(W?"Indexable":"Dict")}function DJ(Z){if(Number.isInteger(Z))return new D(Z);return new A(0)}function OJ(Z){if(typeof Z==="string")return new D(Z);return new A("")}function sQ(Z,Q,W){return PJ(Q,W,Z)}function iV(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof O)return J;else{let X=W.head;Z=W.tail,Q=I(X,J)}}}function nV(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof O)return iV(J,G([]));else{let X=W.tail,K=W.head[0];Z=X,Q=I(K,J)}}}function lQ(Z){return nV(TJ(Z),G([]))}function BQ(Z,Q){if(Z instanceof D){let W=Z[0];return new D(Q(W))}else return Z}function rZ(Z,Q){if(Z instanceof D)return Z;else{let W=Z[0];return new A(Q(W))}}function T0(Z,Q){if(Z instanceof D){let W=Z[0];return Q(W)}else return Z}function JW(Z){if(Z instanceof D)return Z[0];else return Z[0]}function i8(Z,Q){if(Z instanceof D)return Z;else return new A(Q)}function wJ(Z,Q){return Z||Q}function XW(Z,Q,W){if(Z)return Q;else return W()}function Z0(Z){return Z}function VW(Z){return JSON.stringify(Z)}function EJ(Z){return Object.fromEntries(Z)}function jQ(Z){return Z}function xJ(Z){try{let Q=JSON.parse(Z);return s9(Q)}catch(Q){return i9(oV(Q,Z))}}function oV(Z,Q){if(tV(Z))return kJ();return eV(Z,Q)}function tV(Z){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(Z.message)}function eV(Z,Q){let W=[ZY,QY,JY,WY];for(let J of W){let X=J(Z,Q);if(X)return X}return AQ("")}function ZY(Z){let W=/unexpected token '(.)', ".+" is not valid JSON/i.exec(Z.message);if(!W)return null;let J=n8(W[1]);return AQ(J)}function QY(Z){let W=/unexpected token (.) in JSON at position (\d+)/i.exec(Z.message);if(!W)return null;let J=n8(W[1]);return AQ(J)}function WY(Z,Q){let J=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(Z.message);if(!J)return null;let X=Number(J[2]),K=Number(J[3]),V=XY(X,K,Q),Y=n8(Q[V]);return AQ(Y)}function JY(Z){let W=/unexpected (identifier|token) "(.)"/i.exec(Z.message);if(!W)return null;let J=n8(W[2]);return AQ(J)}function n8(Z){return"0x"+Z.charCodeAt(0).toString(16).toUpperCase()}function XY(Z,Q,W){if(Z===1)return Q-1;let J=1,X=0;return W.split("").find((K,V)=>{if(K===`
`)J+=1;if(J===Z)return X=V+Q,!0;return!1}),X}class fJ extends H{}var kJ=()=>new fJ;class yJ extends H{constructor(Z){super();this[0]=Z}}var AQ=(Z)=>new yJ(Z);class bJ extends H{constructor(Z){super();this[0]=Z}}function KY(Z,Q){return T0(xJ(Z),(W)=>{let J=OZ(W,Q);return rZ(J,(X)=>{return new bJ(X)})})}function YW(Z,Q){return KY(Z,Q)}function GW(Z){return VW(Z)}function lZ(Z){return jQ(Z)}function MW(Z){return jQ(Z)}function aQ(Z){return EJ(Z)}var g0=()=>globalThis?.document,r8="http://www.w3.org/1999/xhtml",l8=1,UW=3;var _J=!!globalThis.HTMLElement?.prototype?.moveBefore;var k=G([]),a8=new y;var GY=new NZ,MY=new V0,UY=new Y0;function o8(Z,Q){if(Z.name===Q.name)return UY;else if(Z.name<Q.name)return MY;else return GY}class a0 extends H{constructor(Z,Q,W){super();this.kind=Z,this.name=Q,this.value=W}}class oQ extends H{constructor(Z,Q,W){super();this.kind=Z,this.name=Q,this.value=W}}class M0 extends H{constructor(Z,Q,W,J,X,K,V,Y){super();this.kind=Z,this.name=Q,this.handler=W,this.include=J,this.prevent_default=X,this.stop_propagation=K,this.debounce=V,this.throttle=Y}}class tQ extends H{constructor(Z,Q,W){super();this.prevent_default=Z,this.stop_propagation=Q,this.message=W}}class pJ extends H{constructor(Z){super();this.kind=Z}}class dJ extends H{constructor(Z){super();this.kind=Z}}function RY(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof O)return J;else{let X=W.head;if(X instanceof a0){let K=X.name;if(K==="")Z=W.tail,Q=J;else if(K==="class"){let V=X.value;if(V==="")Z=W.tail,Q=J;else{let Y=W.tail;if(Y instanceof O){let M=X;Z=Y,Q=I(M,J)}else{let M=Y.head;if(M instanceof a0)if(M.name==="class"){let F=X.kind,N=V,B=Y.tail,C=M.value,P=N+" "+C,w=new a0(F,"class",P);Z=I(w,B),Q=J}else{let F=X;Z=Y,Q=I(F,J)}else{let U=X;Z=Y,Q=I(U,J)}}}}else if(K==="style"){let V=X.value;if(V==="")Z=W.tail,Q=J;else{let Y=W.tail;if(Y instanceof O){let M=X;Z=Y,Q=I(M,J)}else{let M=Y.head;if(M instanceof a0)if(M.name==="style"){let F=X.kind,N=V,B=Y.tail,C=M.value,P=N+";"+C,w=new a0(F,"style",P);Z=I(w,B),Q=J}else{let F=X;Z=Y,Q=I(F,J)}else{let U=X;Z=Y,Q=I(U,J)}}}}else{let V=X;Z=W.tail,Q=I(V,J)}}else{let K=X;Z=W.tail,Q=I(K,J)}}}}function FW(Z){if(Z instanceof O)return Z;else if(Z.tail instanceof O)return Z;else{let J=t6(Z,(X,K)=>{return o8(K,X)});return RY(J,k)}}var IW=0;function sJ(Z,Q){return new a0(IW,Z,Q)}var zW=1;function iJ(Z,Q){return new oQ(zW,Z,Q)}var NW=2;function nJ(Z,Q,W,J,X,K,V){return new M0(NW,Z,Q,W,J,X,K,V)}var RW=0;var DW=new pJ(RW);var t8=2,OW=new dJ(t8);function S0(Z,Q){return sJ(Z,Q)}function rJ(Z,Q){return iJ(Z,Q)}function lJ(Z,Q){if(Q)return S0(Z,"");else return rJ(Z,MW(!1))}function z(Z){return S0("class",Z)}function TQ(Z){return S0("id",Z)}function aJ(Z){return lJ("checked",Z)}function bZ(Z){return lJ("disabled",Z)}function eQ(Z){return S0("for",Z)}function BW(Z){return S0("placeholder",Z)}function oJ(Z){return S0("type",Z)}class Z6 extends H{constructor(Z,Q,W){super();this.synchronous=Z,this.before_paint=Q,this.after_paint=W}}class tJ extends H{constructor(Z,Q,W,J,X){super();this.dispatch=Z,this.emit=Q,this.select=W,this.root=J,this.provide=X}}function eJ(Z,Q,W,J,X,K){let V=new tJ(Q,W,J,X,K);return JJ(Z.synchronous,(Y)=>{return Y(V)})}var e8=new Z6(G([]),G([]),G([]));function s(){return e8}function gZ(Z){return new Z6(G([(W)=>{let J=W.dispatch;return Z(J)}]),e8.before_paint,e8.after_paint)}function oZ(Z){return O0(Z,e8,(Q,W)=>{return new Z6(O0(W.synchronous,Q.synchronous,u8),O0(W.before_paint,Q.before_paint,u8),O0(W.after_paint,Q.after_paint,u8))})}function x0(){return null}function Z8(Z,Q){let W=Z?.get(Q);if(W!=null)return new D(W);else return new A(void 0)}function Q8(Z,Q){return Z&&Z.has(Q)}function tZ(Z,Q,W){return Z??=new Map,Z.set(Q,W),Z}function SW(Z,Q){return Z?.delete(Q),Z}class jW extends H{}class AW extends H{constructor(Z,Q){super();this.key=Z,this.parent=Q}}class ZX extends H{constructor(Z,Q){super();this.index=Z,this.parent=Q}}function OY(Z,Q){while(!0){let W=Z,J=Q;if(J instanceof O)return!1;else{let{head:X,tail:K}=J,V=fZ(W,X);if(V)return V;else Z=W,Q=K}}}function _0(Z,Q,W){if(W==="")return new ZX(Q,Z);else return new AW(W,Z)}var PQ=new jW,J8="\t";function QX(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof jW)if(J instanceof O)return"";else{let X=J.tail;return nQ(X)}else if(W instanceof AW){let X=W.key;Z=W.parent,Q=I(J8,I(X,J))}else{let X=W.index;Z=W.parent,Q=I(J8,I(X0(X),J))}}}function WX(Z){return QX(Z,G([]))}function JX(Z,Q){if(Q instanceof O)return!1;else return OY(WX(Z),Q)}var TW=`
`;function PW(Z,Q){return QX(Z,G([TW,Q]))}class v0 extends H{constructor(Z,Q,W,J,X){super();this.kind=Z,this.key=Q,this.mapper=W,this.children=J,this.keyed_children=X}}class $0 extends H{constructor(Z,Q,W,J,X,K,V,Y,M,U){super();this.kind=Z,this.key=Q,this.mapper=W,this.namespace=J,this.tag=X,this.attributes=K,this.children=V,this.keyed_children=Y,this.self_closing=M,this.void=U}}class m0 extends H{constructor(Z,Q,W,J){super();this.kind=Z,this.key=Q,this.mapper=W,this.content=J}}class hZ extends H{constructor(Z,Q,W,J,X,K,V){super();this.kind=Z,this.key=Q,this.mapper=W,this.namespace=J,this.tag=X,this.attributes=K,this.inner_html=V}}function X8(Z,Q){if(Q==="")if(Z==="area")return!0;else if(Z==="base")return!0;else if(Z==="br")return!0;else if(Z==="col")return!0;else if(Z==="embed")return!0;else if(Z==="hr")return!0;else if(Z==="img")return!0;else if(Z==="input")return!0;else if(Z==="link")return!0;else if(Z==="meta")return!0;else if(Z==="param")return!0;else if(Z==="source")return!0;else if(Z==="track")return!0;else if(Z==="wbr")return!0;else return!1;else return!1}function XX(Z,Q){if(Q instanceof v0)return new v0(Q.kind,Z,Q.mapper,Q.children,Q.keyed_children);else if(Q instanceof $0)return new $0(Q.kind,Z,Q.mapper,Q.namespace,Q.tag,Q.attributes,Q.children,Q.keyed_children,Q.self_closing,Q.void);else if(Q instanceof m0)return new m0(Q.kind,Z,Q.mapper,Q.content);else return new hZ(Q.kind,Z,Q.mapper,Q.namespace,Q.tag,Q.attributes,Q.inner_html)}var o0=0;function CW(Z,Q,W,J){return new v0(o0,Z,Q,W,J)}var eZ=1;function K8(Z,Q,W,J,X,K,V,Y,M){return new $0(eZ,Z,Q,W,J,FW(X),K,V,Y,M)}var CQ=2;function qW(Z,Q,W){return new m0(CQ,Z,Q,W)}var LW=3;function KX(Z,Q,W,J,X,K){return new hZ(LW,Z,Q,W,J,FW(X),K)}var wW=(Z,Q)=>Z===Q,t0=(Z,Q)=>{if(Z===Q)return!0;if(Z==null||Q==null)return!1;let W=typeof Z;if(W!==typeof Q)return!1;if(W!=="object")return!1;if(Z.constructor!==Q.constructor)return!1;if(Array.isArray(Z))return jY(Z,Q);return AY(Z,Q)},jY=(Z,Q)=>{let W=Z.length;if(W!==Q.length)return!1;while(W--)if(!t0(Z[W],Q[W]))return!1;return!0},AY=(Z,Q)=>{let W=Object.keys(Z),J=W.length;if(Object.keys(Q).length!==J)return!1;while(J--){let X=W[J];if(!Object.hasOwn(Q,X))return!1;if(!t0(Z[X],Q[X]))return!1}return!0};class SZ extends H{constructor(Z,Q,W){super();this.handlers=Z,this.dispatched_paths=Q,this.next_dispatched_paths=W}}class kW extends H{constructor(Z,Q){super();this.path=Z,this.handler=Q}}class EW extends H{constructor(Z){super();this.path=Z}}function fW(){return new SZ(x0(),k,k)}function MX(Z){return new SZ(Z.handlers,Z.next_dispatched_paths,k)}function UX(Z,Q,W){return SW(Z,PW(Q,W))}function W6(Z,Q,W){let J=UX(Z.handlers,Q,W);return new SZ(J,Z.dispatched_paths,Z.next_dispatched_paths)}function VX(Z,Q,W){return O0(W,Z,(J,X)=>{if(X instanceof M0){let K=X.name;return UX(J,Q,K)}else return J})}function yW(Z,Q,W,J){let X=Z8(Z.handlers,Q+TW+W);if(X instanceof D){let K=X[0],V=OZ(J,K);if(V instanceof D){let Y=V[0];return new kW(Q,Y)}else return new EW(Q)}else return new EW(Q)}function bW(Z,Q){let W=I(Q.path,Z.next_dispatched_paths),J=new SZ(Z.handlers,Z.dispatched_paths,W);if(Q instanceof kW){let X=Q.handler;return[J,new D(X)]}else return[J,new A(void 0)]}function J6(Z,Q,W,J){let X=yW(Z,Q,W,J);return((K)=>{return bW(Z,K)})(X)}function X6(Z,Q){return JX(Q,Z.dispatched_paths)}function HX(Z,Q,W,J,X){return tZ(Z,PW(W,J),sZ(X,(K)=>{return new tQ(K.prevent_default,K.stop_propagation,Z0(Q)(K.message))}))}function qQ(Z,Q,W,J,X){let K=HX(Z.handlers,Q,W,J,X);return new SZ(K,Z.dispatched_paths,Z.next_dispatched_paths)}function YX(Z,Q,W,J){return O0(J,Z,(X,K)=>{if(K instanceof M0){let{name:V,handler:Y}=K;return HX(X,Q,W,V,Y)}else return X})}function vZ(Z,Q){let W=wW(Z,Z0);if(wW(Q,Z0))return Z;else if(W)return Q;else return(X)=>{return Z(Q(X))}}function GX(Z,Q,W,J){while(!0){let X=Z,K=Q,V=W,Y=J;if(Y instanceof O)return X;else{let{head:M,tail:U}=Y;Z=FX(X,K,V,M),Q=K,W=V+1,J=U}}}function FX(Z,Q,W,J){if(J instanceof v0){let X=J.children,K=_0(Q,W,J.key);return GX(Z,K,0,X)}else if(J instanceof $0){let{attributes:X,children:K}=J,V=_0(Q,W,J.key),M=VX(Z,V,X);return GX(M,V,0,K)}else if(J instanceof m0)return Z;else{let X=J.attributes,K=_0(Q,W,J.key);return VX(Z,K,X)}}function jZ(Z,Q,W,J){let X=FX(Z.handlers,Q,W,J);return new SZ(X,Z.dispatched_paths,Z.next_dispatched_paths)}function xW(Z,Q,W,J,X){while(!0){let K=Z,V=Q,Y=W,M=J,U=X;if(U instanceof O)return K;else{let{head:F,tail:N}=U;Z=IX(K,V,Y,M,F),Q=V,W=Y,J=M+1,X=N}}}function IX(Z,Q,W,J,X){if(X instanceof v0){let K=X.children,V=_0(W,J,X.key),Y=vZ(Q,X.mapper);return xW(Z,Y,V,0,K)}else if(X instanceof $0){let{attributes:K,children:V}=X,Y=_0(W,J,X.key),M=vZ(Q,X.mapper),F=YX(Z,M,Y,K);return xW(F,M,Y,0,V)}else if(X instanceof m0)return Z;else{let K=X.attributes,V=_0(W,J,X.key),Y=vZ(Q,X.mapper);return YX(Z,Y,V,K)}}function AZ(Z,Q,W,J,X){let K=IX(Z.handlers,Q,W,J,X);return new SZ(K,Z.dispatched_paths,Z.next_dispatched_paths)}function gW(Z){return AZ(fW(),Z0,PQ,0,Z)}function zX(Z,Q,W,J,X){let K=xW(Z.handlers,Q,W,J,X);return new SZ(K,Z.dispatched_paths,Z.next_dispatched_paths)}function e0(Z,Q,W){return K8("",Z0,"",Z,Q,W,x0(),!1,X8(Z,""))}function K6(Z){return qW("",Z0,Z)}function F0(){return qW("",Z0,"")}function hW(Z,Q,W,J){return KX("",Z0,Z,Q,W,J)}function b(Z){return K6(Z)}function _(Z,Q){return e0("div",Z,Q)}function NX(Z,Q){return e0("li",Z,Q)}function TZ(Z,Q){return e0("p",Z,Q)}function RX(Z,Q){return e0("ul",Z,Q)}function V8(Z,Q){return e0("i",Z,Q)}function $Z(Z,Q){return e0("span",Z,Q)}function DX(Z,Q){return e0("button",Z,Q)}function V6(Z){return e0("input",Z,k)}function Y8(Z,Q){return e0("label",Z,Q)}class G8 extends H{constructor(Z,Q,W,J){super();this.index=Z,this.removed=Q,this.changes=W,this.children=J}}class OX extends H{constructor(Z,Q){super();this.kind=Z,this.content=Q}}class BX extends H{constructor(Z,Q){super();this.kind=Z,this.inner_html=Q}}class SX extends H{constructor(Z,Q,W){super();this.kind=Z,this.added=Q,this.removed=W}}class jX extends H{constructor(Z,Q,W){super();this.kind=Z,this.key=Q,this.before=W}}class AX extends H{constructor(Z,Q,W){super();this.kind=Z,this.index=Q,this.with=W}}class TX extends H{constructor(Z,Q){super();this.kind=Z,this.index=Q}}class PX extends H{constructor(Z,Q,W){super();this.kind=Z,this.children=Q,this.before=W}}function _W(Z,Q,W,J){return new G8(Z,Q,W,J)}var vW=0;function CX(Z){return new OX(vW,Z)}var $W=1;function qX(Z){return new BX($W,Z)}var mW=2;function cW(Z,Q){return new SX(mW,Z,Q)}var uW=3;function LX(Z,Q){return new jX(uW,Z,Q)}var pW=4;function wX(Z){return new TX(pW,Z)}var dW=5;function WQ(Z,Q){return new AX(dW,Z,Q)}var sW=6;function iW(Z,Q){return new PX(sW,Z,Q)}class xX extends H{constructor(Z,Q,W,J,X,K,V,Y){super();this.kind=Z,this.open_shadow_root=Q,this.will_adopt_styles=W,this.observed_attributes=J,this.observed_properties=X,this.requested_contexts=K,this.provided_contexts=V,this.vdom=Y}}class kX extends H{constructor(Z,Q){super();this.kind=Z,this.patch=Q}}class fX extends H{constructor(Z,Q,W){super();this.kind=Z,this.name=Q,this.data=W}}class yX extends H{constructor(Z,Q,W){super();this.kind=Z,this.key=Q,this.value=W}}class Y6 extends H{constructor(Z,Q){super();this.kind=Z,this.messages=Q}}class G6 extends H{constructor(Z,Q,W){super();this.kind=Z,this.name=Q,this.value=W}}class M6 extends H{constructor(Z,Q,W){super();this.kind=Z,this.name=Q,this.value=W}}class U6 extends H{constructor(Z,Q,W,J){super();this.kind=Z,this.path=Q,this.name=W,this.event=J}}class nW extends H{constructor(Z,Q,W){super();this.kind=Z,this.key=Q,this.value=W}}var qY=0;function bX(Z,Q,W,J,X,K,V){return new xX(qY,Z,Q,W,J,X,K,V)}var LY=1;function rW(Z){return new kX(LY,Z)}var wY=2;function gX(Z,Q){return new fX(wY,Z,Q)}var EY=3;function hX(Z,Q){return new yX(EY,Z,Q)}class H6 extends H{constructor(Z,Q){super();this.patch=Z,this.events=Q}}class $X extends H{constructor(Z,Q,W){super();this.added=Z,this.removed=Q,this.events=W}}function xY(Z,Q,W,J){if(W==="input"&&Q==="")return X6(Z,J);else if(W==="select"&&Q==="")return X6(Z,J);else if(W==="textarea"&&Q==="")return X6(Z,J);else return!1}function vX(Z,Q,W,J,X,K,V,Y){while(!0){let M=Z,U=Q,F=W,N=J,B=X,C=K,P=V,w=Y;if(B instanceof O)if(C instanceof O)return new $X(P,w,N);else{let S=C.head;if(S instanceof M0){let x=S,j=C.tail,q=S.name,f=S.handler,R=I(x,P),L=qQ(N,F,U,q,f);Z=M,Q=U,W=F,J=L,X=B,K=j,V=R,Y=w}else{let x=S,j=C.tail,q=I(x,P);Z=M,Q=U,W=F,J=N,X=B,K=j,V=q,Y=w}}else if(C instanceof O){let S=B.head;if(S instanceof M0){let x=S,j=B.tail,q=S.name,f=I(x,w),R=W6(N,U,q);Z=M,Q=U,W=F,J=R,X=j,K=C,V=P,Y=f}else{let x=S,j=B.tail,q=I(x,w);Z=M,Q=U,W=F,J=N,X=j,K=C,V=P,Y=q}}else{let{head:S,tail:x}=B,j=C.head,q=C.tail,f=o8(S,j);if(f instanceof V0)if(S instanceof M0){let R=S.name,L=I(S,w),E=W6(N,U,R);Z=M,Q=U,W=F,J=E,X=x,K=C,V=P,Y=L}else{let R=I(S,w);Z=M,Q=U,W=F,J=N,X=x,K=C,V=P,Y=R}else if(f instanceof Y0)if(S instanceof a0)if(j instanceof a0){let R,L=j.name;if(L==="value")R=M||S.value!==j.value;else if(L==="checked")R=M||S.value!==j.value;else if(L==="selected")R=M||S.value!==j.value;else R=S.value!==j.value;let E=R,g;if(E)g=I(j,P);else g=P;let v=g;Z=M,Q=U,W=F,J=N,X=x,K=q,V=v,Y=w}else if(j instanceof M0){let{name:R,handler:L}=j,E=I(j,P),g=I(S,w),v=qQ(N,F,U,R,L);Z=M,Q=U,W=F,J=v,X=x,K=q,V=E,Y=g}else{let R=I(j,P),L=I(S,w);Z=M,Q=U,W=F,J=N,X=x,K=q,V=R,Y=L}else if(S instanceof oQ)if(j instanceof oQ){let R,L=j.name;if(L==="scrollLeft")R=!0;else if(L==="scrollRight")R=!0;else if(L==="value")R=M||!t0(S.value,j.value);else if(L==="checked")R=M||!t0(S.value,j.value);else if(L==="selected")R=M||!t0(S.value,j.value);else R=!t0(S.value,j.value);let E=R,g;if(E)g=I(j,P);else g=P;let v=g;Z=M,Q=U,W=F,J=N,X=x,K=q,V=v,Y=w}else if(j instanceof M0){let{name:R,handler:L}=j,E=I(j,P),g=I(S,w),v=qQ(N,F,U,R,L);Z=M,Q=U,W=F,J=v,X=x,K=q,V=E,Y=g}else{let R=I(j,P),L=I(S,w);Z=M,Q=U,W=F,J=N,X=x,K=q,V=R,Y=L}else if(j instanceof M0){let{name:R,handler:L}=j,E=S.prevent_default.kind!==j.prevent_default.kind||S.stop_propagation.kind!==j.stop_propagation.kind||S.debounce!==j.debounce||S.throttle!==j.throttle,g;if(E)g=I(j,P);else g=P;let v=g,c=qQ(N,F,U,R,L);Z=M,Q=U,W=F,J=c,X=x,K=q,V=v,Y=w}else{let R=S.name,L=I(j,P),E=I(S,w),g=W6(N,U,R);Z=M,Q=U,W=F,J=g,X=x,K=q,V=L,Y=E}else if(j instanceof M0){let{name:R,handler:L}=j,E=I(j,P),g=qQ(N,F,U,R,L);Z=M,Q=U,W=F,J=g,X=B,K=q,V=E,Y=w}else{let R=I(j,P);Z=M,Q=U,W=F,J=N,X=B,K=q,V=R,Y=w}}}}function lW(Z,Q,W,J,X,K,V,Y,M,U,F,N,B,C){while(!0){let P=Z,w=Q,S=W,x=J,j=X,q=K,f=V,R=Y,L=M,E=U,g=F,v=N,c=B,K0=C;if(P instanceof O)if(S instanceof O)return new H6(new G8(L,f,g,v),K0);else{let n0=zX(K0,c,E,R,S),k0=iW(S,R-q),e=I(k0,g);return new H6(new G8(L,f,e,v),n0)}else if(S instanceof O){let{head:n0,tail:k0}=P,e;if(n0.key===""||!Q8(j,n0.key))e=f+1;else e=f;let p=e,i=jZ(K0,E,R,n0);Z=k0,Q=w,W=S,J=x,X=j,K=q,V=p,Y=R,M=L,U=E,F=g,N=v,B=c,C=i}else{let n0=P.head,k0=S.head;if(n0.key!==k0.key){let e=P.tail,Q0=S.tail,p=Z8(w,k0.key);if(Q8(x,n0.key))if(p instanceof D){let h=p[0];if(Q8(j,n0.key))Z=e,Q=w,W=S,J=x,X=j,K=q-1,V=f,Y=R,M=L,U=E,F=g,N=v,B=c,C=K0;else{let n=R-q,m=I(LX(k0.key,n),g),W0=tZ(j,k0.key,void 0),r=q+1;Z=I(h,P),Q=w,W=S,J=x,X=W0,K=r,V=f,Y=R,M=L,U=E,F=m,N=v,B=c,C=K0}}else{let h=R-q,d=AZ(K0,c,E,R,k0),n=iW(G([k0]),h),m=I(n,g);Z=P,Q=w,W=Q0,J=x,X=j,K=q+1,V=f,Y=R+1,M=L,U=E,F=m,N=v,B=c,C=d}else if(p instanceof D){let h=R-q,d=I(wX(h),g),n=jZ(K0,E,R,n0),m=q-1;Z=e,Q=w,W=S,J=x,X=j,K=m,V=f,Y=R,M=L,U=E,F=d,N=v,B=c,C=n}else{let h=WQ(R-q,k0),d,m=jZ(K0,E,R,n0);d=AZ(m,c,E,R,k0);let W0=d;Z=e,Q=w,W=Q0,J=x,X=j,K=q,V=f,Y=R+1,M=L,U=E,F=I(h,g),N=v,B=c,C=W0}}else{let e=P.head;if(e instanceof v0){let Q0=S.head;if(Q0 instanceof v0){let p=e,i=P.tail,h=Q0,d=S.tail,n=vZ(c,h.mapper),m=_0(E,R,h.key),W0=lW(p.children,p.keyed_children,h.children,h.keyed_children,x0(),0,0,0,R,m,k,k,n,K0),r,J0=W0.patch;if(J0.changes instanceof O)if(J0.children instanceof O)if(J0.removed===0)r=v;else r=I(W0.patch,v);else r=I(W0.patch,v);else r=I(W0.patch,v);let WZ=r;Z=i,Q=w,W=d,J=x,X=j,K=q,V=f,Y=R+1,M=L,U=E,F=g,N=WZ,B=c,C=W0.events}else{let p=e,i=P.tail,h=Q0,d=S.tail,n=WQ(R-q,h),m,r=jZ(K0,E,R,p);m=AZ(r,c,E,R,h);let J0=m;Z=i,Q=w,W=d,J=x,X=j,K=q,V=f,Y=R+1,M=L,U=E,F=I(n,g),N=v,B=c,C=J0}}else if(e instanceof $0){let Q0=S.head;if(Q0 instanceof $0){let p=e,i=Q0;if(p.namespace===i.namespace&&p.tag===i.tag){let h=P.tail,d=S.tail,n=vZ(c,i.mapper),m=_0(E,R,i.key),W0=xY(K0,i.namespace,i.tag,m),r=vX(W0,m,n,K0,p.attributes,i.attributes,k,k),J0,zZ,WZ;J0=r.added,zZ=r.removed,WZ=r.events;let cZ;if(J0 instanceof O&&zZ instanceof O)cZ=k;else cZ=G([cW(J0,zZ)]);let HQ=cZ,FQ=lW(p.children,p.keyed_children,i.children,i.keyed_children,x0(),0,0,0,R,m,HQ,k,n,WZ),xZ,uZ=FQ.patch;if(uZ.changes instanceof O)if(uZ.children instanceof O)if(uZ.removed===0)xZ=v;else xZ=I(FQ.patch,v);else xZ=I(FQ.patch,v);else xZ=I(FQ.patch,v);let v7=xZ;Z=h,Q=w,W=d,J=x,X=j,K=q,V=f,Y=R+1,M=L,U=E,F=g,N=v7,B=c,C=FQ.events}else{let h=e,d=P.tail,n=Q0,m=S.tail,W0=WQ(R-q,n),r,zZ=jZ(K0,E,R,h);r=AZ(zZ,c,E,R,n);let WZ=r;Z=d,Q=w,W=m,J=x,X=j,K=q,V=f,Y=R+1,M=L,U=E,F=I(W0,g),N=v,B=c,C=WZ}}else{let p=e,i=P.tail,h=Q0,d=S.tail,n=WQ(R-q,h),m,r=jZ(K0,E,R,p);m=AZ(r,c,E,R,h);let J0=m;Z=i,Q=w,W=d,J=x,X=j,K=q,V=f,Y=R+1,M=L,U=E,F=I(n,g),N=v,B=c,C=J0}}else if(e instanceof m0){let Q0=S.head;if(Q0 instanceof m0){let p=e,i=Q0;if(p.content===i.content){let h=P.tail,d=S.tail;Z=h,Q=w,W=d,J=x,X=j,K=q,V=f,Y=R+1,M=L,U=E,F=g,N=v,B=c,C=K0}else{let h=P.tail,d=Q0,n=S.tail,m=_W(R,0,G([CX(d.content)]),k);Z=h,Q=w,W=n,J=x,X=j,K=q,V=f,Y=R+1,M=L,U=E,F=g,N=I(m,v),B=c,C=K0}}else{let p=e,i=P.tail,h=Q0,d=S.tail,n=WQ(R-q,h),m,r=jZ(K0,E,R,p);m=AZ(r,c,E,R,h);let J0=m;Z=i,Q=w,W=d,J=x,X=j,K=q,V=f,Y=R+1,M=L,U=E,F=I(n,g),N=v,B=c,C=J0}}else{let Q0=S.head;if(Q0 instanceof hZ){let p=e,i=P.tail,h=Q0,d=S.tail,n=vZ(c,h.mapper),m=_0(E,R,h.key),W0=vX(!1,m,n,K0,p.attributes,h.attributes,k,k),r,J0,zZ;r=W0.added,J0=W0.removed,zZ=W0.events;let WZ;if(r instanceof O&&J0 instanceof O)WZ=k;else WZ=G([cW(r,J0)]);let cZ=WZ,HQ;if(p.inner_html===h.inner_html)HQ=cZ;else HQ=I(qX(h.inner_html),cZ);let xZ=HQ,uZ;if(xZ instanceof O)uZ=v;else uZ=I(_W(R,0,xZ,G([])),v);let m9=uZ;Z=i,Q=w,W=d,J=x,X=j,K=q,V=f,Y=R+1,M=L,U=E,F=g,N=m9,B=c,C=zZ}else{let p=e,i=P.tail,h=Q0,d=S.tail,n=WQ(R-q,h),m,r=jZ(K0,E,R,p);m=AZ(r,c,E,R,h);let J0=m;Z=i,Q=w,W=d,J=x,X=j,K=q,V=f,Y=R+1,M=L,U=E,F=I(n,g),N=v,B=c,C=J0}}}}}}function LQ(Z,Q,W){return lW(G([Q]),x0(),G([W]),x0(),x0(),0,0,0,0,PQ,k,k,Z0,MX(Z))}var{setTimeout:kY,clearTimeout:aW}=globalThis,fY=(Z,Q)=>g0().createElementNS(Z,Q),yY=(Z)=>g0().createTextNode(Z),bY=()=>g0().createDocumentFragment(),wQ=(Z,Q,W)=>Z.insertBefore(Q,W),cX=_J?(Z,Q,W)=>Z.moveBefore(Q,W):wQ,gY=(Z,Q)=>Z.removeChild(Q),hY=(Z,Q)=>Z.getAttribute(Q),uX=(Z,Q,W)=>Z.setAttribute(Q,W),_Y=(Z,Q)=>Z.removeAttribute(Q),vY=(Z,Q,W,J)=>Z.addEventListener(Q,W,J),pX=(Z,Q,W)=>Z.removeEventListener(Q,W),$Y=(Z,Q)=>Z.innerHTML=Q,mY=(Z,Q)=>Z.data=Q,PZ=Symbol("lustre");class iX{constructor(Z,Q,W,J){this.kind=Z,this.key=J,this.parent=Q,this.children=[],this.node=W,this.handlers=new Map,this.throttles=new Map,this.debouncers=new Map}get parentNode(){return this.kind===o0?this.node.parentNode:this.node}}var CZ=(Z,Q,W,J,X)=>{let K=new iX(Z,Q,W,X);return W[PZ]=K,Q?.children.splice(J,0,K),K},cY=(Z)=>{let Q="";for(let W=Z[PZ];W.parent;W=W.parent)if(W.key)Q=`${J8}${W.key}${Q}`;else{let J=W.parent.children.indexOf(W);Q=`${J8}${J}${Q}`}return Q.slice(1)};class tW{#Z=null;#X;#W;#J=!1;constructor(Z,Q,W,{exposeKeys:J=!1}={}){this.#Z=Z,this.#X=Q,this.#W=W,this.#J=J}mount(Z){CZ(eZ,null,this.#Z,0,null),this.#O(this.#Z,null,this.#Z[PZ],0,Z)}push(Z){this.#Q.push({node:this.#Z[PZ],patch:Z}),this.#K()}#Q=[];#K(){let Z=this.#Q;while(Z.length){let{node:Q,patch:W}=Z.pop(),{children:J}=Q,{changes:X,removed:K,children:V}=W;if(JQ(X,(Y)=>this.#V(Q,Y)),K)this.#F(Q,J.length-K,K);JQ(V,(Y)=>{let M=J[Y.index|0];this.#Q.push({node:M,patch:Y})})}}#V(Z,Q){switch(Q.kind){case vW:this.#T(Z,Q);break;case $W:this.#B(Z,Q);break;case mW:this.#z(Z,Q);break;case uW:this.#U(Z,Q);break;case pW:this.#R(Z,Q);break;case dW:this.#H(Z,Q);break;case sW:this.#G(Z,Q);break}}#G(Z,{children:Q,before:W}){let J=bY(),X=this.#M(Z,W);this.#D(J,null,Z,W|0,Q),wQ(Z.parentNode,J,X)}#H(Z,{index:Q,with:W}){this.#F(Z,Q|0,1);let J=this.#M(Z,Q);this.#O(Z.parentNode,J,Z,Q|0,W)}#M(Z,Q){Q=Q|0;let{children:W}=Z,J=W.length;if(Q<J)return W[Q].node;let X=W[J-1];if(!X&&Z.kind!==o0)return null;if(!X)X=Z;while(X.kind===o0&&X.children.length)X=X.children[X.children.length-1];return X.node.nextSibling}#U(Z,{key:Q,before:W}){W=W|0;let{children:J,parentNode:X}=Z,K=J[W].node,V=J[W];for(let F=W+1;F<J.length;++F){let N=J[F];if(J[F]=V,V=N,N.key===Q){J[W]=N;break}}let{kind:Y,node:M,children:U}=V;if(cX(X,M,K),Y===o0)this.#Y(X,U,K)}#Y(Z,Q,W){for(let J=0;J<Q.length;++J){let{kind:X,node:K,children:V}=Q[J];if(cX(Z,K,W),X===o0)this.#Y(Z,V,W)}}#R(Z,{index:Q}){this.#F(Z,Q,1)}#F(Z,Q,W){let{children:J,parentNode:X}=Z,K=J.splice(Q,W);for(let V=0;V<K.length;++V){let{kind:Y,node:M,children:U}=K[V];if(gY(X,M),this.#I(K[V]),Y===o0)K.push(...U)}}#I(Z){let{debouncers:Q,children:W}=Z;for(let{timeout:J}of Q.values())if(J)aW(J);Q.clear(),JQ(W,(J)=>this.#I(J))}#z({node:Z,handlers:Q,throttles:W,debouncers:J},{added:X,removed:K}){JQ(K,({name:V})=>{if(Q.delete(V))pX(Z,V,oW),this.#N(W,V,0),this.#N(J,V,0);else _Y(Z,V),sX[V]?.removed?.(Z,V)}),JQ(X,(V)=>this.#A(Z,V))}#T({node:Z},{content:Q}){mY(Z,Q??"")}#B({node:Z},{inner_html:Q}){$Y(Z,Q??"")}#D(Z,Q,W,J,X){JQ(X,(K)=>this.#O(Z,Q,W,J++,K))}#O(Z,Q,W,J,X){switch(X.kind){case eZ:{let K=this.#S(W,J,X);this.#D(K,null,K[PZ],0,X.children),wQ(Z,K,Q);break}case CQ:{let K=this.#j(W,J,X);wQ(Z,K,Q);break}case o0:{let K=this.#j(W,J,X);wQ(Z,K,Q),this.#D(Z,Q,K[PZ],0,X.children);break}case LW:{let K=this.#S(W,J,X);this.#B({node:K},X),wQ(Z,K,Q);break}}}#S(Z,Q,{kind:W,key:J,tag:X,namespace:K,attributes:V}){let Y=fY(K||r8,X);if(CZ(W,Z,Y,Q,J),this.#J&&J)uX(Y,"data-lustre-key",J);return JQ(V,(M)=>this.#A(Y,M)),Y}#j(Z,Q,{kind:W,key:J,content:X}){let K=yY(X??"");return CZ(W,Z,K,Q,J),K}#A(Z,Q){let{debouncers:W,handlers:J,throttles:X}=Z[PZ],{kind:K,name:V,value:Y,prevent_default:M,debounce:U,throttle:F}=Q;switch(K){case IW:{let N=Y??"";if(V==="virtual:defaultValue"){Z.defaultValue=N;return}else if(V==="virtual:defaultChecked"){Z.defaultChecked=!0;return}else if(V==="virtual:defaultSelected"){Z.defaultSelected=!0;return}if(N!==hY(Z,V))uX(Z,V,N);sX[V]?.added?.(Z,N);break}case zW:Z[V]=Y;break;case NW:{if(J.has(V))pX(Z,V,oW);let N=M.kind===RW;vY(Z,V,oW,{passive:N}),this.#N(X,V,F),this.#N(W,V,U),J.set(V,(B)=>this.#P(Q,B));break}}}#N(Z,Q,W){let J=Z.get(Q);if(W>0)if(J)J.delay=W;else Z.set(Q,{delay:W});else if(J){let{timeout:X}=J;if(X)aW(X);Z.delete(Q)}}#P(Z,Q){let{currentTarget:W,type:J}=Q,{debouncers:X,throttles:K}=W[PZ],V=cY(W),{prevent_default:Y,stop_propagation:M,include:U}=Z;if(Y.kind===t8)Q.preventDefault();if(M.kind===t8)Q.stopPropagation();if(J==="submit")Q.detail??={},Q.detail.formData=[...new FormData(Q.target,Q.submitter).entries()];let F=this.#X(Q,V,J,U),N=K.get(J);if(N){let C=Date.now(),P=N.last||0;if(C>P+N.delay)N.last=C,N.lastEvent=Q,this.#W(Q,F)}let B=X.get(J);if(B)aW(B.timeout),B.timeout=kY(()=>{if(Q===K.get(J)?.lastEvent)return;this.#W(Q,F)},B.delay);if(!N&&!B)this.#W(Q,F)}}var JQ=(Z,Q)=>{if(Array.isArray(Z))for(let W=0;W<Z.length;W++)Q(Z[W]);else if(Z)for(Z;Z.head;Z=Z.tail)Q(Z.head)},oW=(Z)=>{let{currentTarget:Q,type:W}=Z;Q[PZ].handlers.get(W)(Z)},dX=(Z)=>{return{added(Q){Q[Z]=!0},removed(Q){Q[Z]=!1}}},uY=(Z)=>{return{added(Q,W){Q[Z]=W}}},sX={checked:dX("checked"),selected:dX("selected"),value:uY("value"),autofocus:{added(Z){queueMicrotask(()=>{Z.focus?.()})}},autoplay:{added(Z){try{Z.play?.()}catch(Q){console.error(Q)}}}};function pY(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof O)return[X,l(K)];else{let V=J.tail,Y=J.head[0],M=J.head[1],U=XX(Y,M),F;if(Y==="")F=X;else F=tZ(X,Y,U);let N=F,B=I(U,K);Z=V,Q=N,W=B}}}function eW(Z){return pY(Z,x0(),k)}function nX(Z,Q,W){let J=eW(W),X,K;return X=J[0],K=J[1],K8("",Z0,"",Z,Q,K,X,!1,X8(Z,""))}function rX(Z,Q,W,J){let X=eW(J),K,V;return K=X[0],V=X[1],K8("",Z0,Z,Q,W,V,K,!1,X8(Q,Z))}function lX(Z){let Q=eW(Z),W,J;return W=Q[0],J=Q[1],CW("",Z0,J,W)}var aX=(Z)=>{let Q=CZ(eZ,null,Z,0,null),W=0;for(let V=Z.firstChild;V;V=V.nextSibling)if(oX(V))W+=1;if(W===0){let V=g0().createTextNode("");return CZ(CQ,Q,V,0,null),Z.replaceChildren(V),F0()}if(W===1)return Z9(Q,Z).head[1];let J=g0().createTextNode(""),X=CZ(o0,Q,J,0,null),K=Z9(X,Z);return Z.insertBefore(J,Z.firstChild),lX(K)},oX=(Z)=>{switch(Z.nodeType){case l8:return!0;case UW:return!!Z.data;default:return!1}},dY=(Z,Q,W,J)=>{if(!oX(Q))return null;switch(Q.nodeType){case l8:{let X=CZ(eZ,Z,Q,J,W),K=Q.localName,V=Q.namespaceURI,Y=!V||V===r8;if(Y&&sY.includes(K))iY(K,Q);let M=nY(Q),U=Z9(X,Q);return Y?nX(K,M,U):rX(V,K,M,U)}case UW:return CZ(CQ,Z,Q,J,null),K6(Q.data);default:return null}},sY=["input","select","textarea"],iY=(Z,Q)=>{let{value:W,checked:J}=Q;if(Z==="input"&&Q.type==="checkbox"&&!J)return;if(Z==="input"&&Q.type==="radio"&&!J)return;if(Q.type!=="checkbox"&&Q.type!=="radio"&&!W)return;queueMicrotask(()=>{if(Q.value=W,Q.checked=J,Q.dispatchEvent(new Event("input",{bubbles:!0})),Q.dispatchEvent(new Event("change",{bubbles:!0})),g0().activeElement!==Q)Q.dispatchEvent(new Event("blur",{bubbles:!0}))})},Z9=(Z,Q)=>{let W=null,J=Q.firstChild,X=null,K=0;while(J){let V=J.nodeType===l8?J.getAttribute("data-lustre-key"):null;if(V!=null)J.removeAttribute("data-lustre-key");let Y=dY(Z,J,V,K),M=J.nextSibling;if(Y){let U=new r0([V??"",Y],null);if(X)X=X.tail=U;else X=W=U;K+=1}else Q.removeChild(J);J=M}if(!X)return k;return X.tail=k,W},nY=(Z)=>{let Q=Z.attributes.length,W=k;while(Q-- >0){let J=Z.attributes[Q];if(J.name==="xmlns")continue;W=new r0(rY(J),W)}return W},rY=(Z)=>{let{localName:Q,value:W}=Z;return S0(Q,W)};var M8=()=>!!g0();class F6{constructor(Z,[Q,W],J,X){this.root=Z,this.#Z=Q,this.#X=J,this.#W=X,this.root.addEventListener("context-request",(Y)=>{if(!(Y.context&&Y.callback))return;if(!this.#V.has(Y.context))return;Y.stopImmediatePropagation();let M=this.#V.get(Y.context);if(Y.subscribe){let U=()=>{M.subscribers=M.subscribers.filter((F)=>F!==Y.callback)};M.subscribers.push([Y.callback,U]),Y.callback(M.value,U)}else Y.callback(M.value)});let K=(Y,M,U)=>yW(this.#Q,M,U,Y),V=(Y,M)=>{let[U,F]=bW(this.#Q,M);if(this.#Q=U,F.isOk()){let N=F[0];if(N.stop_propagation)Y.stopPropagation();if(N.prevent_default)Y.preventDefault();this.dispatch(N.message,!1)}};this.#K=new tW(this.root,K,V),this.#J=aX(this.root),this.#Q=fW(),this.#I(W),this.#z()}root=null;dispatch(Z,Q=!1){if(this.#G)this.#H.push(Z);else{let[W,J]=this.#W(this.#Z,Z);this.#Z=W,this.#F(J,Q)}}emit(Z,Q){(this.root.host??this.root).dispatchEvent(new CustomEvent(Z,{detail:Q,bubbles:!0,composed:!0}))}provide(Z,Q){if(!this.#V.has(Z))this.#V.set(Z,{value:Q,subscribers:[]});else{let W=this.#V.get(Z);if(t0(W.value,Q))return;W.value=Q;for(let J=W.subscribers.length-1;J>=0;J--){let[X,K]=W.subscribers[J];if(!X){W.subscribers.splice(J,1);continue}X(Q,K)}}}#Z;#X;#W;#J;#Q;#K;#V=new Map;#G=!1;#H=[];#M=k;#U=k;#Y=null;#R={dispatch:(Z)=>this.dispatch(Z),emit:(Z,Q)=>this.emit(Z,Q),select:()=>{},root:()=>this.root,provide:(Z,Q)=>this.provide(Z,Q)};#F(Z,Q=!1){if(this.#I(Z),!this.#Y)if(Q)this.#Y="sync",queueMicrotask(()=>this.#z());else this.#Y=requestAnimationFrame(()=>this.#z())}#I(Z){this.#G=!0;while(!0){for(let W=Z.synchronous;W.tail;W=W.tail)W.head(this.#R);if(this.#M=eX(this.#M,Z.before_paint),this.#U=eX(this.#U,Z.after_paint),!this.#H.length)break;let Q=this.#H.shift();[this.#Z,Z]=this.#W(this.#Z,Q)}this.#G=!1}#z(){this.#Y=null;let Z=this.#X(this.#Z),{patch:Q,events:W}=LQ(this.#Q,this.#J,Z);if(this.#Q=W,this.#J=Z,this.#K.push(Q),this.#M instanceof r0){let J=tX(this.#M);this.#M=k,queueMicrotask(()=>{this.#F(J,!0)})}if(this.#U instanceof r0){let J=tX(this.#U);this.#U=k,requestAnimationFrame(()=>{this.#F(J,!0)})}}}function tX(Z){return{synchronous:Z,after_paint:k,before_paint:k}}function eX(Z,Q){if(Z instanceof O)return Q;else if(Q instanceof O)return Z;else return E0(Z,Q)}class W9 extends H{constructor(Z){super();this.message=Z}}class J9 extends H{constructor(Z){super();this.callback=Z}}class X9 extends H{constructor(Z){super();this.callback=Z}}class mZ extends H{constructor(Z){super();this.message=Z}}class XQ extends H{constructor(Z,Q){super();this.name=Z,this.data=Q}}class I6 extends H{constructor(Z,Q){super();this.key=Z,this.value=Q}}class KQ extends H{}class QK extends H{constructor(Z,Q,W,J,X,K,V,Y,M,U){super();this.open_shadow_root=Z,this.adopt_styles=Q,this.delegates_focus=W,this.attributes=J,this.properties=X,this.contexts=K,this.is_form_associated=V,this.on_form_autofill=Y,this.on_form_reset=M,this.on_form_restore=U}}function WK(Z){let Q=new QK(!0,!0,!1,k,k,k,!1,a8,a8,a8);return O0(Z,Q,(W,J)=>{return J.apply(W)})}class XK{#Z;constructor(Z,[Q,W],J,X){this.#Z=new F6(Z,[Q,W],X,J)}send(Z){switch(Z.constructor){case mZ:{this.dispatch(Z.message,!1);break}case XQ:{this.emit(Z.name,Z.data);break}case KQ:break}}dispatch(Z){this.#Z.dispatch(Z)}emit(Z,Q){this.#Z.emit(Z,Q)}}var KK=({init:Z,update:Q,view:W},J,X)=>{if(!M8())return new A(new U8);let K=J instanceof HTMLElement?J:g0().querySelector(J);if(!K)return new A(new K9(J));return new D(new XK(K,Z(X),Q,W))};class lY{#Z;#X;#W;#J;#Q;#K;#V=RQ();#G=new Set;constructor([Z,Q],W,J,X){this.#Z=Z,this.#X=W,this.#W=J,this.#J=X,this.#Q=this.#W(this.#Z),this.#K=gW(this.#Q),this.#Y(Q)}send(Z){switch(Z.constructor){case W9:{let{message:Q}=Z,W=this.#H(Q),J=LQ(this.#K,this.#Q,W);this.#Q=W,this.#K=J.events,this.broadcast(rW(J.patch));return}case J9:{let{callback:Q}=Z;this.#G.add(Q),Q(bX(this.#J.open_shadow_root,this.#J.adopt_styles,lQ(this.#J.attributes),lQ(this.#J.properties),lQ(this.#J.contexts),this.#V,this.#Q));return}case X9:{let{callback:Q}=Z;this.#G.delete(Q);return}case mZ:{let{message:Q}=Z,[W,J]=this.#X(this.#Z,Q),X=this.#W(W),K=LQ(this.#K,this.#Q,X);this.#Y(J),this.#Z=W,this.#Q=X,this.#K=K.events,this.broadcast(rW(K.patch));return}case XQ:{let{name:Q,data:W}=Z;this.broadcast(gX(Q,W));return}case I6:{let{key:Q,value:W}=Z,J=DZ(this.#V,Q);if(J.isOk()&&t0(J[0],W))return;this.#V=sQ(this.#V,Q,W),this.broadcast(hX(Q,W));return}case KQ:{this.#Z=null,this.#X=null,this.#W=null,this.#J=null,this.#Q=null,this.#K=null,this.#V=null,this.#G.clear();return}default:return}}broadcast(Z){for(let Q of this.#G)Q(Z)}#H(Z){switch(Z.constructor){case Y6:{let{messages:Q}=Z,W=this.#Z,J=s();for(let X=Q;X.head;X=X.tail){let K=this.#H(X.head);if(K instanceof D){W=K[0][0],J=oZ(j0.fromArray([J,K[0][1]]));break}}return this.#Y(J),this.#Z=W,this.#W(this.#Z)}case G6:{let{name:Q,value:W}=Z,J=this.#M(Q,W);if(J instanceof A)return this.#Q;else{let[X,K]=this.#X(this.#Z,J[0]);return this.#Y(K),this.#Z=X,this.#W(this.#Z)}}case M6:{let{name:Q,value:W}=Z,J=this.#U(Q,W);if(J instanceof A)return this.#Q;else{let[X,K]=this.#X(this.#Z,J[0]);return this.#Y(K),this.#Z=X,this.#W(this.#Z)}}case U6:{let{path:Q,name:W,event:J}=Z,[X,K]=J6(this.#K,Q,W,J);if(this.#K=X,K instanceof A)return this.#Q;else{let[V,Y]=this.#X(this.#Z,K[0].message);return this.#Y(Y),this.#Z=V,this.#W(this.#Z)}}case nW:{let{key:Q,value:W}=Z,J=DZ(this.#J.contexts,Q);if(J instanceof A)return this.#Q;if(J=OZ(W,J[0]),J instanceof A)return this.#Q;let[X,K]=this.#X(this.#Z,J[0]);return this.#Y(K),this.#Z=X,this.#W(this.#Z)}}}#M(Z,Q){let W=DZ(this.#J.attributes,Z);switch(W.constructor){case D:return W[0](Q);case A:return new A(void 0)}}#U(Z,Q){let W=DZ(this.#J.properties,Z);switch(W.constructor){case D:return W[0](Q);case A:return new A(void 0)}}#Y(Z){let Q=(V)=>this.send(new mZ(V)),W=(V,Y)=>this.send(new XQ(V,Y)),J=()=>{return},X=()=>{return},K=(V,Y)=>this.send(new I6(V,Y));globalThis.queueMicrotask(()=>{eJ(Z,Q,W,J,X,K)})}}class VK extends H{constructor(Z,Q,W,J){super();this.init=Z,this.update=Q,this.view=W,this.config=J}}class K9 extends H{constructor(Z){super();this.selector=Z}}class U8 extends H{}function YK(Z,Q,W){return new VK(Z,Q,W,WK(k))}function GK(Z,Q,W){return XW(!M8(),new A(new U8),()=>{return KK(Z,Q,W)})}class $ extends H{constructor(Z,Q,W,J,X,K,V){super();this.scheme=Z,this.userinfo=Q,this.host=W,this.port=J,this.path=X,this.query=K,this.fragment=V}}function eY(Z){return 48>=Z&&Z<=57||65>=Z&&Z<=90||97>=Z&&Z<=122||Z===58||Z===46}function ZZ(Z,Q){return new D(new $(Q.scheme,Q.userinfo,Q.host,Q.port,Q.path,Q.query,new T(Z)))}function Z5(Z,Q,W,J){while(!0){let X=Z,K=Q,V=W,Y=J;if(K.startsWith("#"))if(Y===0){let M=K.slice(1);return ZZ(M,V)}else{let M=K.slice(1),U=H0(X,0,Y),F=new $(V.scheme,V.userinfo,V.host,V.port,V.path,new T(U),V.fragment);return ZZ(M,F)}else if(K==="")return new D(new $(V.scheme,V.userinfo,V.host,V.port,V.path,new T(X),V.fragment));else{let M=nZ(K),U;U=M[1],Z=X,Q=U,W=V,J=Y+1}}}function qZ(Z,Q){return Z5(Z,Z,Q,0)}function Q5(Z,Q,W,J){while(!0){let X=Z,K=Q,V=W,Y=J;if(K.startsWith("?")){let M=K.slice(1),U=H0(X,0,Y),F=new $(V.scheme,V.userinfo,V.host,V.port,U,V.query,V.fragment);return qZ(M,F)}else if(K.startsWith("#")){let M=K.slice(1),U=H0(X,0,Y),F=new $(V.scheme,V.userinfo,V.host,V.port,U,V.query,V.fragment);return ZZ(M,F)}else if(K==="")return new D(new $(V.scheme,V.userinfo,V.host,V.port,X,V.query,V.fragment));else{let M=nZ(K),U;U=M[1],Z=X,Q=U,W=V,J=Y+1}}}function VQ(Z,Q){return Q5(Z,Z,Q,0)}function UZ(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J.startsWith("0"))Z=J.slice(1),Q=X,W=K*10;else if(J.startsWith("1"))Z=J.slice(1),Q=X,W=K*10+1;else if(J.startsWith("2"))Z=J.slice(1),Q=X,W=K*10+2;else if(J.startsWith("3"))Z=J.slice(1),Q=X,W=K*10+3;else if(J.startsWith("4"))Z=J.slice(1),Q=X,W=K*10+4;else if(J.startsWith("5"))Z=J.slice(1),Q=X,W=K*10+5;else if(J.startsWith("6"))Z=J.slice(1),Q=X,W=K*10+6;else if(J.startsWith("7"))Z=J.slice(1),Q=X,W=K*10+7;else if(J.startsWith("8"))Z=J.slice(1),Q=X,W=K*10+8;else if(J.startsWith("9"))Z=J.slice(1),Q=X,W=K*10+9;else if(J.startsWith("?")){let V=J.slice(1),Y=new $(X.scheme,X.userinfo,X.host,new T(K),X.path,X.query,X.fragment);return qZ(V,Y)}else if(J.startsWith("#")){let V=J.slice(1),Y=new $(X.scheme,X.userinfo,X.host,new T(K),X.path,X.query,X.fragment);return ZZ(V,Y)}else if(J.startsWith("/")){let V=new $(X.scheme,X.userinfo,X.host,new T(K),X.path,X.query,X.fragment);return VQ(J,V)}else if(J==="")return new D(new $(X.scheme,X.userinfo,X.host,new T(K),X.path,X.query,X.fragment));else return new A(void 0)}}function z6(Z,Q){if(Z.startsWith(":0")){let W=Z.slice(2);return UZ(W,Q,0)}else if(Z.startsWith(":1")){let W=Z.slice(2);return UZ(W,Q,1)}else if(Z.startsWith(":2")){let W=Z.slice(2);return UZ(W,Q,2)}else if(Z.startsWith(":3")){let W=Z.slice(2);return UZ(W,Q,3)}else if(Z.startsWith(":4")){let W=Z.slice(2);return UZ(W,Q,4)}else if(Z.startsWith(":5")){let W=Z.slice(2);return UZ(W,Q,5)}else if(Z.startsWith(":6")){let W=Z.slice(2);return UZ(W,Q,6)}else if(Z.startsWith(":7")){let W=Z.slice(2);return UZ(W,Q,7)}else if(Z.startsWith(":8")){let W=Z.slice(2);return UZ(W,Q,8)}else if(Z.startsWith(":9")){let W=Z.slice(2);return UZ(W,Q,9)}else if(Z===":")return new D(Q);else if(Z==="")return new D(Q);else if(Z.startsWith("?")){let W=Z.slice(1);return qZ(W,Q)}else if(Z.startsWith(":?")){let W=Z.slice(2);return qZ(W,Q)}else if(Z.startsWith("#")){let W=Z.slice(1);return ZZ(W,Q)}else if(Z.startsWith(":#")){let W=Z.slice(2);return ZZ(W,Q)}else if(Z.startsWith("/"))return VQ(Z,Q);else if(Z.startsWith(":")){let W=Z.slice(1);if(W.startsWith("/"))return VQ(W,Q);else return new A(void 0)}else return new A(void 0)}function UK(Z,Q,W,J){while(!0){let X=Z,K=Q,V=W,Y=J;if(K==="")return new D(new $(V.scheme,V.userinfo,new T(X),V.port,V.path,V.query,V.fragment));else if(K.startsWith(":")){let M=H0(X,0,Y),U=new $(V.scheme,V.userinfo,new T(M),V.port,V.path,V.query,V.fragment);return z6(K,U)}else if(K.startsWith("/")){let M=H0(X,0,Y),U=new $(V.scheme,V.userinfo,new T(M),V.port,V.path,V.query,V.fragment);return VQ(K,U)}else if(K.startsWith("?")){let M=K.slice(1),U=H0(X,0,Y),F=new $(V.scheme,V.userinfo,new T(U),V.port,V.path,V.query,V.fragment);return qZ(M,F)}else if(K.startsWith("#")){let M=K.slice(1),U=H0(X,0,Y),F=new $(V.scheme,V.userinfo,new T(U),V.port,V.path,V.query,V.fragment);return ZZ(M,F)}else{let M=nZ(K),U;U=M[1],Z=X,Q=U,W=V,J=Y+1}}}function W5(Z,Q,W,J){while(!0){let X=Z,K=Q,V=W,Y=J;if(K==="")return new D(new $(V.scheme,V.userinfo,new T(K),V.port,V.path,V.query,V.fragment));else if(K.startsWith("]"))if(Y===0){let M=K.slice(1);return z6(M,V)}else{let M=K.slice(1),U=H0(X,0,Y+1),F=new $(V.scheme,V.userinfo,new T(U),V.port,V.path,V.query,V.fragment);return z6(M,F)}else if(K.startsWith("/"))if(Y===0)return VQ(K,V);else{let M=H0(X,0,Y),U=new $(V.scheme,V.userinfo,new T(M),V.port,V.path,V.query,V.fragment);return VQ(K,U)}else if(K.startsWith("?"))if(Y===0){let M=K.slice(1);return qZ(M,V)}else{let M=K.slice(1),U=H0(X,0,Y),F=new $(V.scheme,V.userinfo,new T(U),V.port,V.path,V.query,V.fragment);return qZ(M,F)}else if(K.startsWith("#"))if(Y===0){let M=K.slice(1);return ZZ(M,V)}else{let M=K.slice(1),U=H0(X,0,Y),F=new $(V.scheme,V.userinfo,new T(U),V.port,V.path,V.query,V.fragment);return ZZ(M,F)}else{let M=nZ(K),U,F;if(U=M[0],F=M[1],eY(U))Z=X,Q=F,W=V,J=Y+1;else return UK(X,X,V,0)}}}function J5(Z,Q){return W5(Z,Z,Q,0)}function X5(Z,Q){return UK(Z,Z,Q,0)}function EQ(Z,Q){if(Z.startsWith("["))return J5(Z,Q);else if(Z.startsWith(":")){let W=new $(Q.scheme,Q.userinfo,new T(""),Q.port,Q.path,Q.query,Q.fragment);return z6(Z,W)}else if(Z==="")return new D(new $(Q.scheme,Q.userinfo,new T(""),Q.port,Q.path,Q.query,Q.fragment));else return X5(Z,Q)}function K5(Z,Q,W,J){while(!0){let X=Z,K=Q,V=W,Y=J;if(K.startsWith("@"))if(Y===0){let M=K.slice(1);return EQ(M,V)}else{let M=K.slice(1),U=H0(X,0,Y),F=new $(V.scheme,new T(U),V.host,V.port,V.path,V.query,V.fragment);return EQ(M,F)}else if(K==="")return EQ(X,V);else if(K.startsWith("/"))return EQ(X,V);else if(K.startsWith("?"))return EQ(X,V);else if(K.startsWith("#"))return EQ(X,V);else{let M=nZ(K),U;U=M[1],Z=X,Q=U,W=V,J=Y+1}}}function V5(Z,Q){return K5(Z,Z,Q,0)}function V9(Z,Q){if(Z==="//")return new D(new $(Q.scheme,Q.userinfo,new T(""),Q.port,Q.path,Q.query,Q.fragment));else if(Z.startsWith("//")){let W=Z.slice(2);return V5(W,Q)}else return VQ(Z,Q)}function Y5(Z,Q,W,J){while(!0){let X=Z,K=Q,V=W,Y=J;if(K.startsWith("/"))if(Y===0)return V9(K,V);else{let M=H0(X,0,Y),U=new $(new T(N0(M)),V.userinfo,V.host,V.port,V.path,V.query,V.fragment);return V9(K,U)}else if(K.startsWith("?"))if(Y===0){let M=K.slice(1);return qZ(M,V)}else{let M=K.slice(1),U=H0(X,0,Y),F=new $(new T(N0(U)),V.userinfo,V.host,V.port,V.path,V.query,V.fragment);return qZ(M,F)}else if(K.startsWith("#"))if(Y===0){let M=K.slice(1);return ZZ(M,V)}else{let M=K.slice(1),U=H0(X,0,Y),F=new $(new T(N0(U)),V.userinfo,V.host,V.port,V.path,V.query,V.fragment);return ZZ(M,F)}else if(K.startsWith(":"))if(Y===0)return new A(void 0);else{let M=K.slice(1),U=H0(X,0,Y),F=new $(new T(N0(U)),V.userinfo,V.host,V.port,V.path,V.query,V.fragment);return V9(M,F)}else if(K==="")return new D(new $(V.scheme,V.userinfo,V.host,V.port,X,V.query,V.fragment));else{let M=nZ(K),U;U=M[1],Z=X,Q=U,W=V,J=Y+1}}}function HK(Z){let Q,W=Z.fragment;if(W instanceof T){let R=W[0];Q=G(["#",R])}else Q=G([]);let J=Q,X,K=Z.query;if(K instanceof T){let R=K[0];X=I("?",I(R,J))}else X=J;let V=X,Y=I(Z.path,V),M,U=Z.host,F=fZ(Z.path,"/");if(U instanceof T&&!F)if(U[0]!=="")M=I("/",Y);else M=Y;else M=Y;let N=M,B,C=Z.host,P=Z.port;if(C instanceof T&&P instanceof T){let R=P[0];B=I(":",I(X0(R),N))}else B=N;let w=B,S,x=Z.scheme,j=Z.userinfo,q=Z.host;if(x instanceof T)if(j instanceof T)if(q instanceof T){let R=x[0],L=j[0],E=q[0];S=I(R,I("://",I(L,I("@",I(E,w)))))}else{let R=x[0];S=I(R,I(":",w))}else if(q instanceof T){let R=x[0],L=q[0];S=I(R,I("://",I(L,w)))}else{let R=x[0];S=I(R,I(":",w))}else if(j instanceof y&&q instanceof T){let R=q[0];S=I("//",I(R,w))}else S=w;return nQ(S)}var G5=new $(new y,new y,new y,new y,"",new y,new y);function H8(Z){return Y5(Z,Z,G5,0)}class N6 extends H{}class R6 extends H{}class FK extends H{}class IK extends H{}class zK extends H{}class NK extends H{}class RK extends H{}class DK extends H{}class OK extends H{}class G9 extends H{}class D6 extends H{}function BK(Z){if(Z instanceof N6)return"GET";else if(Z instanceof R6)return"POST";else if(Z instanceof FK)return"HEAD";else if(Z instanceof IK)return"PUT";else if(Z instanceof zK)return"DELETE";else if(Z instanceof NK)return"TRACE";else if(Z instanceof RK)return"CONNECT";else if(Z instanceof DK)return"OPTIONS";else if(Z instanceof OK)return"PATCH";else return Z[0]}function SK(Z){if(Z instanceof G9)return"http";else return"https"}function jK(Z){let Q=N0(Z);if(Q==="http")return new D(new G9);else if(Q==="https")return new D(new D6);else return new A(void 0)}class F8 extends H{constructor(Z,Q,W,J,X,K,V,Y){super();this.method=Z,this.headers=Q,this.body=W,this.scheme=J,this.host=X,this.port=K,this.path=V,this.query=Y}}function TK(Z){return new $(new T(SK(Z.scheme)),new y,new T(Z.host),Z.port,Z.path,Z.query,new y)}function U9(Z){return T0((()=>{let Q=Z.scheme,W=n9(Q,"");return jK(W)})(),(Q)=>{return T0((()=>{let W=Z.host;return $6(W,void 0)})(),(W)=>{let J=new F8(new N6,G([]),"",Q,W,Z.port,Z.path,Z.query);return new D(J)})})}function PK(Z,Q,W){let J=ZW(Z.headers,N0(Q),W);return new F8(Z.method,J,Z.body,Z.scheme,Z.host,Z.port,Z.path,Z.query)}function CK(Z,Q){return new F8(Z.method,Z.headers,Q,Z.scheme,Z.host,Z.port,Z.path,Z.query)}function qK(Z,Q){return new F8(Q,Z.headers,Z.body,Z.scheme,Z.host,Z.port,Z.path,Z.query)}class H9 extends H{constructor(Z,Q,W){super();this.status=Z,this.headers=Q,this.body=W}}function F9(Z,Q){return e6(Z.headers,N0(Q))}class YQ{constructor(Z){this.promise=Z}static wrap(Z){return Z instanceof Promise?new YQ(Z):Z}static unwrap(Z){return Z instanceof YQ?Z.promise:Z}}function B6(Z){return Promise.resolve(YQ.wrap(Z))}function EK(Z,Q){return Z.then((W)=>Q(YQ.unwrap(W)))}function I8(Z,Q){return Z.then((W)=>YQ.wrap(Q(YQ.unwrap(W))))}function xK(Z,Q){return I8(Z,(J)=>{return Q(J),J})}function S6(Z,Q){return EK(Z,(J)=>{if(J instanceof D){let X=J[0];return Q(X)}else{let X=J[0];return B6(new A(X))}})}async function kK(Z){try{return new D(await fetch(Z))}catch(Q){return new A(new z8(Q.toString()))}}function fK(Z){return new H9(Z.status,j0.fromArray([...Z.headers]),Z)}function z5(Z){let Q=HK(TK(Z)),W=BK(Z.method).toUpperCase(),J={headers:N5(Z.headers),method:W};return[Q,J]}function yK(Z){let[Q,W]=z5(Z);if(W.method!=="GET"&&W.method!=="HEAD")W.body=Z.body;return new globalThis.Request(Q,W)}function N5(Z){let Q=new globalThis.Headers;for(let[W,J]of Z)Q.append(W.toLowerCase(),J);return Q}async function z9(Z){let Q;try{Q=await Z.body.text()}catch(W){return new A(new N8)}return new D(Z.withFields({body:Q}))}class z8 extends H{constructor(Z){super();this[0]=Z}}class N8 extends H{}function bK(Z){let W=yK(Z),J=kK(W);return S6(J,(X)=>{return B6(new D(fK(X)))})}var N9=(Z)=>{if(!globalThis.location)return new A(void 0);let Q=new URL(Z,globalThis.location.href),W=S5(Q);return new D(W)},S5=(Z)=>{let Q=(W)=>W?new T(W):new y;return new $(Q(Z.protocol?.slice(0,-1)),new y,Q(Z.hostname),Q(Z.port&&Number(Z.port)),Z.pathname,Q(Z.search?.slice(1)),Q(Z.hash?.slice(1)))};class R8 extends H{}class kQ extends H{constructor(Z){super();this[0]=Z}}class A6 extends H{constructor(Z){super();this[0]=Z}}class T6 extends H{constructor(Z){super();this[0]=Z}}class P6 extends H{}class xQ extends H{constructor(Z){super();this[0]=Z}}class hK extends H{constructor(Z){super();this.run=Z}}function _K(Z){return new hK((Q)=>{return Z(T0(Q,(W)=>{let J=W.status,X=J;if(X>=200&&X<300)return new D(W);else{let K=J;if(K>=400&&K<600)return new A(new A6(W));else return new A(new xQ(W))}}))})}function j5(Z){return _K((Q)=>{return Z(T0(Q,(W)=>{let J=F9(W,"content-type");if(J instanceof D){let X=J[0];if(X==="application/json")return new D(W);else if(X.startsWith("application/json;"))return new D(W);else return new A(new xQ(W))}else return new A(new xQ(W))}))})}function A5(Z){return _K((Q)=>{return Z(T0(Q,(W)=>{let J=F9(W,"content-type");if(J instanceof D)if(J[0].startsWith("text/"))return new D(W);else return new A(new xQ(W));else return new A(new xQ(W))}))})}function vK(Z){return A5((Q)=>{let J=BQ(Q,(X)=>{return X.body});return Z(J)})}function T5(Z,Q){return gZ((W)=>{let J=bK(Z),X=S6(J,z9),K=I8(X,(Y)=>{return rZ(Y,(M)=>{if(M instanceof z8)return new P6;else if(M instanceof N8)return new R8;else return new R8})}),V=I8(K,Q.run);xK(V,W);return})}function $K(Z,Q){return T5(Z,Q)}function j6(Z,Q){return gZ((W)=>{let J=new A(Z),X=Q.run(J);return W(X)})}function P5(Z,Q){let W=Z.body,J=YW(W,Q);return rZ(J,(X)=>{return new T6(X)})}function mK(Z,Q){return j5((W)=>{let X=T0(W,(K)=>{return P5(K,Z)});return Q(X)})}function cK(Z){let Q;if(Z.startsWith("./"))Q=N9(Z);else if(Z.startsWith("/"))Q=N9(Z);else Q=H8(Z);return i8(Q,new kQ(Z))}function uK(Z,Q){let W=cK(Z);if(W instanceof D){let J=W[0],X=U9(J),K=BQ(X,(Y)=>{return $K(Y,Q)}),V=rZ(K,(Y)=>{return j6(new kQ(Z),Q)});return JW(V)}else{let J=W[0];return j6(J,Q)}}function pK(Z,Q,W){let J=cK(Z);if(J instanceof D){let X=J[0],K=U9(X),V=BQ(K,(M)=>{let F=qK(M,new R6),N=PK(F,"content-type","application/json"),B=CK(N,GW(Q));return $K(B,W)}),Y=rZ(V,(M)=>{return j6(new kQ(Z),W)});return JW(Y)}else{let X=J[0];return j6(X,W)}}function dK(Z){window.clearInterval(Z)}function sK(){if(window.matchMedia("(prefers-color-scheme: dark)").matches)return!0;else return!1}function iK(){window.scrollTo(0,0)}function nK(Z,Q){return window.setInterval(Q,Z)}class GQ extends H{constructor(Z,Q,W){super();this.active=Z,this.custom=Q,this.random=W}}class HZ extends H{constructor(Z){super();this[0]=Z}}class D8 extends H{constructor(Z,Q){super();this.goal=Z,this.start=Q}}function rK(Z){return Z.active}function lK(Z){return new GQ(Z.custom,Z.custom,Z.random)}function aK(Z){return new GQ(Z.random,Z.custom,Z.random)}function q6(Z){return Z.custom}function D9(Z){return new HZ(Z)}function O9(Z){return Z.goal}function L6(Z){let W=rK(Z);return O9(W)}function oK(Z){let W=q6(Z);return O9(W)}function C6(){let Z=new HZ(""),Q=new HZ("");return new D8(Z,Q)}function tK(){return new GQ(C6(),C6(),C6())}function eK(Z){return new GQ(Z.active,Z.custom,C6())}function Z7(Z){return Z.random}function Q7(Z){let W=Z7(Z);return O9(W)}function B9(Z){return Z.start}function w6(Z){let W=rK(Z);return B9(W)}function E6(Z){let W=q6(Z);return B9(W)}function x6(Z){let W=Z7(Z);return B9(W)}function W7(Z,Q){return new GQ(Q.active,Z,Q.random)}function C5(Z,Q){return new D8(Q,Z.start)}function J7(Z,Q){let J=q6(Z),X=C5(J,Q);return W7(X,Z)}function X7(Z,Q,W){return new GQ(Z.active,Z.custom,new D8(Q,W))}function q5(Z,Q){return new D8(Z.goal,Q)}function K7(Z,Q){let J=q6(Z),X=q5(J,Q);return W7(X,Z)}class O8 extends H{}class B8 extends H{constructor(Z){super();this[0]=Z}}class S8 extends H{}class j8 extends H{constructor(Z){super();this[0]=Z}}class yQ extends H{constructor(Z){super();this[0]=Z}}class A8 extends H{}class T8 extends H{}class MQ extends H{constructor(Z){super();this[0]=Z}}class P8 extends H{constructor(Z){super();this[0]=Z}}class C8 extends H{}class q8 extends H{}class L8 extends H{}class bQ extends H{}class w8 extends H{}class E8 extends H{}class x8 extends H{}class LZ extends H{constructor(Z){super();this[0]=Z}}class k8 extends H{}class f8 extends H{}class y8 extends H{constructor(Z){super();this[0]=Z}}class b8 extends H{}class g8 extends H{}class k6 extends H{constructor(Z){super();this[0]=Z}}function y6(Z){return gZ((Q)=>{let W=sK();return Q(Z(W))})}function S9(Z){return gZ((Q)=>{return iK(),Q(Z)})}function j9(Z,Q,W){return gZ((J)=>{let X=nK(Z,()=>{return J(W)});return J(Q(X))})}function A9(Z,Q){return gZ((W)=>{return dK(Z),W(Q)})}var L5="/api/wikipage";function UQ(Z,Q){let W=aQ(G([["subject",lZ(Z)]])),J=vK(Q);return pK(L5,W,J)}var w5="/api/specialrandom";function h8(Z){let Q=rQ("goal",GZ,(J)=>{return rQ("start",GZ,(X)=>{let K=new HZ(J),V=new HZ(X);return dZ([K,V])})}),W=mK(Q,Z);return uK(w5,W)}class gQ extends H{constructor(Z,Q){super();this.left=Z,this.right=Q}}function T9(){return new gQ(G([]),G([]))}function Y7(Z){let Q=Z.right;if(Q instanceof O)return[Z,""];else{let W=Q.tail;if(W instanceof O)return[Z,""];else{let J=Q.head,X=W.head,K=W.tail;return[new gQ(I(J,Z.left),K),X]}}}function G7(Z){let Q=Z.left;if(Q instanceof O)return[Z,""];else{let W=Q.tail;if(W instanceof O){let J=Q.head;return[new gQ(G([]),Z.right),J]}else{let J=Q.head,X=W.head,K=W.tail;return[new gQ(I(X,K),Z.right),J]}}}function M7(Z){let{right:Q,left:W}=Z;if(Q instanceof O)if(W instanceof O)return[!1,!1];else if(W.tail instanceof O)return[!1,!0];else return[!1,!0];else if(W instanceof O)if(Q.tail instanceof O)return[!1,!1];else return[!0,!1];else if(Q.tail instanceof O)if(W.tail instanceof O)return[!1,!0];else return[!1,!0];else if(W.tail instanceof O)return[!0,!0];else return[!0,!0]}function U7(Z,Q){return new gQ(Q.left,I(Z,Q.right))}class u extends H{constructor(Z,Q,W,J,X,K,V,Y,M,U,F,N){super();this.dark=Z,this.elapsed=Q,this.endpoints=W,this.goal_error=J,this.navigation=X,this.pending=K,this.rsvp_error=V,this.start_error=Y,this.state=M,this.steps=U,this.timer_id=F,this.wiki_html=N}}class hQ extends H{}class FZ extends H{}class _Q extends H{}class QZ extends H{}class wZ extends H{}class vQ extends H{}class EZ extends H{}function C9(){return new u(!1,0,tK(),new y,T9(),"",new y,new y,new hQ,0,0,"")}function H7(Z){return[C9(),oZ(G([h8((Q)=>{return new MQ(Q)}),y6((Q)=>{return new yQ(Q)})]))]}function F7(Z){return new u(Z.dark,0,Z.endpoints,new y,T9(),(()=>{let Q,W=Z.endpoints;Q=w6(W);let J=Q,X;return X=J[0],X})(),new y,new y,new EZ,0,0,"")}function z7(Z,Q){return Z.lastIndex=0,Z.test(Q)}function N7(Z,Q){try{let W="gu";if(Q.case_insensitive)W+="i";if(Q.multi_line)W+="m";return new D(new RegExp(Z,W))}catch(W){let J=(W.columnNumber||0)|0;return new A(new q9(W.message,J))}}class q9 extends H{constructor(Z,Q){super();this.error=Z,this.byte_index=Q}}class R7 extends H{constructor(Z,Q){super();this.case_insensitive=Z,this.multi_line=Q}}function E5(Z,Q){return N7(Z,Q)}function D7(Z){return E5(Z,new R7(!1,!1))}function O7(Z,Q){return z7(Z,Q)}function k5(Z,Q){if(Z.state instanceof QZ){let J=H8(Q);if(J instanceof D){let X=J[0];if(fZ(X.path,"/wiki/"))return[new u(Z.dark,Z.elapsed,Z.endpoints,Z.goal_error,Z.navigation,X.path,Z.rsvp_error,Z.start_error,Z.state,Z.steps+1,Z.timer_id,Z.wiki_html),UQ(X.path,(V)=>{return new LZ(V)})];else return[Z,s()]}else return[Z,s()]}else return[Z,s()]}function L9(Z){let Q=D7("^[a-zA-Z0-9-._~()]+$");if(Q instanceof D){let W=Q[0];if(iQ(Z))return new A("field cannot be empty");else if(O7(W,Z))return new D(void 0);else return new A("only valid characters are a-zA-Z0-9-._~")}else{let W=Q[0];return new A(W.error)}}function B7(Z){if(Z instanceof R8)return"The server sent a response with a bad body.";else if(Z instanceof kQ)return"The URL "+Z[0]+" is invalid.";else if(Z instanceof A6){let Q=Z[0];return"There was an HTTP error: "+X0(Q.status)}else if(Z instanceof T6)return"There was an error decoding the JSON response from the server.";else if(Z instanceof P6)return"There was a network error. Please check your internet connection.";else return"The server sent a response that could not be handled."}function S7(Z,Q,W){let J=L9(Q);if(J instanceof D){let X;if(W){let Y=Z.endpoints;X=K7(Y,D9(Q))}else{let Y=Z.endpoints;X=J7(Y,D9(Q))}let K=X;return[new u(Z.dark,Z.elapsed,K,(()=>{if(W)return Z.goal_error;else return new y})(),Z.navigation,Z.pending,Z.rsvp_error,(()=>{if(W)return new y;else return Z.start_error})(),Z.state,Z.steps,Z.timer_id,Z.wiki_html),s()]}else{let X=J[0],K;if(W)K=new u(Z.dark,Z.elapsed,Z.endpoints,Z.goal_error,Z.navigation,Z.pending,Z.rsvp_error,new T(X),Z.state,Z.steps,Z.timer_id,Z.wiki_html);else K=new u(Z.dark,Z.elapsed,Z.endpoints,new T(X),Z.navigation,Z.pending,Z.rsvp_error,Z.start_error,Z.state,Z.steps,Z.timer_id,Z.wiki_html);return[K,s()]}}function j7(Z,Q){if(Q instanceof O8){let W;{let X,K=Z.endpoints;X=E6(K);let V=X,Y;Y=V[0],W="/wiki/"+Y}let J=W;return[new u(Z.dark,Z.elapsed,(()=>{let X=Z.endpoints;return lK(X)})(),Z.goal_error,Z.navigation,J,Z.rsvp_error,Z.start_error,new EZ,Z.steps,Z.timer_id,Z.wiki_html),UQ(J,(X)=>{return new LZ(X)})]}else if(Q instanceof B8){let W=Q[0],J=L9(W);if(J instanceof D)return S7(Z,W,!1);else{let X=J[0];return[new u(Z.dark,Z.elapsed,Z.endpoints,new T(X),Z.navigation,Z.pending,Z.rsvp_error,Z.start_error,Z.state,Z.steps,Z.timer_id,Z.wiki_html),s()]}}else if(Q instanceof S8)return[new u(Z.dark,Z.elapsed,Z.endpoints,Z.goal_error,Z.navigation,Z.pending,Z.rsvp_error,Z.start_error,new _Q,Z.steps,Z.timer_id,Z.wiki_html),s()];else if(Q instanceof j8){let W=Q[0],J=L9(W);if(J instanceof D)return S7(Z,W,!0);else{let X=J[0];return[new u(Z.dark,Z.elapsed,Z.endpoints,Z.goal_error,Z.navigation,Z.pending,Z.rsvp_error,new T(X),Z.state,Z.steps,Z.timer_id,Z.wiki_html),s()]}}else if(Q instanceof yQ){let W=Q[0];return[new u(W,Z.elapsed,Z.endpoints,Z.goal_error,Z.navigation,Z.pending,Z.rsvp_error,Z.start_error,Z.state,Z.steps,Z.timer_id,Z.wiki_html),s()]}else if(Q instanceof A8){let W,J=Z.endpoints;W=x6(J);let X=W,K;K=X[0];let V="/wiki/"+K;return[new u(Z.dark,Z.elapsed,(()=>{let Y=Z.endpoints;return aK(Y)})(),Z.goal_error,Z.navigation,V,Z.rsvp_error,Z.start_error,new EZ,Z.steps,Z.timer_id,Z.wiki_html),UQ(V,(Y)=>{return new LZ(Y)})]}else if(Q instanceof T8)return[new u(Z.dark,Z.elapsed,Z.endpoints,Z.goal_error,Z.navigation,Z.pending,Z.rsvp_error,Z.start_error,new vQ,Z.steps,Z.timer_id,Z.wiki_html),s()];else if(Q instanceof MQ){let W=Q[0];if(W instanceof D){let J=W[0];return[new u(Z.dark,Z.elapsed,(()=>{let X=Z.endpoints;return X7(X,J[0],J[1])})(),Z.goal_error,Z.navigation,Z.pending,new y,Z.start_error,Z.state,Z.steps,Z.timer_id,Z.wiki_html),s()]}else{let J=W[0];return[new u(Z.dark,Z.elapsed,Z.endpoints,Z.goal_error,Z.navigation,Z.pending,new T(B7(J)),Z.start_error,Z.state,Z.steps,Z.timer_id,Z.wiki_html),s()]}}else if(Q instanceof P8){let W=Q[0];return k5(Z,W)}else if(Q instanceof C8)return[new u(Z.dark,Z.elapsed,Z.endpoints,Z.goal_error,Z.navigation,Z.pending,Z.rsvp_error,Z.start_error,new wZ,Z.steps,Z.timer_id,Z.wiki_html),A9(Z.timer_id,new b8)];else if(Q instanceof q8)return[new u(Z.dark,Z.elapsed,Z.endpoints,Z.goal_error,Z.navigation,Z.pending,Z.rsvp_error,Z.start_error,new QZ,Z.steps,Z.timer_id,Z.wiki_html),j9(1000,(W)=>{return new y8(W)},new g8)];else if(Q instanceof L8)return[new u(Z.dark,Z.elapsed,Z.endpoints,Z.goal_error,Z.navigation,Z.pending,Z.rsvp_error,Z.start_error,new QZ,Z.steps,Z.timer_id,Z.wiki_html),j9(1000,(W)=>{return new y8(W)},new g8)];else if(Q instanceof bQ)return[C9(),oZ(G([h8((W)=>{return new MQ(W)}),y6((W)=>{return new yQ(W)})]))];else if(Q instanceof w8)return[new u(Z.dark,Z.elapsed,(()=>{let W=Z.endpoints;return eK(W)})(),Z.goal_error,Z.navigation,Z.pending,Z.rsvp_error,Z.start_error,Z.state,Z.steps,Z.timer_id,Z.wiki_html),h8((W)=>{return new MQ(W)})];else if(Q instanceof E8){let W,J=Z.endpoints;W=w6(J);let X=W,K;return K=X[0],[F7(Z),UQ("/wiki/"+K,(V)=>{return new LZ(V)})]}else if(Q instanceof x8)return[Z,s()];else if(Q instanceof LZ){let W=Q[0];if(W instanceof D){let J=W[0],X,K=Z.endpoints;X=L6(K);let V=X,Y;Y=V[0];let M;if(N0(Z.pending)==="/wiki/"+N0(Y))M=[new FZ,oZ(G([A9(Z.timer_id,new b8),S9(new x8)]))];else M=[Z.state,S9(new x8)];let F=M,N,B;N=F[0],B=F[1];{let C=Z.pending;return[new u(Z.dark,Z.elapsed,Z.endpoints,Z.goal_error,U7(C,Z.navigation),"",new y,Z.start_error,N,Z.steps,Z.timer_id,J),B]}}else{let J=W[0];return[new u(Z.dark,Z.elapsed,Z.endpoints,Z.goal_error,Z.navigation,Z.pending,new T(B7(J)),Z.start_error,Z.state,Z.steps,Z.timer_id,"failed to fetch"),s()]}}else if(Q instanceof k8)if(Z.state instanceof QZ){let J=Y7(Z.navigation),X,K;if(X=J[0],K=J[1],K==="")return[Z,s()];else return[new u(Z.dark,Z.elapsed,Z.endpoints,Z.goal_error,X,K,Z.rsvp_error,Z.start_error,Z.state,Z.steps+1,Z.timer_id,Z.wiki_html),UQ(K,(V)=>{return new LZ(V)})]}else return[Z,s()];else if(Q instanceof f8)if(Z.state instanceof QZ){let J=G7(Z.navigation),X,K;if(X=J[0],K=J[1],K==="")return[Z,s()];else return[new u(Z.dark,Z.elapsed,Z.endpoints,Z.goal_error,X,K,Z.rsvp_error,Z.start_error,Z.state,Z.steps+1,Z.timer_id,Z.wiki_html),UQ(K,(V)=>{return new LZ(V)})]}else return[Z,s()];else if(Q instanceof y8){let W=Q[0];return[new u(Z.dark,Z.elapsed,Z.endpoints,Z.goal_error,Z.navigation,Z.pending,Z.rsvp_error,Z.start_error,Z.state,Z.steps,W,Z.wiki_html),s()]}else if(Q instanceof b8)return[Z,s()];else if(Q instanceof g8){let W=Z.elapsed+1;return[new u(Z.dark,W,Z.endpoints,Z.goal_error,Z.navigation,Z.pending,Z.rsvp_error,Z.start_error,Z.state,Z.steps,Z.timer_id,Z.wiki_html),s()]}else{let W=Q[0];return[new u(W,Z.elapsed,Z.endpoints,Z.goal_error,Z.navigation,Z.pending,Z.rsvp_error,Z.start_error,Z.state,Z.steps,Z.timer_id,Z.wiki_html),s()]}}function _8(Z,Q){return nJ(Z,sZ(Q,(W)=>{return new tQ(!1,!1,W)}),k,DW,DW,0,0)}function A7(Z){if(Z instanceof M0)return new M0(Z.kind,Z.name,Z.handler,Z.include,OW,Z.stop_propagation,Z.debounce,Z.throttle);else return Z}function T7(Z){if(Z instanceof M0)return new M0(Z.kind,Z.name,Z.handler,Z.include,Z.prevent_default,OW,Z.debounce,Z.throttle);else return Z}function C0(Z){return _8("click",dZ(Z))}function w9(Z){return _8("input",OQ(G(["target","value"]),GZ,(Q)=>{return dZ(Z(Q))}))}function P7(Z){return _8("change",OQ(G(["target","checked"]),FJ,(Q)=>{return dZ(Z(Q))}))}class q7 extends H{}class L7 extends H{}class q0 extends H{}class w7 extends H{}class L0 extends H{}class E7 extends H{}class x7 extends H{}class k7 extends H{}function y5(Z){if(Z instanceof q7)return"-xs";else if(Z instanceof L7)return"-s";else if(Z instanceof q0)return"-m";else if(Z instanceof w7)return"-l";else return"-xl"}function b5(Z){if(Z instanceof L0)return"-elevated";else if(Z instanceof E7)return"-filled";else if(Z instanceof x7)return"-outlined";else if(Z instanceof k7)return"-text";else return"-tonal"}function u0(Z,Q,W,J,X){let K="micl-button"+b5(Q)+y5(Z),V,Y=I(K,W);return V=l0(Y," "),DX(I(z(V),J),X)}class p0 extends H{}class I0 extends H{}class d0 extends H{}class s0 extends H{}class i0 extends H{}class v8 extends H{}class $8 extends H{}class IZ extends H{}class k9 extends H{}class f9 extends H{}class y9 extends H{}class b9 extends H{}class g6 extends H{}function v5(Z,Q){if(Q instanceof k9)if(Z instanceof p0)return z("bg-primary/20 text-primary");else if(Z instanceof I0)return z("bg-primary-container/20 text-on-primary-container");else if(Z instanceof d0)return z("bg-secondary/20 text-secondary");else if(Z instanceof s0)return z("bg-secondary-container/20 text-on-secondary-container");else if(Z instanceof i0)return z("bg-tertiary/20 text-tertiary");else return z("bg-tertiary-container/20 text-on-tertiary-container");else if(Q instanceof f9)if(Z instanceof p0)return z("border-primary text-primary");else if(Z instanceof I0)return z("border-on-primary-container text-on-primary-container");else if(Z instanceof d0)return z("border-secondary text-secondary");else if(Z instanceof s0)return z("border-on-secondary-container text-on-secondary-container");else if(Z instanceof i0)return z("border-tertiary text-tertiary");else return z("border-on-tertiary-container text-on-tertiary-container");else if(Q instanceof y9)if(Z instanceof p0)return z("text-primary");else if(Z instanceof I0)return z("text-on-primary-container");else if(Z instanceof d0)return z("text-secondary");else if(Z instanceof s0)return z("text-on-secondary-container");else if(Z instanceof i0)return z("text-tertiary");else return z("text-on-tertiary-container");else if(Q instanceof b9)if(Z instanceof p0)return z("bg-primary text-primary");else if(Z instanceof I0)return z("bg-primary-container text-on-primary-container");else if(Z instanceof d0)return z("bg-secondary text-secondary");else if(Z instanceof s0)return z("bg-secondary-container text-on-secondary-container");else if(Z instanceof i0)return z("bg-tertiary text-tertiary");else return z("bg-tertiary-container text-on-tertiary-container");else if(Z instanceof p0)return z("outline-primary text-primary");else if(Z instanceof I0)return z("outline-on-primary-container text-on-primary");else if(Z instanceof d0)return z("outline-secondary text-secondary");else if(Z instanceof s0)return z("outline-on-secondary-container text-on-secondary-container");else if(Z instanceof i0)return z("outline-tertiary text-tertiary");else return z("outline-on-tertiary-container text-on-tertiary-container")}function $5(Z){if(Z instanceof v8)return z("px-2 py-1 text-xs");else if(Z instanceof $8)return z("px-3 py-1 text-sm");else if(Z instanceof IZ)return z("px-4 py-1 text-base");else return z("p-1")}function m5(Z){if(Z instanceof k9)return G([]);else if(Z instanceof f9)return G([z("bg-transparent border-2")]);else if(Z instanceof y9)return G([]);else if(Z instanceof b9)return G([]);else return G([z("outline outline-1")])}function g9(Z,Q,W,J,X){let K=I(z("gap-2 rounded-full transition-all"),I($5(Q),I(v5(W,Z),J)));return _(E0(m5(Z),K),X)}class h9 extends H{}class _9 extends H{}class $Q extends H{}function u5(Z,Q){if(Q instanceof h9)if(Z instanceof p0)return z("text-primary placeholder-primary bg-primary/20 hover:enabled:bg-primary/30");else if(Z instanceof I0)return z("text-on-primary-container placeholder-on-primary-container bg-primary-container/20 hover:enabled:bg-primary-container/30");else if(Z instanceof d0)return z("text-secondary placeholder-secondary bg-secondary/20 hover:enabled:bg-secondary/30");else if(Z instanceof s0)return z("text-on-secondary-container placeholder-on-secondary-container bg-secondary-container/20 hover:enabled:bg-secondary-container/30");else if(Z instanceof i0)return z("text-tertiary placeholder-tertiary bg-tertiary/20 hover:enabled:bg-tertiary/30");else return z("text-on-tertiary-container placeholder-on-tertiary-container bg-tertiary-container/20 hover:enabled:bg-tertiary-container/30");else if(Q instanceof _9)if(Z instanceof p0)return z("bg-primary placeholder-primary text-primary");else if(Z instanceof I0)return z("bg-primary-container placeholder-on-primary-container text-on-primary-container");else if(Z instanceof d0)return z("bg-secondary placeholder-secondary text-secondary");else if(Z instanceof s0)return z("bg-secondary-container placeholder-on-secondary-container text-on-secondary-container");else if(Z instanceof i0)return z("bg-tertiary placeholder-tertiary text-tertiary");else return z("bg-tertiary-container placeholder-on-tertiary-container text-on-tertiary-container");else if(Q instanceof $Q)if(Z instanceof p0)return z("border-primary focus:enabled:border-primary hover:enabled:border-primary text-primary");else if(Z instanceof I0)return z("border-on-primary-container focus:enabled:border-on-primary-container hover:enabled:border-on-primary-container text-primary");else if(Z instanceof d0)return z("border-secondary focus:enabled:border-secondary hover:enabled:border-secondary text-secondary");else if(Z instanceof s0)return z("border-on-secondary-container focus:enabled:border-on-secondary-container hover:enabled:border-on-secondary-container text-secondary");else if(Z instanceof i0)return z("border-tertiary focus:enabled:border-tertiary hover:enabled:border-tertiary text-tertiary");else return z("border-on-tertiary-container focus:enabled:border-on-tertiary-container hover:enabled:border-on-tertiary-container text-tertiary");else if(Z instanceof p0)return z("border-primary placeholder-primary text-primary");else if(Z instanceof I0)return z("border-on-primary-container placeholder-on-primary-container text-on-primary-container");else if(Z instanceof d0)return z("border-secondary placeholder-secondary text-secondary");else if(Z instanceof s0)return z("border-on-secondary-container placeholder-on-secondary-container text-on-secondary-container");else if(Z instanceof i0)return z("border-tertiary placeholder-tertiary text-tertiary");else return z("border-on-tertiary-container placeholder-on-tertiary-container text-on-tertiary-container")}function p5(Z){if(Z instanceof v8)return z("rounded-sm px-3.5 py-1.5 text-sm");else if(Z instanceof $8)return z("rounded-md px-4 py-2 text-base");else if(Z instanceof IZ)return z("rounded-lg px-5 py-2.5 text-lg");else return z("rounded-sm px-3.5 py-1.5 text-sm")}function d5(Z){if(Z instanceof h9)return G([z("focus:outline-none focus:ring-2 focus:ring-current")]);else if(Z instanceof _9)return G([(()=>{let Q=G(["bg-opacity-0 outline-none","hover:enabled:bg-opacity-20 focus:enabled:bg-opacity-30"]),W=l0(Q," ");return z(W)})()]);else if(Z instanceof $Q)return G([(()=>{let Q=G(["bg-transparent border-2 border-opacity-50 placeholder-opacity-70","hover:enabled:border-opacity-100 focus:enabled:border-opacity-100","focus:outline-none focus:ring-2 focus:ring-current"]),W=l0(Q," ");return z(W)})()]);else return G([(()=>{let Q=G(["bg-transparent border-opacity-20 border-b-2 outline-none rounded-b-none","focus:enabled:border-opacity-100"]),W=l0(Q," ");return z(W)})()])}function v9(Z,Q,W,J){let X=I(z("disabled:opacity-50 disabled:cursor-not-allowed transition-all"),I(p5(Q),I(u5(W,Z),J)));return V6(E0(d5(Z),X))}function f7(Z,Q,W){return _(G([z("grid grid-rows-1 grid-cols-2")]),G([b(Q),_(G([z("relative inline-block w-[52px] h-[32px] justify-self-center self-center")]),G([V6(G([aJ(Z),TQ("switch-component"),oJ("checkbox"),z("peer appearance-none w-[52px] h-[32px] bg-surface-container-highest rounded-full checked:bg-primary cursor-pointer transition-colors duration-300"),P7(W)])),Y8(G([eQ("switch-component"),z("absolute top-[4px] left-[2px] w-[24px] h-[24px] bg-outline peer-checked:bg-on-primary-container rounded-full border border-slate-300 shadow-sm transition-transform duration-300 peer-checked:translate-x-[25px] peer-checked:border-slate-800 cursor-pointer")]),G([]))]))]))}class y7 extends H{}class h6 extends H{}class b7 extends H{}function g7(Z,Q){let W;if(Q instanceof y7)W=z("absolute z-1 top-[100%] left-[50%] ml-[-60px]");else if(Q instanceof h6)W=z("absolute z-1 top-[-5px] right-[105%]");else if(Q instanceof b7)W=z("absolute z-1 top-[-5px] left-[106%]");else W=z("absolute z-1 bottom-[100%] left-[50%] ml-[-60px]");let J=W;return $Z(G([z("font-[sans-serif] tooltiptext text-base"),J]),G([b(Z)]))}function r5(Z){return _(G([z("menu self-center justify-self-center"),S0("data-placement","bottom-end")]),G([V8(G([S0("data-toggle","menu"),S0("aria-expanded","false"),z("fa-solid fa-gear self-center justify-self-center pr-1 text-3xl tooltip"),z("transition-all duration-300 ease-in disabled:cursor-not-allowed disabled:opacity-50 disabled:shadow-none")]),G([g7("Settings",new h6)])),RX(G([S0("data-role","menu"),z("hidden mt-2 bg-white border border-slate-200 rounded-lg shadow-xl shadow-slate-950/[0.025] p-1 z-10")]),G([NX(G([]),G([f7(Z,"Dark mode",(Q)=>{return new k6(Q)})]))]))]))}function l5(Z,Q){if(Z instanceof T)if(Q instanceof T){let W=Z[0],J=Q[0];return[G([_(G([z("bg-error self-center justify-self-start")]),G([b(W)])),_(G([z("bg-error self-center justify-self-start")]),G([b(J)]))]),"grid-rows-4"]}else{let W=Z[0];return[G([_(G([z("bg-error self-center justify-self-start")]),G([b(W)]))]),"grid-rows-4"]}else if(Q instanceof T){let W=Q[0];return[G([_(G([z("bg-error self-center justify-self-start col-2")]),G([b(W)]))]),"grid-rows-4"]}else return[G([F0()]),"grid-rows-3"]}function a5(Z,Q,W,J){let X=l5(J,W),K,V;K=X[0],V=X[1];let Y;Y=Q[0];let M;return M=Z[0],_(G([z("grid grid-rows-[1fr_3fr_1fr] gap-2")]),G([_(G([z("self-center justify-self-center text-xl")]),G([b("Custom game selected. Choose the start and the goal")])),_(G([z("grid grid-cols-2 "+V+" lg:px-50 md:px-25 sm:px-5")]),E0(G([Y8(G([z("self-center"),eQ("start")]),G([b("Start")])),Y8(G([z("self-center"),eQ("goal")]),G([b("Goal")])),v9(new $Q,new IZ,new I0,G([z("justify-self-stretch"),TQ("start"),BW("Start"),w9((U)=>{return new j8(U)})])),v9(new $Q,new IZ,new I0,G([z("justify-self-stretch"),TQ("goal"),BW("Goal"),w9((U)=>{return new B8(U)})])),TZ(G([z("italic")]),G([b("Initial Wikipedia topic")])),TZ(G([z("italic")]),G([b("Goal/target Wikipedia topic")]))]),K)),_(G([z("justify-self-center")]),G([u0(new q0,new L0,G([]),G([C0(new O8),bZ(wJ(iQ(M),iQ(Y)))]),G([b("Continue")]))]))]))}function o5(Z){if(Z instanceof T){let Q=Z[0];return _(G([z("bg-error self-center justify-self-start")]),G([b(Q)]))}else return F0()}function t5(Z){if(Z instanceof FZ)return _(G([z("grid font-bold place-content-center text-xl bg-teal-500")]),G([_(G([z("justify-self-center")]),G([b("Goal! Goal! Goal!")]))]));else return F0()}function e5(Z,Q,W){let J;J=Q[0];let X;X=Z[0];let K;if(W instanceof T)if(X===""&&J==="")K=o5(W);else K=F0();else if(X===""&&J==="")K=_(G([z("justify-self-center")]),G([V8(G([z("fa-solid fa-spinner fa-spin-pulse justify-self-center text-5xl")]),G([F0()]))]));else K=F0();let V=K;return _(G([z("grid grid-rows-5")]),G([_(G([z("self-center justify-self-center text-xl")]),G([b("Random game selected")])),_(G([z("grid grid-cols-2 lg:px-50 md:px-25 sm:px-5 gap-1 content-center justify-items-center")]),G([$Z(G([z("font-bold")]),G([b("Start: ")])),$Z(G([z("font-bold")]),G([b("Goal: ")]))])),V,_(G([z("grid grid-cols-2 lg:px-50 md:px-25 sm:px-5 gap-1 content-center justify-items-center")]),G([TZ(G([]),G([b(X)])),TZ(G([]),G([b(J)]))])),_(G([z("grid grid-cols-2 lg:px-50 md:px-25 sm:px-5 gap-1 justify-items-center")]),G([u0(new q0,new L0,G(["self-center"]),G([C0(new A8)]),G([b("Continue")])),u0(new q0,new L0,G(["self-center"]),G([C0(new w8)]),G([b("Deal again")]))]))]))}function $9(Z,Q,W,J,X){let K;if(Z instanceof hQ)K=F0();else if(Z instanceof _Q)K=a5((()=>{return E6(Q)})(),(()=>{return oK(Q)})(),W,J);else if(Z instanceof vQ)K=e5((()=>{return x6(Q)})(),(()=>{return Q7(Q)})(),X);else K=F0();let V=K;return G([_(G([z("grid grid-cols-2 gap-4 justify-center")]),G([g9(new g6,new IZ,new I0,G([z("justify-self-end"),C0(new T8)]),G([b("Random")])),g9(new g6,new IZ,new I0,G([z("justify-self-start"),C0(new S8)]),G([b("Custom")]))])),V])}function Z4(Z,Q){let W=M7(Q),J,X;J=W[0],X=W[1];let K;if(Z instanceof FZ)K=bZ(!0);else if(J)K=bZ(!1);else K=bZ(!0);let V=K,Y;if(Z instanceof FZ)Y=bZ(!0);else if(X)Y=bZ(!1);else Y=bZ(!0);let M=Y,U;if(Z instanceof FZ)U=z("grid-cols-3");else if(Z instanceof QZ)U=z("grid-cols-3");else if(Z instanceof wZ)U=z("grid-cols-5");else if(Z instanceof EZ)U=z("grid-cols-3");else U=z("grid-cols-3");let F=U;return _(G([z("grid lg:px-50 md:px-25 sm:px-5 gap-1 justify-center"),F]),G([u0(new q0,new L0,G([]),G([C0(new k8),V]),G([b("Back")])),u0(new q0,new L0,G([]),G([C0(new f8),M]),G([b("Forward")])),(()=>{if(Z instanceof QZ)return u0(new q0,new L0,G([]),G([C0(new C8)]),G([b("Pause")]));else if(Z instanceof wZ)return u0(new q0,new L0,G([]),G([C0(new q8)]),G([b("Continue")]));else if(Z instanceof EZ)return u0(new q0,new L0,G([]),G([C0(new L8)]),G([b("Play")]));else return F0()})(),(()=>{if(Z instanceof FZ)return u0(new q0,new L0,G([]),G([C0(new bQ)]),G([b("New Game")]));else if(Z instanceof wZ)return u0(new q0,new L0,G([]),G([C0(new bQ)]),G([b("New Game")]));else return F0()})(),(()=>{if(Z instanceof wZ)return u0(new q0,new L0,G([]),G([C0(new E8)]),G([b("Restart")]));else return F0()})()]))}function Q4(Z){let Q=globalThis.Math.trunc(Z/3600),W=globalThis.Math.trunc(Z%3600/60),J=Z%60,X,K=Q;if(K<10)X="0"+X0(K);else X=X0(Q);let V=X,Y,M=W;if(M<10)Y="0"+X0(M);else Y=X0(W);let U=Y,F,N=J;if(N<10)F="0"+X0(N);else F=X0(J);let B=F;return V+":"+U+":"+B}function W4(Z,Q){return _(G([z("grid grid-cols-2 gap-4")]),G([_(G([z("grid content-center justify-end text-xl")]),G([TZ(G([]),G([b("Steps: "),$Z(G([z("font-bold")]),G([b(X0(Z))]))]))])),_(G([z("grid content-center justify-start text-xl")]),G([TZ(G([]),G([b(" Elapsed: "),$Z(G([z("font-bold")]),G([b(Q4(Q))]))]))]))]))}function J4(Z){return _8("click",OQ(G(["target","tagName"]),GZ,(Q)=>{if(Q==="A"){let W=NJ(G(["target","href"]),GZ);return sZ(W,Z)}else return WW(Z(""),"<a>")}))}function X4(Z,Q,W){let J;if(W instanceof T)if(Q===""){let K=W[0];J=_(G([z("bg-error justify-self-center")]),G([b(K)]))}else J=_(G([z("justify-self-center")]),G([V8(G([z("fa-solid fa-spinner fa-spin-pulse justify-self-center text-5xl")]),G([F0()]))]));else if(Q==="")J=F0();else J=_(G([z("justify-self-center")]),G([V8(G([z("fa-solid fa-spinner fa-spin-pulse justify-self-center text-5xl")]),G([F0()]))]));let X=J;return _(G([z("grid grid-rows-2")]),G([X,hW("","div",G([TQ("wiki"),(()=>{let K=J4((Y)=>{return new P8(Y)}),V=A7(K);return T7(V)})()]),Z)]))}function _6(Z){let Q=L6(Z.endpoints),W;W=Q[0];let J=_(G([z("grid grid-cols-2 gap-4 text-xl")]),G([TZ(G([z("justify-self-end self-center")]),G([b("Target:")])),$Z(G([z("font-bold justify-self-start self-center")]),G([b(W)]))]));return G([_(G([z("grid gap-4")]),G([J,Z4(Z.state,Z.navigation),t5(Z.state),W4(Z.steps,Z.elapsed)])),X4(Z.wiki_html,Z.pending,Z.rsvp_error)])}function h7(Z){let Q,W=Z.state;if(W instanceof hQ)Q=$9(Z.state,Z.endpoints,Z.goal_error,Z.start_error,Z.rsvp_error);else if(W instanceof FZ)Q=_6(Z);else if(W instanceof _Q)Q=$9(Z.state,Z.endpoints,Z.goal_error,Z.start_error,Z.rsvp_error);else if(W instanceof QZ)Q=_6(Z);else if(W instanceof wZ)Q=_6(Z);else if(W instanceof vQ)Q=$9(Z.state,Z.endpoints,Z.goal_error,Z.start_error,Z.rsvp_error);else Q=_6(Z);let J=Q,X=_(G([z("grid grid-rows-1 grid-cols-[19fr_1fr] border-none")]),G([TZ(G([z("font-bold italic pb-1 pt-1 justify-self-center text-primary text-3xl")]),G([b("Wiki Racing")])),r5(Z.dark)])),K;if(Z.dark)K=z("dark");else K=z("light");return _(G([K]),I(X,J))}var V4="src/wrspa.gleam";function _7(){let Z=YK(H7,j7,h7),Q=GK(Z,"#app",void 0);if(!(Q instanceof D))throw uQ("let_assert",V4,"wrspa",18,"main","Pattern match failed, no pattern matched the value.",{value:Q,start:496,end:545,pattern_start:507,pattern_end:512});return}_7();
